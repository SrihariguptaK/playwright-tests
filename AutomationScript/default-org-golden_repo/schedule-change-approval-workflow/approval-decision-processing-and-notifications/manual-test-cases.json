[
  {
    "storyId": "story-13",
    "storyTitle": "As Approver, I want to review and decide on schedule change requests to ensure authorized modifications",
    "testCases": [
      {
        "id": "tc-001",
        "title": "Validate approval decision submission with comments",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "Approver user account exists with valid credentials and Approver role assigned",
          "At least one schedule change request is in 'Pending' status and assigned to the logged-in approver",
          "Request has complete details including requester information, schedule changes, and justification",
          "At least one document is attached to the request",
          "System is accessible and all services are running"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the application login page and enter valid approver credentials (username and password), then click Login button",
            "expectedResult": "Approver is successfully authenticated and redirected to the dashboard home page"
          },
          {
            "step": 2,
            "action": "Click on 'Pending Approvals' menu item or navigate to the pending approvals dashboard",
            "expectedResult": "List of pending schedule change requests assigned to the approver is displayed with columns showing request ID, requester name, submission date, and request type"
          },
          {
            "step": 3,
            "action": "Select a specific pending request from the list by clicking on the request row or 'View Details' button",
            "expectedResult": "Request details page opens displaying complete information including requester details, current schedule, proposed schedule, justification, submission timestamp, and attached documents section"
          },
          {
            "step": 4,
            "action": "Review all request details and click on attached document links to view supporting documentation",
            "expectedResult": "All request information is clearly visible and attached documents open successfully for review in a new tab or viewer"
          },
          {
            "step": 5,
            "action": "Locate the decision section, select 'Approve' option from the decision radio buttons or dropdown menu",
            "expectedResult": "'Approve' decision is selected and highlighted, comments text area becomes available for input"
          },
          {
            "step": 6,
            "action": "Enter detailed comments in the comments text area explaining the rationale for approval (e.g., 'Request approved as justification is valid and no conflicts identified')",
            "expectedResult": "Comments are entered successfully in the text area with character count displayed if applicable"
          },
          {
            "step": 7,
            "action": "Click 'Submit Decision' button to finalize the approval",
            "expectedResult": "System processes the submission, displays a success confirmation message (e.g., 'Decision submitted successfully'), request status updates to 'Approved', and approver is redirected to pending approvals list or confirmation page"
          },
          {
            "step": 8,
            "action": "Verify the request no longer appears in the pending approvals list",
            "expectedResult": "The approved request is removed from the pending list and the count of pending requests is decremented by one"
          }
        ],
        "postconditions": [
          "Request status is updated to 'Approved' in the database",
          "Decision timestamp and approver identity are logged in the system",
          "Comments are saved and associated with the approval decision",
          "Requester receives notification of approval decision",
          "Audit trail entry is created with complete decision details",
          "Request is moved to approved requests archive"
        ],
        "estimatedTime": "8 mins"
      },
      {
        "id": "tc-002",
        "title": "Verify rejection of decision submission without selection",
        "type": "error-case",
        "priority": "High",
        "preconditions": [
          "Approver user account exists with valid credentials and Approver role assigned",
          "At least one schedule change request is in 'Pending' status and assigned to the logged-in approver",
          "System validation rules are configured to require decision selection before submission",
          "System is accessible and all services are running"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the application login page and enter valid approver credentials, then click Login button",
            "expectedResult": "Approver is successfully authenticated and redirected to the dashboard"
          },
          {
            "step": 2,
            "action": "Navigate to 'Pending Approvals' section from the main menu",
            "expectedResult": "List of pending schedule change requests is displayed"
          },
          {
            "step": 3,
            "action": "Click on a pending request to open the request details page",
            "expectedResult": "Request details page opens showing all request information, decision options (Approve/Reject/Request More Info), and comments field"
          },
          {
            "step": 4,
            "action": "Without selecting any decision option (Approve, Reject, or Request More Info), optionally enter comments in the comments text area",
            "expectedResult": "Comments are entered but no decision radio button or option is selected"
          },
          {
            "step": 5,
            "action": "Click 'Submit Decision' button without selecting a decision",
            "expectedResult": "System blocks the submission and displays a validation error message such as 'Please select a decision before submitting' or 'Decision selection is required' near the decision options or at the top of the form"
          },
          {
            "step": 6,
            "action": "Verify that the request status remains unchanged and the page remains on the request details view",
            "expectedResult": "Request status is still 'Pending', no changes are saved to the database, and the approver remains on the same page to make corrections"
          },
          {
            "step": 7,
            "action": "Verify the decision options are highlighted or marked to indicate required field",
            "expectedResult": "Decision section is visually indicated as required (e.g., red border, asterisk, or error styling)"
          }
        ],
        "postconditions": [
          "Request status remains 'Pending' in the database",
          "No decision record is created or logged",
          "No notifications are sent to the requester",
          "Approver remains on the request details page to complete the required action",
          "No audit trail entry is created for this attempted submission"
        ],
        "estimatedTime": "5 mins"
      },
      {
        "id": "tc-003",
        "title": "Test audit logging of approval decisions",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "Approver user account exists with valid credentials and Approver role assigned",
          "Administrator user account exists with permissions to view audit logs",
          "At least one schedule change request is in 'Pending' status and assigned to the approver",
          "Audit logging functionality is enabled and configured in the system",
          "System is accessible and all services are running"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Login as approver, navigate to pending approvals, and select a request to review",
            "expectedResult": "Approver is logged in and request details page is displayed"
          },
          {
            "step": 2,
            "action": "Select a decision option (e.g., 'Approve'), enter comments such as 'Approved based on valid business justification and resource availability', and note the current system timestamp",
            "expectedResult": "Decision is selected and comments are entered in the text area"
          },
          {
            "step": 3,
            "action": "Click 'Submit Decision' button to submit the approval decision",
            "expectedResult": "System displays success confirmation message, decision is saved, and request status is updated to 'Approved'"
          },
          {
            "step": 4,
            "action": "Note the approver's user ID and the exact timestamp of submission from the confirmation message or system clock",
            "expectedResult": "Submission timestamp and approver identity are captured for verification"
          },
          {
            "step": 5,
            "action": "Logout from the approver account and login as administrator with valid admin credentials",
            "expectedResult": "Administrator is successfully authenticated and redirected to admin dashboard"
          },
          {
            "step": 6,
            "action": "Navigate to 'Audit Logs' or 'System Logs' section from the administrator menu",
            "expectedResult": "Audit logs page is displayed with search and filter options"
          },
          {
            "step": 7,
            "action": "Search or filter audit logs by the request ID, approver user ID, or timestamp range corresponding to the submitted decision",
            "expectedResult": "Audit log entries matching the search criteria are displayed in a table or list format"
          },
          {
            "step": 8,
            "action": "Locate and verify the audit log entry for the approval decision contains: request ID, decision type ('Approved'), approver user ID, timestamp, and comments text",
            "expectedResult": "Audit log entry is present and displays accurate information including: correct request ID, decision='Approved', approver ID matching the logged-in approver, timestamp within acceptable range (Â±1 minute of submission), and exact comments text entered by approver"
          },
          {
            "step": 9,
            "action": "Verify the audit log entry is immutable and displays creation metadata (created by, created date)",
            "expectedResult": "Audit log entry shows as read-only with no edit or delete options, and includes system-generated metadata"
          }
        ],
        "postconditions": [
          "Audit log entry exists in the database with complete decision details",
          "Audit log entry is immutable and tamper-proof",
          "Timestamp is accurate and matches the decision submission time",
          "Approver identity is correctly recorded in the audit trail",
          "Comments are fully captured in the audit log",
          "Audit log is accessible to authorized administrators for compliance and review purposes"
        ],
        "estimatedTime": "10 mins"
      }
    ]
  },
  {
    "storyId": "story-15",
    "storyTitle": "As Approver, I want to receive notifications for new schedule change requests to ensure timely review",
    "testCases": [
      {
        "id": "tc-004",
        "title": "Validate email notification sent on new request assignment",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "Approver user account exists with valid email address configured in the system",
          "Email notification service is configured and operational",
          "Approver has notification preferences enabled for email notifications",
          "System has capability to assign schedule change requests to approvers",
          "Email server is accessible and functioning properly",
          "Test email inbox is accessible for verification"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Note the current system time before initiating the test",
            "expectedResult": "Current timestamp is recorded for measuring notification delivery time"
          },
          {
            "step": 2,
            "action": "As a requester or administrator, create and submit a new schedule change request and assign it to a specific approver",
            "expectedResult": "Schedule change request is successfully created and assigned to the target approver, request status is set to 'Pending Approval'"
          },
          {
            "step": 3,
            "action": "Monitor the system notification queue or logs to verify notification trigger event is fired",
            "expectedResult": "System detects the new assignment and triggers email notification process within seconds of assignment"
          },
          {
            "step": 4,
            "action": "Wait for up to 1 minute and check the approver's email inbox for the notification email",
            "expectedResult": "Email notification is received in the approver's inbox within 1 minute of request assignment, meeting the performance requirement"
          },
          {
            "step": 5,
            "action": "Open the notification email and verify the sender is the system notification address (e.g., noreply@schedulesystem.com)",
            "expectedResult": "Email sender is correctly identified as the system notification service"
          },
          {
            "step": 6,
            "action": "Verify the email subject line contains relevant information such as 'New Schedule Change Request Requires Your Approval' or similar clear subject",
            "expectedResult": "Email subject is clear, professional, and indicates the purpose of the notification"
          },
          {
            "step": 7,
            "action": "Review the email body content to verify it includes: request summary (request ID, requester name, request type, submission date), brief description of the schedule change, and a direct clickable link to review the request",
            "expectedResult": "Email body contains complete request summary with all required information: request ID, requester name, request type, submission date, schedule change description, and a properly formatted hyperlink to the request review page"
          },
          {
            "step": 8,
            "action": "Click on the direct link provided in the email notification",
            "expectedResult": "Link opens the application in a web browser and navigates directly to the specific request review page, with the request details displayed (may require login if not already authenticated)"
          },
          {
            "step": 9,
            "action": "Verify the timestamp of email receipt matches within 1 minute of the request assignment time noted in step 1",
            "expectedResult": "Email delivery time is within the 1-minute SLA requirement from the time of request assignment"
          }
        ],
        "postconditions": [
          "Email notification is successfully delivered to approver's inbox",
          "Notification delivery is logged in the system with timestamp",
          "Approver can access the request directly via the email link",
          "Notification record is created in the database preventing duplicate sends",
          "Email delivery time meets the 1-minute performance requirement"
        ],
        "estimatedTime": "6 mins"
      },
      {
        "id": "tc-005",
        "title": "Verify in-app alert on approver login",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "Approver user account exists with valid credentials",
          "At least one new schedule change request is assigned to the approver and is in 'Pending Approval' status",
          "Approver has not yet logged in since the request was assigned (to ensure alert is new)",
          "In-app notification feature is enabled in the system",
          "System is accessible and all services are running"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Ensure at least one pending approval request exists for the test approver by creating and assigning a new schedule change request",
            "expectedResult": "New schedule change request is created and assigned to the approver, status is 'Pending Approval'"
          },
          {
            "step": 2,
            "action": "Navigate to the application login page and enter the approver's valid credentials (username and password)",
            "expectedResult": "Login credentials are entered in the respective fields"
          },
          {
            "step": 3,
            "action": "Click the Login button to authenticate",
            "expectedResult": "Approver is successfully authenticated and redirected to the dashboard or home page"
          },
          {
            "step": 4,
            "action": "Immediately upon page load, observe the top navigation bar, notification bell icon, or alert panel for in-app alerts",
            "expectedResult": "In-app alert is prominently displayed showing notification of new approval requests, typically as a badge count on notification icon, banner message, or popup alert"
          },
          {
            "step": 5,
            "action": "Verify the alert content includes a list or summary of new pending approval requests with request IDs and requester names",
            "expectedResult": "Alert displays clear information listing new requests such as 'You have 1 new approval request' or 'New request from [Requester Name] - Request ID: [ID]'"
          },
          {
            "step": 6,
            "action": "Click on the in-app alert notification or the notification bell icon to expand alert details",
            "expectedResult": "Alert expands to show detailed list of pending requests with clickable links for each request"
          },
          {
            "step": 7,
            "action": "Click on the link or button within the alert corresponding to a specific pending request",
            "expectedResult": "System navigates directly to the request review page for the selected request, displaying complete request details including requester information, schedule changes, justification, and attached documents"
          },
          {
            "step": 8,
            "action": "Verify the URL and page content confirm navigation to the correct request review page matching the request ID from the alert",
            "expectedResult": "Request review page displays the correct request matching the ID clicked in the alert, with all details visible and ready for review"
          }
        ],
        "postconditions": [
          "In-app alert is displayed successfully upon approver login",
          "Alert provides accurate information about pending requests",
          "Navigation link from alert to request review page functions correctly",
          "Alert can be dismissed or marked as read after viewing",
          "User experience is smooth and notifications are non-intrusive"
        ],
        "estimatedTime": "5 mins"
      },
      {
        "id": "tc-006",
        "title": "Test prevention of duplicate notifications",
        "type": "edge-case",
        "priority": "High",
        "preconditions": [
          "Approver user account exists with valid email address configured",
          "Email notification service is operational",
          "System has duplicate notification prevention logic implemented",
          "Test environment allows simulation of multiple assignment processing events",
          "Access to notification logs or database to verify notification records",
          "Email inbox is accessible for verification"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Clear or note the current state of the approver's email inbox and in-app notifications to establish a baseline",
            "expectedResult": "Baseline state is established with count of existing notifications recorded"
          },
          {
            "step": 2,
            "action": "Create a new schedule change request and assign it to the target approver for the first time",
            "expectedResult": "Request is created and assigned successfully, assignment event is triggered in the system"
          },
          {
            "step": 3,
            "action": "Verify that the first notification is sent by checking the notification logs or database for a notification record with the request ID and approver ID",
            "expectedResult": "One notification record is created in the database with status 'Sent', timestamp is recorded, and email is delivered to approver's inbox"
          },
          {
            "step": 4,
            "action": "Simulate or trigger the same request assignment event again (this could be done by re-running the assignment process, triggering a system event, or using an API call to process the same assignment)",
            "expectedResult": "System processes the duplicate assignment event or trigger"
          },
          {
            "step": 5,
            "action": "Wait for up to 2 minutes to allow sufficient time for any potential duplicate notification to be sent",
            "expectedResult": "Waiting period completes"
          },
          {
            "step": 6,
            "action": "Check the notification logs or database to verify the total number of notification records for this specific request ID and approver combination",
            "expectedResult": "Only one notification record exists in the database for this request-approver pair, no duplicate records are created despite multiple processing attempts"
          },
          {
            "step": 7,
            "action": "Check the approver's email inbox to count the number of notification emails received for this specific request",
            "expectedResult": "Only one email notification is present in the inbox for this request, no duplicate emails were sent"
          },
          {
            "step": 8,
            "action": "Review system logs for duplicate detection messages or warnings indicating that duplicate notification was prevented",
            "expectedResult": "System logs show evidence of duplicate detection logic executing successfully, such as 'Duplicate notification prevented for Request ID [ID]' or similar log entry"
          },
          {
            "step": 9,
            "action": "Repeat steps 4-7 one more time to test multiple duplicate attempts (trigger assignment a third time)",
            "expectedResult": "System continues to prevent duplicate notifications, maintaining only one notification record and one email in inbox regardless of multiple processing attempts"
          }
        ],
        "postconditions": [
          "Only one notification record exists in the database for the request-approver combination",
          "Only one email notification was delivered to the approver's inbox",
          "Duplicate prevention logic is confirmed to be working correctly",
          "System logs document the duplicate prevention actions",
          "No unnecessary notifications clutter the approver's inbox or alert system",
          "Database integrity is maintained without duplicate notification records"
        ],
        "estimatedTime": "8 mins"
      }
    ]
  }
]