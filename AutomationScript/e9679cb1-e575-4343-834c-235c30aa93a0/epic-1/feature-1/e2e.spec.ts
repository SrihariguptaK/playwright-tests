json
{
  "success": true,
  "playwrightTests": [
    {
      "storyId": "story-1",
      "storyTitle": "As HR Manager, I want to create shift templates to achieve standardized shift definitions",
      "testFile": "shift-templates.spec.ts",
      "testCode": "import { test, expect } from '@playwright/test';\n\ntest.describe('Shift Template Management', () => {\n  test.beforeEach(async ({ page }) => {\n    // Navigate to the application and login as HR Manager\n    await page.goto('/login');\n    await page.fill('[data-testid=\"username-input\"]', 'hr.manager@company.com');\n    await page.fill('[data-testid=\"password-input\"]', 'password123');\n    await page.click('[data-testid=\"login-button\"]');\n    await expect(page).toHaveURL(/.*dashboard/);\n  });\n\n  test('Validate successful creation of valid shift template', async ({ page }) => {\n    // Step 1: Navigate to shift template creation page\n    await page.goto('/shift-templates/create');\n    await expect(page.locator('[data-testid=\"shift-template-form\"]')).toBeVisible();\n    await expect(page.locator('h1')).toContainText('Create Shift Template');\n\n    // Step 2: Enter valid start time, end time, and break periods\n    await page.fill('[data-testid=\"template-name-input\"]', 'Morning Shift');\n    await page.fill('[data-testid=\"start-time-input\"]', '09:00');\n    await page.selectOption('[data-testid=\"start-time-period\"]', 'AM');\n    await page.fill('[data-testid=\"end-time-input\"]', '05:00');\n    await page.selectOption('[data-testid=\"end-time-period\"]', 'PM');\n    \n    // Add break period\n    await page.click('[data-testid=\"add-break-button\"]');\n    await page.fill('[data-testid=\"break-duration-input\"]', '30');\n    await page.fill('[data-testid=\"break-start-time-input\"]', '12:00');\n    await page.selectOption('[data-testid=\"break-start-period\"]', 'PM');\n    \n    // Verify no validation errors are displayed\n    await expect(page.locator('[data-testid=\"validation-error\"]')).not.toBeVisible();\n\n    // Step 3: Submit the form\n    await page.click('[data-testid=\"save-template-button\"]');\n    \n    // Verify shift template is saved and confirmation message is displayed\n    await expect(page.locator('[data-testid=\"success-message\"]')).toBeVisible();\n    await expect(page.locator('[data-testid=\"success-message\"]')).toContainText('Shift template created successfully');\n    await expect(page).toHaveURL(/.*shift-templates/);\n  });\n\n  test('Reject shift template with invalid duration', async ({ page }) => {\n    // Step 1: Navigate to shift template creation page\n    await page.goto('/shift-templates/create');\n    await expect(page.locator('[data-testid=\"shift-template-form\"]')).toBeVisible();\n    await expect(page.locator('h1')).toContainText('Create Shift Template');\n\n    // Step 2: Enter end time earlier than start time\n    await page.fill('[data-testid=\"template-name-input\"]', 'Invalid Shift');\n    await page.fill('[data-testid=\"start-time-input\"]', '05:00');\n    await page.selectOption('[data-testid=\"start-time-period\"]', 'PM');\n    await page.fill('[data-testid=\"end-time-input\"]', '09:00');\n    await page.selectOption('[data-testid=\"end-time-period\"]', 'AM');\n    \n    // Verify validation error message is displayed\n    await expect(page.locator('[data-testid=\"validation-error\"]')).toBeVisible();\n    await expect(page.locator('[data-testid=\"validation-error\"]')).toContainText('End time must be after start time');\n\n    // Step 3: Attempt to submit the form\n    await page.click('[data-testid=\"save-template-button\"]');\n    \n    // Verify submission is blocked and error message is shown\n    await expect(page.locator('[data-testid=\"validation-error\"]')).toBeVisible();\n    await expect(page.locator('[data-testid=\"error-message\"]')).toContainText('Please fix validation errors before submitting');\n    await expect(page).toHaveURL(/.*create/);\n  });\n\n  test('Prevent deletion of assigned shift template', async ({ page }) => {\n    // Navigate to shift template list\n    await page.goto('/shift-templates');\n    await expect(page.locator('[data-testid=\"shift-templates-list\"]')).toBeVisible();\n\n    // Step 1: Attempt to delete a shift template assigned to schedules\n    const assignedTemplate = page.locator('[data-testid=\"template-row\"]').filter({ hasText: 'Assigned Template' });\n    await assignedTemplate.locator('[data-testid=\"delete-button\"]').click();\n    \n    // Verify system displays warning and prevents deletion\n    await expect(page.locator('[data-testid=\"warning-dialog\"]')).toBeVisible();\n    await expect(page.locator('[data-testid=\"warning-message\"]')).toContainText('Cannot delete shift template that is assigned to schedules');\n    await page.click('[data-testid=\"close-dialog-button\"]');\n    \n    // Verify template still exists in the list\n    await expect(assignedTemplate).toBeVisible();\n\n    // Step 2: Attempt to delete a shift template not assigned\n    const unassignedTemplate = page.locator('[data-testid=\"template-row\"]').filter({ hasText: 'Unassigned Template' });\n    await unassignedTemplate.locator('[data-testid=\"delete-button\"]').click();\n    \n    // Confirm deletion in dialog\n    await expect(page.locator('[data-testid=\"confirm-dialog\"]')).toBeVisible();\n    await page.click('[data-testid=\"confirm-delete-button\"]');\n    \n    // Verify template is deleted successfully\n    await expect(page.locator('[data-testid=\"success-message\"]')).toBeVisible();\n    await expect(page.locator('[data-testid=\"success-message\"]')).toContainText('Shift template deleted successfully');\n    await expect(unassignedTemplate).not.toBeVisible();\n  });\n});"
    }
  ]
}