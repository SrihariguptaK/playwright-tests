[
  {
    "storyId": "story-13",
    "storyTitle": "As Compliance Officer, I want to view a full audit trail of quote edits to ensure regulatory compliance",
    "testCases": [
      {
        "id": "tc-001",
        "title": "Validate audit log creation for quote edits",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "Test environment is accessible and operational",
          "Quote Manager user account exists with quote editing permissions",
          "Compliance Officer user account exists with audit trail access",
          "Unauthorized user account exists without audit trail access",
          "At least one active quote exists in the system",
          "Audit logs database is operational and accessible"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Log into the system as Quote Manager user",
            "expectedResult": "Quote Manager successfully logs in and dashboard is displayed"
          },
          {
            "step": 2,
            "action": "Navigate to an existing quote and open it for editing",
            "expectedResult": "Quote details page opens with edit functionality available"
          },
          {
            "step": 3,
            "action": "Make a change to the quote (e.g., update pricing, modify terms, or change customer information)",
            "expectedResult": "Quote is updated successfully and confirmation message is displayed"
          },
          {
            "step": 4,
            "action": "Note the current timestamp and Quote Manager user ID for verification",
            "expectedResult": "Timestamp and user ID are recorded for later validation"
          },
          {
            "step": 5,
            "action": "Log out as Quote Manager and log in as Compliance Officer",
            "expectedResult": "Compliance Officer successfully logs in and compliance dashboard is displayed"
          },
          {
            "step": 6,
            "action": "Navigate to the audit trail search interface",
            "expectedResult": "Audit trail search page loads with filter options visible (date range, user, quote ID)"
          },
          {
            "step": 7,
            "action": "Enter search filters: quote ID from step 2, user ID from step 4, and date range including the timestamp from step 4",
            "expectedResult": "Filters are applied successfully and search is initiated"
          },
          {
            "step": 8,
            "action": "Start timer and submit the search query",
            "expectedResult": "Search results are returned and displayed within 3 seconds"
          },
          {
            "step": 9,
            "action": "Verify the audit log entry contains: correct user ID, accurate timestamp, quote ID, and detailed change information",
            "expectedResult": "Audit log entry displays all required information accurately matching the edit made in step 3"
          },
          {
            "step": 10,
            "action": "Log out as Compliance Officer and log in as unauthorized user (without audit trail access)",
            "expectedResult": "Unauthorized user successfully logs in to their limited dashboard"
          },
          {
            "step": 11,
            "action": "Attempt to navigate to the audit trail interface or access audit logs directly via URL",
            "expectedResult": "Access denied message is displayed and user is prevented from viewing audit trail data"
          }
        ],
        "postconditions": [
          "Audit log entry exists in the database with complete information",
          "No unauthorized access to audit trail occurred",
          "All user sessions are properly logged out",
          "System state remains secure and compliant"
        ],
        "estimatedTime": "10 mins"
      },
      {
        "id": "tc-002",
        "title": "Verify audit report export functionality",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "Test environment is accessible and operational",
          "Compliance Officer user account exists with audit trail access and export permissions",
          "Multiple audit log entries exist in the system for testing filters",
          "System has PDF and CSV export functionality enabled",
          "User has appropriate browser settings to allow file downloads"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Log into the system as Compliance Officer",
            "expectedResult": "Compliance Officer successfully logs in and compliance dashboard is displayed"
          },
          {
            "step": 2,
            "action": "Navigate to the audit trail search interface",
            "expectedResult": "Audit trail search page loads with filter options and export buttons visible"
          },
          {
            "step": 3,
            "action": "Apply filters to generate a specific audit report (e.g., date range: last 7 days, specific user, or quote ID)",
            "expectedResult": "Filters are applied successfully"
          },
          {
            "step": 4,
            "action": "Click the search or generate report button",
            "expectedResult": "Audit report is generated and displayed on screen with matching records shown in a table format"
          },
          {
            "step": 5,
            "action": "Review the displayed report for accuracy: verify columns include user ID, timestamp, quote ID, action type, and change details",
            "expectedResult": "Report displays correctly with all required columns and data matches the applied filters"
          },
          {
            "step": 6,
            "action": "Count the number of records displayed in the report for later verification",
            "expectedResult": "Record count is noted for validation against exported files"
          },
          {
            "step": 7,
            "action": "Click the 'Export as PDF' button",
            "expectedResult": "PDF file download initiates automatically"
          },
          {
            "step": 8,
            "action": "Open the downloaded PDF file",
            "expectedResult": "PDF opens successfully and displays the audit report with proper formatting"
          },
          {
            "step": 9,
            "action": "Verify PDF content: check that all records from the displayed report are included, data is accurate, and formatting is readable",
            "expectedResult": "PDF contains correct data matching the on-screen report with the same record count and all information is clearly formatted"
          },
          {
            "step": 10,
            "action": "Return to the audit trail interface and click the 'Export as CSV' button",
            "expectedResult": "CSV file download initiates automatically"
          },
          {
            "step": 11,
            "action": "Open the downloaded CSV file in a spreadsheet application (e.g., Excel, Google Sheets)",
            "expectedResult": "CSV file opens successfully with data properly separated into columns"
          },
          {
            "step": 12,
            "action": "Verify CSV content: check that all records are included, data matches the displayed report, and all columns are present with correct headers",
            "expectedResult": "CSV contains correct data matching the on-screen report with the same record count, proper column headers, and all information is accurately represented"
          }
        ],
        "postconditions": [
          "PDF and CSV files are successfully downloaded and saved",
          "Exported files contain accurate and complete audit data",
          "No data corruption or loss occurred during export",
          "User session remains active and secure"
        ],
        "estimatedTime": "8 mins"
      }
    ]
  },
  {
    "storyId": "story-16",
    "storyTitle": "As System Administrator, I want to manage user permissions for quote editing and version access to ensure secure operations",
    "testCases": [
      {
        "id": "tc-003",
        "title": "Verify admin can assign and revoke quote editing permissions",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "Test environment is accessible and operational",
          "System Administrator account exists with full permission management rights",
          "Test user account exists without quote editing permissions",
          "At least one active quote exists in the system for testing access",
          "User roles and permissions database is operational",
          "Admin portal is accessible"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Log into the admin portal as System Administrator",
            "expectedResult": "System Administrator successfully logs in and admin dashboard is displayed"
          },
          {
            "step": 2,
            "action": "Navigate to the user management section",
            "expectedResult": "User management interface loads displaying list of users with their current permissions"
          },
          {
            "step": 3,
            "action": "Search for and select the test user account",
            "expectedResult": "Test user profile opens showing current permissions and roles"
          },
          {
            "step": 4,
            "action": "Verify that quote editing permission is currently not assigned to the test user",
            "expectedResult": "Quote editing permission checkbox or toggle is unchecked/disabled"
          },
          {
            "step": 5,
            "action": "Assign quote editing permission to the test user by checking the appropriate checkbox or enabling the toggle",
            "expectedResult": "Quote editing permission is selected and interface shows the pending change"
          },
          {
            "step": 6,
            "action": "Click the 'Save' or 'Apply Changes' button",
            "expectedResult": "Success message is displayed confirming permission change has been saved"
          },
          {
            "step": 7,
            "action": "Open a new browser window or incognito session and log in as the test user",
            "expectedResult": "Test user successfully logs in and dashboard is displayed"
          },
          {
            "step": 8,
            "action": "Navigate to an existing quote and attempt to edit it",
            "expectedResult": "Test user can access the quote and edit functionality is available immediately without requiring logout/login or system restart"
          },
          {
            "step": 9,
            "action": "Make a minor change to the quote and save it",
            "expectedResult": "Quote is successfully updated and saved, confirming editing access is active"
          },
          {
            "step": 10,
            "action": "Return to the admin portal session and navigate back to the test user's permissions",
            "expectedResult": "User management interface displays the test user with quote editing permission enabled"
          },
          {
            "step": 11,
            "action": "Revoke quote editing permission by unchecking the checkbox or disabling the toggle",
            "expectedResult": "Quote editing permission is deselected and interface shows the pending change"
          },
          {
            "step": 12,
            "action": "Click the 'Save' or 'Apply Changes' button",
            "expectedResult": "Success message is displayed confirming permission has been revoked"
          },
          {
            "step": 13,
            "action": "Return to the test user session (without logging out) and refresh the page or navigate to another quote",
            "expectedResult": "Page refreshes successfully"
          },
          {
            "step": 14,
            "action": "Attempt to edit a quote as the test user",
            "expectedResult": "Edit functionality is no longer available or access denied message is displayed, confirming permission revocation took effect immediately"
          }
        ],
        "postconditions": [
          "Test user no longer has quote editing permissions",
          "Permission changes are reflected in the database",
          "No system restart was required for changes to take effect",
          "All user sessions are properly maintained"
        ],
        "estimatedTime": "12 mins"
      },
      {
        "id": "tc-004",
        "title": "Ensure permission changes are logged",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "Test environment is accessible and operational",
          "System Administrator account exists with full permission management rights",
          "Test user account exists in the system",
          "Audit logging system is operational and enabled",
          "Admin has access to audit logs or permission change logs",
          "User roles and permissions database is operational"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Log into the admin portal as System Administrator",
            "expectedResult": "System Administrator successfully logs in and admin dashboard is displayed"
          },
          {
            "step": 2,
            "action": "Note the current timestamp and System Administrator user ID for later verification",
            "expectedResult": "Timestamp and admin user ID are recorded"
          },
          {
            "step": 3,
            "action": "Navigate to the user management section",
            "expectedResult": "User management interface loads displaying list of users"
          },
          {
            "step": 4,
            "action": "Search for and select the test user account",
            "expectedResult": "Test user profile opens showing current permissions"
          },
          {
            "step": 5,
            "action": "Change one or more permissions for the test user (e.g., assign quote editing permission, grant version history access, or enable audit trail viewing)",
            "expectedResult": "Permission changes are selected in the interface"
          },
          {
            "step": 6,
            "action": "Click the 'Save' or 'Apply Changes' button",
            "expectedResult": "Success message is displayed confirming permission changes have been saved"
          },
          {
            "step": 7,
            "action": "Navigate to the audit logs or permission change logs section in the admin portal",
            "expectedResult": "Audit logs interface loads with search and filter options"
          },
          {
            "step": 8,
            "action": "Search for permission change logs using filters: admin user ID from step 2, test user ID, and timestamp range including the time from step 2",
            "expectedResult": "Search executes and displays matching log entries"
          },
          {
            "step": 9,
            "action": "Locate the log entry corresponding to the permission change made in step 5",
            "expectedResult": "Log entry is found and displayed in the results"
          },
          {
            "step": 10,
            "action": "Verify the log entry contains: System Administrator user ID, accurate timestamp, test user ID, permission type changed, old permission value, and new permission value",
            "expectedResult": "Log entry displays all required information accurately: correct admin ID matches step 2, timestamp is within expected range, test user ID is correct, and permission change details are complete and accurate"
          },
          {
            "step": 11,
            "action": "Make an additional permission change to the same or different user",
            "expectedResult": "Second permission change is saved successfully"
          },
          {
            "step": 12,
            "action": "Refresh or re-search the audit logs",
            "expectedResult": "Updated audit logs are displayed including the new entry"
          },
          {
            "step": 13,
            "action": "Verify that the second permission change is also logged with complete information",
            "expectedResult": "Second log entry exists with admin ID, timestamp, affected user, and change details, confirming 100% of permission changes are being logged"
          }
        ],
        "postconditions": [
          "All permission changes are recorded in audit logs",
          "Audit log entries contain complete and accurate information",
          "Logs are accessible to authorized administrators",
          "System maintains data integrity and audit trail compliance"
        ],
        "estimatedTime": "10 mins"
      }
    ]
  },
  {
    "storyId": "story-18",
    "storyTitle": "As Compliance Officer, I want to receive alerts on suspicious quote edits to proactively manage risks",
    "testCases": [
      {
        "id": "tc-001",
        "title": "Validate alert generation for suspicious quote edits",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "User has valid credentials with quote editing permissions",
          "Compliance Officer account is active and configured to receive alerts",
          "Suspicious edit criteria are predefined in the system (e.g., discount > 50%, price reduction > $10,000)",
          "Alert dashboard is accessible and operational",
          "System monitoring and alerting services are running",
          "Test quote exists in the system with known baseline values"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Log in to the system with valid user credentials who has quote editing permissions",
            "expectedResult": "User is successfully authenticated and redirected to the main dashboard"
          },
          {
            "step": 2,
            "action": "Navigate to the quote management section and select an existing test quote",
            "expectedResult": "Quote details page is displayed with current quote information"
          },
          {
            "step": 3,
            "action": "Click on the 'Edit Quote' button to modify the quote",
            "expectedResult": "Quote edit form is displayed with editable fields"
          },
          {
            "step": 4,
            "action": "Perform a quote edit that meets suspicious criteria (e.g., apply a 60% discount or reduce price by $15,000)",
            "expectedResult": "Quote edit is saved successfully and changes are reflected in the system"
          },
          {
            "step": 5,
            "action": "Wait for up to 1 minute and monitor the system for alert generation",
            "expectedResult": "System detects the suspicious edit and generates an alert within 1 minute"
          },
          {
            "step": 6,
            "action": "Verify that the Compliance Officer receives a notification (email, in-app notification, or SMS)",
            "expectedResult": "Compliance Officer receives alert notification within 1 minute containing quote ID, edit details, user who made the edit, and timestamp"
          },
          {
            "step": 7,
            "action": "Log out from the current user session and log in as a Compliance Officer",
            "expectedResult": "Compliance Officer is successfully authenticated and redirected to the compliance dashboard"
          },
          {
            "step": 8,
            "action": "Access the alert dashboard from the main navigation menu",
            "expectedResult": "Alert dashboard is displayed showing all recent alerts"
          },
          {
            "step": 9,
            "action": "Locate the alert generated in step 5 in the alert list",
            "expectedResult": "Alert is visible in the dashboard with relevant details including quote ID, edit type, suspicious criteria triggered, user who made the edit, timestamp, and alert severity level"
          },
          {
            "step": 10,
            "action": "Click on the alert to view full details",
            "expectedResult": "Detailed alert view is displayed showing complete information about the suspicious edit, including before/after values, edit justification (if provided), and action buttons for response"
          },
          {
            "step": 11,
            "action": "Verify that the alert is logged in the audit trail",
            "expectedResult": "Alert entry is present in the system audit logs with complete details and timestamp"
          }
        ],
        "postconditions": [
          "Alert is successfully generated and stored in the system",
          "Compliance Officer has been notified of the suspicious activity",
          "Alert is visible in the alert dashboard",
          "Alert is logged in the audit trail for future reference",
          "Quote remains in edited state pending compliance review"
        ],
        "estimatedTime": "8 mins"
      }
    ]
  },
  {
    "storyId": "story-20",
    "storyTitle": "As Quote Manager, I want to export quote versions and audit trails to CSV for offline analysis and reporting",
    "testCases": [
      {
        "id": "tc-001",
        "title": "Validate CSV export of quote versions",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "User has valid Quote Manager credentials with export permissions",
          "Test quote exists in the system with multiple versions (at least 5 versions)",
          "Version history page is accessible",
          "Export functionality is enabled for the user role",
          "Browser allows file downloads",
          "Microsoft Excel or compatible spreadsheet application is installed for verification"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Log in to the system with valid Quote Manager credentials",
            "expectedResult": "User is successfully authenticated and redirected to the main dashboard"
          },
          {
            "step": 2,
            "action": "Navigate to the quote management section and select a quote with multiple versions",
            "expectedResult": "Quote details page is displayed"
          },
          {
            "step": 3,
            "action": "Click on the 'Version History' tab or link",
            "expectedResult": "Version history page is displayed showing all versions of the selected quote in a list or table format"
          },
          {
            "step": 4,
            "action": "Apply filters to the version list (e.g., filter by date range, user, or version status)",
            "expectedResult": "Filtered version list is displayed showing only versions matching the filter criteria with accurate count"
          },
          {
            "step": 5,
            "action": "Locate and click the 'Export to CSV' button",
            "expectedResult": "Export process initiates and a progress indicator is displayed"
          },
          {
            "step": 6,
            "action": "Wait for the CSV file generation to complete",
            "expectedResult": "CSV file is generated within 10 seconds and automatically downloaded to the default download location with a meaningful filename (e.g., quote_versions_[quoteID]_[timestamp].csv)"
          },
          {
            "step": 7,
            "action": "Navigate to the download location and verify the CSV file exists",
            "expectedResult": "CSV file is present in the download folder with appropriate file size (not empty or corrupted)"
          },
          {
            "step": 8,
            "action": "Open the CSV file in Microsoft Excel or compatible spreadsheet application",
            "expectedResult": "File opens successfully without errors or warnings"
          },
          {
            "step": 9,
            "action": "Verify the CSV file structure and headers (e.g., Version Number, Created Date, Created By, Changes Made, Status)",
            "expectedResult": "All expected column headers are present and properly formatted"
          },
          {
            "step": 10,
            "action": "Verify the data completeness by comparing the number of rows in CSV with the filtered version list count",
            "expectedResult": "Row count matches the filtered version list count (excluding header row)"
          },
          {
            "step": 11,
            "action": "Verify data accuracy by spot-checking 3-5 version records against the system display",
            "expectedResult": "Data in CSV matches the data displayed in the version history page for all checked records"
          },
          {
            "step": 12,
            "action": "Verify special characters, dates, and numerical values are correctly formatted",
            "expectedResult": "All data types are correctly formatted and readable without encoding issues"
          }
        ],
        "postconditions": [
          "CSV file is successfully downloaded and saved",
          "CSV file contains accurate and complete version data",
          "File is compatible with Excel and other spreadsheet applications",
          "Export action is logged in the audit trail",
          "No data corruption or loss occurred during export"
        ],
        "estimatedTime": "7 mins"
      },
      {
        "id": "tc-002",
        "title": "Validate CSV export of audit trail data",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "User has valid Quote Manager credentials with audit trail access and export permissions",
          "Test quotes exist in the system with audit trail records (at least 10 audit entries)",
          "Audit trail page is accessible",
          "Export functionality is enabled for the user role",
          "Browser allows file downloads",
          "Microsoft Excel or compatible spreadsheet application is installed for verification"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Log in to the system with valid Quote Manager credentials",
            "expectedResult": "User is successfully authenticated and redirected to the main dashboard"
          },
          {
            "step": 2,
            "action": "Navigate to the audit trail section from the main menu",
            "expectedResult": "Audit trail page is displayed showing all audit records"
          },
          {
            "step": 3,
            "action": "Apply filters to the audit trail (e.g., filter by quote ID, date range, user, or action type)",
            "expectedResult": "Filtered audit records are displayed showing only entries matching the filter criteria with accurate count"
          },
          {
            "step": 4,
            "action": "Verify the filtered results display relevant audit information (timestamp, user, action, quote ID, changes)",
            "expectedResult": "All filtered audit records are displayed with complete information in table format"
          },
          {
            "step": 5,
            "action": "Locate and click the 'Export to CSV' button",
            "expectedResult": "Export process initiates and a progress indicator or confirmation message is displayed"
          },
          {
            "step": 6,
            "action": "Wait for the CSV file generation to complete",
            "expectedResult": "CSV file is generated within 10 seconds and automatically downloaded to the default download location with a meaningful filename (e.g., audit_trail_[timestamp].csv)"
          },
          {
            "step": 7,
            "action": "Navigate to the download location and verify the CSV file exists",
            "expectedResult": "CSV file is present in the download folder with appropriate file size indicating data content"
          },
          {
            "step": 8,
            "action": "Open the CSV file in Microsoft Excel or compatible spreadsheet application",
            "expectedResult": "File opens successfully without errors, warnings, or formatting issues"
          },
          {
            "step": 9,
            "action": "Verify the CSV file structure and headers (e.g., Timestamp, User, Action Type, Quote ID, Field Changed, Old Value, New Value, IP Address)",
            "expectedResult": "All expected column headers are present, properly labeled, and in logical order"
          },
          {
            "step": 10,
            "action": "Verify the data completeness by comparing the number of rows in CSV with the filtered audit trail count",
            "expectedResult": "Row count in CSV matches the filtered audit trail count displayed in the system (excluding header row)"
          },
          {
            "step": 11,
            "action": "Verify data accuracy by spot-checking 3-5 audit records against the system display",
            "expectedResult": "Audit data in CSV exactly matches the data displayed in the audit trail page for all checked records including timestamps, user names, and change details"
          },
          {
            "step": 12,
            "action": "Verify timestamp formatting is consistent and readable",
            "expectedResult": "All timestamps are in a consistent format (e.g., YYYY-MM-DD HH:MM:SS) and correctly represent the audit event times"
          },
          {
            "step": 13,
            "action": "Verify special characters, long text fields, and multi-line values are properly escaped and formatted",
            "expectedResult": "All data is correctly formatted with proper CSV escaping, no broken rows, and all content is readable"
          },
          {
            "step": 14,
            "action": "Test data manipulation in Excel (e.g., sorting, filtering, pivot tables)",
            "expectedResult": "CSV data can be sorted, filtered, and analyzed using standard Excel functions without errors"
          }
        ],
        "postconditions": [
          "CSV file is successfully downloaded and saved",
          "CSV file contains accurate and complete audit trail data",
          "File is compatible with Excel and other spreadsheet applications",
          "Export action is logged in the system audit trail",
          "No sensitive data is exposed beyond user's authorization level",
          "Original audit trail data remains unchanged in the system"
        ],
        "estimatedTime": "9 mins"
      }
    ]
  }
]