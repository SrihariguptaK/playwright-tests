{
  "storyId": "story-3",
  "storyTitle": "As Administrator, I want to perform schedule viewing to achieve better oversight.",
  "functional": [
    {
      "id": "TC-FUNC-001",
      "title": "Verify administrator can view employee schedules in calendar format with default settings",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in with Administrator role and valid session token",
        "Database contains at least 10 employee schedules for the current month",
        "User has 'view_schedules' permission enabled in the system",
        "Browser is Chrome/Firefox/Safari latest version"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to '/schedules' page by clicking 'Schedules' in the main navigation menu",
          "expectedResult": "Schedule viewing page loads successfully with calendar view displayed, showing current month by default"
        },
        {
          "step": 2,
          "action": "Observe the calendar layout and employee schedule entries",
          "expectedResult": "Calendar displays in grid format with days of the week as columns, employee names and shift times visible in respective date cells"
        },
        {
          "step": 3,
          "action": "Verify schedule data accuracy by comparing displayed shifts with database records",
          "expectedResult": "All employee schedules match database entries with correct employee names, shift types, and time slots"
        },
        {
          "step": 4,
          "action": "Check calendar navigation controls (previous/next month arrows)",
          "expectedResult": "Navigation arrows are visible and functional, allowing month-to-month browsing"
        }
      ],
      "postconditions": [
        "User remains on schedule viewing page with calendar displayed",
        "No data modifications occurred in EmployeeSchedules table",
        "Page load time logged in performance metrics",
        "User session remains active"
      ]
    },
    {
      "id": "TC-FUNC-002",
      "title": "Verify administrator can filter schedules by specific employee",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator with active session",
        "Schedule viewing page is loaded and displaying calendar view",
        "Database contains schedules for at least 5 different employees",
        "Employee 'John Smith' (ID: EMP-001) has 3 scheduled shifts in current month"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate the 'Filter by Employee' dropdown in the top-left filter panel",
          "expectedResult": "Dropdown is visible and displays placeholder text 'Select Employee'"
        },
        {
          "step": 2,
          "action": "Click on 'Filter by Employee' dropdown to expand options",
          "expectedResult": "Dropdown expands showing alphabetically sorted list of all employees with schedules"
        },
        {
          "step": 3,
          "action": "Select 'John Smith (EMP-001)' from the employee list",
          "expectedResult": "Dropdown closes with 'John Smith' displayed as selected value"
        },
        {
          "step": 4,
          "action": "Click 'Apply Filter' button next to the dropdown",
          "expectedResult": "Calendar refreshes and displays only schedules for John Smith, showing 3 shifts with correct dates and times"
        },
        {
          "step": 5,
          "action": "Verify filter indicator shows active filter status",
          "expectedResult": "Blue badge appears showing 'Filtered by: John Smith' with an 'X' clear button"
        }
      ],
      "postconditions": [
        "Calendar view shows only John Smith's schedules",
        "Filter state is maintained if user navigates between months",
        "GET request to /api/employee-schedules?employeeId=EMP-001 was executed successfully",
        "Other employees' schedules are hidden but not deleted from database"
      ]
    },
    {
      "id": "TC-FUNC-003",
      "title": "Verify administrator can filter schedules by shift type",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "Schedule viewing page is displayed with unfiltered calendar view",
        "Database contains schedules with at least 3 different shift types (Morning, Evening, Night)",
        "Current month has 15 Morning shifts, 10 Evening shifts, and 8 Night shifts"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate 'Filter by Shift Type' dropdown in the filter panel",
          "expectedResult": "Dropdown is visible with placeholder 'All Shift Types'"
        },
        {
          "step": 2,
          "action": "Click 'Filter by Shift Type' dropdown to view options",
          "expectedResult": "Dropdown displays options: 'Morning', 'Evening', 'Night', 'All Shift Types'"
        },
        {
          "step": 3,
          "action": "Select 'Morning' from the shift type options",
          "expectedResult": "'Morning' is selected and displayed in the dropdown"
        },
        {
          "step": 4,
          "action": "Click 'Apply Filter' button",
          "expectedResult": "Calendar refreshes showing only Morning shifts (15 total), with shift type badge displaying 'Morning' on each entry"
        },
        {
          "step": 5,
          "action": "Verify Evening and Night shifts are not displayed",
          "expectedResult": "Only Morning shifts are visible in the calendar, count matches expected 15 shifts"
        }
      ],
      "postconditions": [
        "Calendar displays only Morning shift schedules",
        "Filter badge shows 'Filtered by: Morning Shift'",
        "API call to /api/employee-schedules?shiftType=Morning completed successfully",
        "User can clear filter to return to all shifts view"
      ]
    },
    {
      "id": "TC-FUNC-004",
      "title": "Verify administrator can print schedules successfully",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "Schedule viewing page displays calendar with at least 20 schedule entries",
        "Browser print functionality is enabled",
        "User has applied filter to show specific employee or shift type"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate and click the 'Print Schedule' button in the top-right action panel",
          "expectedResult": "Browser print dialog opens immediately"
        },
        {
          "step": 2,
          "action": "Verify print preview shows formatted schedule with company header and date range",
          "expectedResult": "Print preview displays calendar in print-friendly format with header 'Employee Schedules - [Month Year]', no navigation elements, and optimized layout"
        },
        {
          "step": 3,
          "action": "Check that filtered schedules are reflected in print preview",
          "expectedResult": "Print preview shows only the filtered schedules matching current view, with filter criteria displayed in header"
        },
        {
          "step": 4,
          "action": "Select printer destination and click 'Print' button in dialog",
          "expectedResult": "Print job is sent to selected printer successfully, confirmation message 'Schedule sent to printer' appears"
        }
      ],
      "postconditions": [
        "Print job completed or queued in printer",
        "User returns to schedule viewing page with same filter applied",
        "Print action logged in system audit trail with timestamp and user ID",
        "No changes made to schedule data"
      ]
    },
    {
      "id": "TC-FUNC-005",
      "title": "Verify administrator can export schedules to CSV format",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator with export permissions",
        "Schedule viewing page is loaded with 25 employee schedules visible",
        "Browser download settings allow automatic file downloads",
        "User has applied filter for 'Evening' shift type showing 10 schedules"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Export' dropdown button in the top-right toolbar",
          "expectedResult": "Dropdown menu expands showing options 'Export as CSV' and 'Export as PDF'"
        },
        {
          "step": 2,
          "action": "Select 'Export as CSV' option from the dropdown",
          "expectedResult": "Export process initiates, loading spinner appears with text 'Preparing CSV export...'"
        },
        {
          "step": 3,
          "action": "Wait for download to complete and locate downloaded file in browser downloads",
          "expectedResult": "File named 'employee_schedules_[YYYY-MM-DD].csv' downloads successfully, success message 'CSV exported successfully' appears in green banner"
        },
        {
          "step": 4,
          "action": "Open downloaded CSV file in Excel or text editor",
          "expectedResult": "CSV file opens with headers: 'Employee ID, Employee Name, Shift Date, Shift Type, Start Time, End Time' and contains exactly 10 rows matching filtered Evening shifts"
        },
        {
          "step": 5,
          "action": "Verify data accuracy by comparing CSV entries with displayed calendar schedules",
          "expectedResult": "All data in CSV matches calendar display exactly, dates formatted as YYYY-MM-DD, times in HH:MM format"
        }
      ],
      "postconditions": [
        "CSV file saved to user's downloads folder with correct filename",
        "Export action logged in system with user ID, timestamp, and record count",
        "User remains on schedule viewing page with same filter active",
        "No modifications to EmployeeSchedules database table"
      ]
    },
    {
      "id": "TC-FUNC-006",
      "title": "Verify administrator can export schedules to PDF format",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "Schedule viewing page displays calendar with 30 schedule entries for current month",
        "No filters are applied (showing all employees and shift types)",
        "Browser supports PDF downloads"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Export' dropdown button in the toolbar",
          "expectedResult": "Dropdown menu displays with 'Export as CSV' and 'Export as PDF' options"
        },
        {
          "step": 2,
          "action": "Select 'Export as PDF' option",
          "expectedResult": "PDF generation process starts, progress indicator shows 'Generating PDF...'"
        },
        {
          "step": 3,
          "action": "Wait for PDF generation to complete",
          "expectedResult": "File 'employee_schedules_[YYYY-MM-DD].pdf' downloads automatically, success notification 'PDF exported successfully' displays"
        },
        {
          "step": 4,
          "action": "Open downloaded PDF file in PDF reader",
          "expectedResult": "PDF opens showing professionally formatted schedule with company logo, title 'Employee Schedules - [Month Year]', calendar grid layout with all 30 schedules"
        },
        {
          "step": 5,
          "action": "Verify PDF contains all schedule details and is properly formatted for printing",
          "expectedResult": "PDF shows employee names, shift dates, shift types, and times in readable format, page breaks are logical, footer shows page numbers"
        }
      ],
      "postconditions": [
        "PDF file saved to downloads folder with correct naming convention",
        "PDF export logged in audit trail with timestamp and user information",
        "User remains on schedule page with original view intact",
        "System performance remains stable after export operation"
      ]
    }
  ],
  "negative": [
    {
      "id": "TC-NEGA-001",
      "title": "Verify unauthorized user cannot access schedule viewing page",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in with 'Employee' role (non-administrator)",
        "User does NOT have 'view_schedules' permission in their role",
        "Schedule viewing page URL is '/schedules'",
        "Authorization middleware is active on the application"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Attempt to navigate directly to '/schedules' by typing URL in browser address bar",
          "expectedResult": "Access is denied, user is redirected to '/unauthorized' page or dashboard"
        },
        {
          "step": 2,
          "action": "Verify error message is displayed to user",
          "expectedResult": "Error message displays: 'Access Denied: You do not have permission to view schedules. Contact your administrator.' in red banner"
        },
        {
          "step": 3,
          "action": "Check that no schedule data is visible or accessible in browser network tab",
          "expectedResult": "No API calls to /api/employee-schedules are made, HTTP 403 Forbidden response logged if attempted"
        },
        {
          "step": 4,
          "action": "Verify 'Schedules' menu item is not visible in navigation for this user role",
          "expectedResult": "Navigation menu does not display 'Schedules' link for non-administrator users"
        }
      ],
      "postconditions": [
        "User remains on unauthorized page or is redirected to their dashboard",
        "Access attempt is logged in security audit log with user ID and timestamp",
        "No schedule data was exposed or transmitted to unauthorized user",
        "User session remains active but access denied"
      ]
    },
    {
      "id": "TC-NEGA-002",
      "title": "Verify system handles API failure when fetching schedules gracefully",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "User navigates to schedule viewing page",
        "Backend API endpoint /api/employee-schedules is temporarily unavailable or returns 500 error",
        "Network connection is active but server is experiencing issues"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Load schedule viewing page while API is returning 500 Internal Server Error",
          "expectedResult": "Page loads but calendar area shows loading spinner initially"
        },
        {
          "step": 2,
          "action": "Wait for API timeout (5 seconds)",
          "expectedResult": "Loading spinner is replaced with error message: 'Unable to load schedules. Please try again later.' with a 'Retry' button"
        },
        {
          "step": 3,
          "action": "Verify that no partial or corrupted schedule data is displayed",
          "expectedResult": "Calendar grid is empty or shows placeholder state, no incorrect data is rendered"
        },
        {
          "step": 4,
          "action": "Click 'Retry' button to attempt reloading schedules",
          "expectedResult": "System makes new API call to /api/employee-schedules, loading spinner appears again"
        },
        {
          "step": 5,
          "action": "Check browser console for error logging",
          "expectedResult": "Error is logged to console with details: 'API Error: Failed to fetch schedules - Status 500', no sensitive data exposed"
        }
      ],
      "postconditions": [
        "User sees clear error message with recovery option",
        "No application crash or white screen occurs",
        "Error is logged to application monitoring system with timestamp and error details",
        "User can navigate away from page or retry operation"
      ]
    },
    {
      "id": "TC-NEGA-003",
      "title": "Verify export fails gracefully when no schedules are available to export",
      "category": "Negative",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "Schedule viewing page is loaded",
        "User has applied filters that result in zero matching schedules",
        "Calendar displays 'No schedules found for selected criteria' message"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Export' dropdown button while no schedules are displayed",
          "expectedResult": "Dropdown menu opens showing 'Export as CSV' and 'Export as PDF' options"
        },
        {
          "step": 2,
          "action": "Select 'Export as CSV' option",
          "expectedResult": "Warning modal appears with message: 'No schedules to export. Please adjust your filters and try again.'"
        },
        {
          "step": 3,
          "action": "Verify no file download is initiated",
          "expectedResult": "No CSV file is downloaded, browser downloads folder remains unchanged"
        },
        {
          "step": 4,
          "action": "Click 'OK' on warning modal to dismiss",
          "expectedResult": "Modal closes, user returns to schedule viewing page with same filter state"
        },
        {
          "step": 5,
          "action": "Attempt PDF export with same empty result set",
          "expectedResult": "Same warning modal appears: 'No schedules to export. Please adjust your filters and try again.', no PDF generated"
        }
      ],
      "postconditions": [
        "No empty or invalid files are created or downloaded",
        "User receives clear feedback about why export failed",
        "User remains on schedule page with ability to adjust filters",
        "Export attempt is logged with 'no data' status"
      ]
    },
    {
      "id": "TC-NEGA-004",
      "title": "Verify system handles expired session during schedule viewing",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator and viewing schedules",
        "User session timeout is set to 30 minutes",
        "User has been inactive for 31 minutes (session expired)",
        "Schedule viewing page is still open in browser"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Attempt to apply a filter by clicking 'Filter by Employee' dropdown after session expiration",
          "expectedResult": "Dropdown does not open, or opens but subsequent action fails"
        },
        {
          "step": 2,
          "action": "System detects expired session token on next API call",
          "expectedResult": "Modal appears with message: 'Your session has expired. Please log in again to continue.' with 'Login' button"
        },
        {
          "step": 3,
          "action": "Verify user cannot perform any actions (filter, export, print) without re-authentication",
          "expectedResult": "All action buttons are disabled or trigger the session expired modal"
        },
        {
          "step": 4,
          "action": "Click 'Login' button in the modal",
          "expectedResult": "User is redirected to login page with return URL set to /schedules"
        }
      ],
      "postconditions": [
        "User is logged out and redirected to login page",
        "Session token is invalidated in backend",
        "After re-login, user is returned to schedule viewing page",
        "No unauthorized access to schedule data occurred"
      ]
    },
    {
      "id": "TC-NEGA-005",
      "title": "Verify print functionality handles browser print cancellation correctly",
      "category": "Negative",
      "priority": "Low",
      "preconditions": [
        "User is logged in as Administrator",
        "Schedule viewing page displays calendar with schedules",
        "Browser print dialog can be cancelled by user",
        "Print button is visible and enabled"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Print Schedule' button to open print dialog",
          "expectedResult": "Browser print dialog opens with print preview"
        },
        {
          "step": 2,
          "action": "Click 'Cancel' button in the browser print dialog",
          "expectedResult": "Print dialog closes without printing"
        },
        {
          "step": 3,
          "action": "Verify user returns to schedule viewing page in normal state",
          "expectedResult": "Schedule page is displayed normally, all filters and data remain as before print attempt"
        },
        {
          "step": 4,
          "action": "Verify no error messages or warnings are displayed",
          "expectedResult": "No error notifications appear, page functions normally"
        },
        {
          "step": 5,
          "action": "Attempt to print again immediately after cancellation",
          "expectedResult": "Print dialog opens successfully again, functionality is not broken"
        }
      ],
      "postconditions": [
        "User remains on schedule viewing page with full functionality",
        "No print job was created or sent to printer",
        "Application state is unchanged from before print attempt",
        "Print button remains functional for subsequent attempts"
      ]
    }
  ],
  "edgeCases": [
    {
      "id": "TC-EDGE-001",
      "title": "Verify system handles viewing schedules with maximum data load (1000 schedules)",
      "category": "Edge Cases",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "Database contains exactly 1000 employee schedules across multiple months",
        "System performance requirement: page load under 3 seconds for 1000 records",
        "Browser has sufficient memory allocated"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to schedule viewing page with no filters applied",
          "expectedResult": "Page begins loading, progress indicator shows 'Loading schedules...'"
        },
        {
          "step": 2,
          "action": "Measure page load time from navigation to full calendar render",
          "expectedResult": "Page loads completely within 3 seconds, calendar displays with all 1000 schedules accessible through pagination or scrolling"
        },
        {
          "step": 3,
          "action": "Scroll through calendar months to verify all schedules are accessible",
          "expectedResult": "Calendar navigation is smooth, no lag or freezing, all months with schedules are accessible"
        },
        {
          "step": 4,
          "action": "Apply filter to reduce visible schedules and verify performance",
          "expectedResult": "Filter applies within 1 second, filtered results display correctly"
        },
        {
          "step": 5,
          "action": "Attempt to export all 1000 schedules to CSV",
          "expectedResult": "Export completes successfully within 10 seconds, CSV file contains all 1000 records with correct data"
        }
      ],
      "postconditions": [
        "System performance remains within acceptable limits",
        "No browser crashes or memory errors occurred",
        "All 1000 schedules remain accessible and accurate",
        "Performance metrics logged for analysis"
      ]
    },
    {
      "id": "TC-EDGE-002",
      "title": "Verify system handles viewing schedules when database returns empty result set",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "Database EmployeeSchedules table exists but contains zero records",
        "User navigates to schedule viewing page",
        "API endpoint /api/employee-schedules returns empty array []"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Load schedule viewing page with empty database",
          "expectedResult": "Page loads successfully without errors"
        },
        {
          "step": 2,
          "action": "Observe calendar display area",
          "expectedResult": "Calendar grid is displayed with empty state message: 'No schedules found. Create schedules to see them here.' with appropriate icon"
        },
        {
          "step": 3,
          "action": "Verify filter dropdowns are disabled or show 'No data available'",
          "expectedResult": "Filter dropdowns are either disabled with tooltip 'No schedules to filter' or show empty state"
        },
        {
          "step": 4,
          "action": "Attempt to click 'Export' button",
          "expectedResult": "Export button is disabled or shows warning 'No schedules to export' when clicked"
        },
        {
          "step": 5,
          "action": "Verify print button behavior with no data",
          "expectedResult": "Print button is disabled or opens print dialog showing empty state message"
        }
      ],
      "postconditions": [
        "No JavaScript errors in console",
        "Page remains functional and responsive",
        "User receives clear guidance about empty state",
        "System ready to display schedules when data is added"
      ]
    },
    {
      "id": "TC-EDGE-003",
      "title": "Verify schedule viewing with employee names containing special characters and Unicode",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "Database contains employees with names: 'José María O'Brien', '李明 (Li Ming)', 'Müller-Schmidt', 'Владимир Петров'",
        "Each employee has at least 2 scheduled shifts",
        "Browser supports UTF-8 character encoding"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to schedule viewing page",
          "expectedResult": "Page loads and displays all employee names with special characters rendered correctly in calendar"
        },
        {
          "step": 2,
          "action": "Open 'Filter by Employee' dropdown",
          "expectedResult": "Dropdown displays all employee names with special characters properly rendered: 'José María O'Brien', '李明 (Li Ming)', 'Müller-Schmidt', 'Владимир Петров'"
        },
        {
          "step": 3,
          "action": "Select employee '李明 (Li Ming)' from filter dropdown",
          "expectedResult": "Filter applies successfully, calendar shows only schedules for 李明 (Li Ming), name displayed correctly in filter badge"
        },
        {
          "step": 4,
          "action": "Export filtered schedules to CSV",
          "expectedResult": "CSV file downloads with employee name '李明 (Li Ming)' correctly encoded in UTF-8, opens properly in Excel"
        },
        {
          "step": 5,
          "action": "Export to PDF and verify special character rendering",
          "expectedResult": "PDF displays all special characters correctly without garbled text or encoding issues"
        }
      ],
      "postconditions": [
        "All special characters and Unicode names display correctly across all formats",
        "No character encoding errors in exports",
        "Filter functionality works correctly with special characters",
        "Data integrity maintained for international character sets"
      ]
    },
    {
      "id": "TC-EDGE-004",
      "title": "Verify simultaneous schedule viewing by multiple administrators",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "Three administrator users are logged in simultaneously from different browsers/devices",
        "All three users navigate to schedule viewing page at the same time",
        "Database contains 100 employee schedules",
        "System supports concurrent user sessions"
      ],
      "steps": [
        {
          "step": 1,
          "action": "All three administrators load schedule viewing page simultaneously",
          "expectedResult": "All three users successfully load the page within acceptable time (under 5 seconds each)"
        },
        {
          "step": 2,
          "action": "Each administrator applies different filters (Admin1: Employee filter, Admin2: Shift type filter, Admin3: No filter)",
          "expectedResult": "Each user sees their own filtered view correctly, no cross-contamination of filter states"
        },
        {
          "step": 3,
          "action": "All three administrators initiate CSV export simultaneously",
          "expectedResult": "All three export requests are processed successfully, each receives correct CSV file based on their filter settings"
        },
        {
          "step": 4,
          "action": "Verify server performance and response times during concurrent access",
          "expectedResult": "Server handles concurrent requests without degradation, all API calls complete within normal timeframes"
        }
      ],
      "postconditions": [
        "All three administrators have independent, correct views of schedules",
        "No data corruption or session conflicts occurred",
        "Server performance remained within acceptable parameters",
        "Each user's session and filter state remained isolated"
      ]
    },
    {
      "id": "TC-EDGE-005",
      "title": "Verify schedule viewing across different time zones and daylight saving transitions",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "Database contains schedules spanning daylight saving time transition date (e.g., March 10, 2024)",
        "Schedules include shifts at 2:00 AM on DST transition day",
        "User's browser timezone is set to a region observing DST (e.g., America/New_York)"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to schedule viewing page and view schedules for DST transition week",
          "expectedResult": "Calendar loads showing schedules for the week including DST transition"
        },
        {
          "step": 2,
          "action": "Verify shift times are displayed correctly for the day before DST transition",
          "expectedResult": "Shift times display in standard time format (e.g., 2:00 AM EST) with correct timezone indicator"
        },
        {
          "step": 3,
          "action": "Verify shift times for the day after DST transition",
          "expectedResult": "Shift times display in daylight time format (e.g., 2:00 AM EDT), accounting for 1-hour shift"
        },
        {
          "step": 4,
          "action": "Export schedules spanning DST transition to CSV",
          "expectedResult": "CSV file contains correct timestamps with timezone information, no duplicate or missing hours"
        },
        {
          "step": 5,
          "action": "Change browser timezone to different region (e.g., Europe/London) and reload page",
          "expectedResult": "Schedule times are converted and displayed correctly in new timezone, maintaining accuracy"
        }
      ],
      "postconditions": [
        "All schedule times are accurate across timezone changes",
        "No schedules are lost or duplicated during DST transition",
        "Timezone handling is consistent across viewing and export functions",
        "User sees appropriate timezone indicators on all time displays"
      ]
    }
  ],
  "accessibility": [
    {
      "id": "TC-ACCE-001",
      "title": "Verify complete keyboard navigation through schedule viewing interface",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "Schedule viewing page is loaded with calendar displaying 20 schedules",
        "Screen reader is turned off for this test (keyboard only)",
        "Browser is Chrome or Firefox with keyboard navigation enabled"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Press Tab key from page load to navigate through interactive elements",
          "expectedResult": "Focus moves sequentially through: 'Filter by Employee' dropdown, 'Filter by Shift Type' dropdown, 'Apply Filter' button, calendar navigation arrows, schedule entries, 'Print' button, 'Export' dropdown"
        },
        {
          "step": 2,
          "action": "Press Shift+Tab to navigate backwards through elements",
          "expectedResult": "Focus moves in reverse order through all interactive elements, no focus traps encountered"
        },
        {
          "step": 3,
          "action": "Navigate to 'Filter by Employee' dropdown and press Enter or Space to open",
          "expectedResult": "Dropdown opens, focus moves to first employee option in list"
        },
        {
          "step": 4,
          "action": "Use Arrow Down/Up keys to navigate through employee options",
          "expectedResult": "Focus moves through employee list, each option is highlighted as focus moves, current selection is announced"
        },
        {
          "step": 5,
          "action": "Press Enter to select an employee, then Tab to 'Apply Filter' button and press Enter",
          "expectedResult": "Employee is selected, dropdown closes, focus moves to 'Apply Filter' button, pressing Enter applies filter successfully"
        },
        {
          "step": 6,
          "action": "Navigate to 'Export' dropdown using Tab, press Enter to open, use Arrow keys to select 'Export as CSV', press Enter",
          "expectedResult": "Export dropdown opens, options are navigable with arrows, CSV export initiates on Enter press"
        },
        {
          "step": 7,
          "action": "Press Escape key while dropdown is open",
          "expectedResult": "Dropdown closes, focus returns to 'Export' button"
        }
      ],
      "postconditions": [
        "All interactive elements are keyboard accessible",
        "No keyboard traps prevent navigation",
        "Focus order is logical and follows visual layout",
        "All functionality available via mouse is also available via keyboard"
      ]
    },
    {
      "id": "TC-ACCE-002",
      "title": "Verify screen reader compatibility and ARIA announcements for schedule viewing",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "NVDA or JAWS screen reader is active and running",
        "Schedule viewing page is loaded with 15 employee schedules",
        "Browser is configured to work with screen reader"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to schedule viewing page and listen to screen reader announcement on page load",
          "expectedResult": "Screen reader announces: 'Employee Schedule Viewing, main region. Calendar view showing [Month Year]. 15 schedules displayed.'"
        },
        {
          "step": 2,
          "action": "Tab to 'Filter by Employee' dropdown and listen to announcement",
          "expectedResult": "Screen reader announces: 'Filter by Employee, combo box, collapsed. Select an employee to filter schedules.'"
        },
        {
          "step": 3,
          "action": "Open dropdown and navigate through employee options",
          "expectedResult": "Screen reader announces each employee name as focus moves: 'John Smith, 1 of 10', 'Jane Doe, 2 of 10', etc."
        },
        {
          "step": 4,
          "action": "Select an employee and apply filter, listen for filter confirmation",
          "expectedResult": "Screen reader announces: 'Filter applied. Showing 3 schedules for John Smith. Calendar updated.' via ARIA live region"
        },
        {
          "step": 5,
          "action": "Navigate to a schedule entry in the calendar",
          "expectedResult": "Screen reader announces: 'Schedule entry. Employee: John Smith. Date: Monday, March 15, 2024. Shift: Morning, 8:00 AM to 4:00 PM.'"
        },
        {
          "step": 6,
          "action": "Navigate to 'Export' button and activate CSV export",
          "expectedResult": "Screen reader announces: 'Export, button, has popup menu' then 'Export as CSV selected. Preparing export...' then 'CSV file downloaded successfully' via live region"
        },
        {
          "step": 7,
          "action": "Use screen reader's heading navigation (H key in NVDA) to navigate page structure",
          "expectedResult": "Screen reader navigates through logical heading structure: H1 'Employee Schedules', H2 'Filters', H2 'Calendar View', H2 'Actions'"
        }
      ],
      "postconditions": [
        "All page elements have appropriate ARIA labels and roles",
        "Dynamic content changes are announced via ARIA live regions",
        "Screen reader users can understand and navigate all functionality",
        "Semantic HTML structure supports screen reader navigation"
      ]
    },
    {
      "id": "TC-ACCE-003",
      "title": "Verify focus management and visible focus indicators throughout schedule interface",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "Schedule viewing page is loaded",
        "Browser default focus styles are not overridden or custom focus styles meet WCAG requirements",
        "Page contains filters, calendar, and action buttons"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Tab through all interactive elements and observe focus indicators",
          "expectedResult": "Each focused element displays clear, visible focus indicator with minimum 3:1 contrast ratio against background (blue outline or custom style)"
        },
        {
          "step": 2,
          "action": "Open 'Filter by Employee' dropdown and observe focus on dropdown options",
          "expectedResult": "Focused option in dropdown has distinct visual indicator (background color change or outline), clearly distinguishable from unfocused options"
        },
        {
          "step": 3,
          "action": "Apply a filter and verify focus management after filter application",
          "expectedResult": "After filter applies, focus moves to first schedule entry in filtered results or remains on 'Apply Filter' button with clear indication"
        },
        {
          "step": 4,
          "action": "Open 'Export' dropdown, select CSV export, and observe focus after export completes",
          "expectedResult": "After export completes, focus returns to 'Export' button, success message appears without stealing focus"
        },
        {
          "step": 5,
          "action": "Navigate to calendar month navigation arrows and verify focus indicators",
          "expectedResult": "Previous/Next month arrows show clear focus indicators when tabbed to, arrow keys can also navigate months"
        },
        {
          "step": 6,
          "action": "Test focus visibility at 200% browser zoom",
          "expectedResult": "Focus indicators remain visible and clear at 200% zoom level, no clipping or overlap occurs"
        }
      ],
      "postconditions": [
        "All interactive elements have visible focus indicators meeting WCAG 2.1 Level AA",
        "Focus is never lost or trapped during interactions",
        "Focus management is logical and predictable",
        "Focus indicators are visible at various zoom levels"
      ]
    },
    {
      "id": "TC-ACCE-004",
      "title": "Verify color contrast and visual accessibility of schedule viewing interface",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "Schedule viewing page is fully loaded with schedules displayed",
        "Color contrast analyzer tool is available (e.g., browser extension or WAVE tool)",
        "Page displays various shift types with color coding"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Use color contrast analyzer to check text contrast ratios for all text elements",
          "expectedResult": "All body text has minimum 4.5:1 contrast ratio, large text (18pt+) has minimum 3:1 ratio against backgrounds"
        },
        {
          "step": 2,
          "action": "Verify shift type indicators do not rely solely on color to convey information",
          "expectedResult": "Each shift type has both color coding AND text label or icon (e.g., 'Morning' with sun icon, 'Night' with moon icon)"
        },
        {
          "step": 3,
          "action": "Check contrast of interactive elements (buttons, dropdowns) in default state",
          "expectedResult": "All buttons and form controls have minimum 3:1 contrast ratio for borders/backgrounds against surrounding colors"
        },
        {
          "step": 4,
          "action": "Verify contrast of focus indicators on all interactive elements",
          "expectedResult": "Focus indicators have minimum 3:1 contrast ratio against both the focused element and adjacent colors"
        },
        {
          "step": 5,
          "action": "Test interface with browser high contrast mode enabled (Windows High Contrast)",
          "expectedResult": "All content remains visible and functional in high contrast mode, custom colors are overridden appropriately"
        },
        {
          "step": 6,
          "action": "Verify error messages and success notifications have sufficient contrast",
          "expectedResult": "Error messages (red) and success messages (green) have text with 4.5:1 contrast, include icons not just color"
        }
      ],
      "postconditions": [
        "All text meets WCAG 2.1 Level AA contrast requirements (4.5:1 for normal text, 3:1 for large text)",
        "Information is not conveyed by color alone",
        "Interface is usable in high contrast mode",
        "Users with color blindness can distinguish all elements"
      ]
    },
    {
      "id": "TC-ACCE-005",
      "title": "Verify schedule viewing interface works correctly at 200% zoom and with text resizing",
      "category": "Accessibility",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "Schedule viewing page is loaded at default 100% zoom",
        "Browser supports zoom functionality (Chrome, Firefox, Safari)",
        "Page contains full calendar with filters and action buttons"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Increase browser zoom to 200% using Ctrl/Cmd + Plus key",
          "expectedResult": "Page content scales proportionally, all elements remain visible without horizontal scrolling (or minimal horizontal scroll)"
        },
        {
          "step": 2,
          "action": "Verify calendar layout at 200% zoom",
          "expectedResult": "Calendar grid adapts responsively, schedule entries are readable, no text truncation or overlap occurs"
        },
        {
          "step": 3,
          "action": "Test all interactive elements (filters, buttons) at 200% zoom",
          "expectedResult": "All buttons and dropdowns remain clickable and functional, touch targets are at least 44x44 pixels, no elements are cut off"
        },
        {
          "step": 4,
          "action": "Navigate through page using keyboard at 200% zoom",
          "expectedResult": "Keyboard navigation works correctly, focused elements scroll into view automatically, no navigation issues"
        },
        {
          "step": 5,
          "action": "Reset zoom to 100%, then increase only text size to 200% using browser text-only zoom",
          "expectedResult": "Text scales to 200% while layout adjusts, no text overlap or clipping, containers expand to accommodate larger text"
        },
        {
          "step": 6,
          "action": "Test filter and export functionality at 200% text size",
          "expectedResult": "All functionality remains operational, dropdowns and modals accommodate larger text without breaking layout"
        }
      ],
      "postconditions": [
        "Interface is fully functional at 200% zoom level (WCAG 2.1 Level AA requirement)",
        "No loss of content or functionality occurs at increased zoom",
        "Text remains readable without horizontal scrolling at 200% text size",
        "Layout adapts responsively to accommodate zoom and text resizing"
      ]
    }
  ],
  "selectedTypes": {
    "functional": true,
    "negative": true,
    "edgeCases": true,
    "accessibility": true
  },
  "userStoryObject": {
    "id": "story-3",
    "title": "As Administrator, I want to perform schedule viewing to achieve better oversight.",
    "epicId": "epic-1",
    "persona": "Administrator",
    "priority": "Medium",
    "subtasks": [
      {
        "category": "Planning",
        "description": "Define the data model for schedule viewing.",
        "estimatedHours": 4
      },
      {
        "category": "Backend",
        "description": "Implement API endpoint for fetching employee schedules.",
        "estimatedHours": 6
      },
      {
        "category": "Frontend",
        "description": "Develop the user interface for schedule viewing.",
        "estimatedHours": 8
      },
      {
        "category": "Testing",
        "description": "Create unit tests for the schedule viewing functionality.",
        "estimatedHours": 4
      },
      {
        "category": "Documentation",
        "description": "Document the API endpoint and usage for schedule viewing.",
        "estimatedHours": 3
      }
    ],
    "featureId": "feature-2",
    "testCases": [
      {
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the schedule viewing page",
            "result": "Schedule interface is displayed"
          },
          {
            "step": 2,
            "action": "Select filters for viewing schedules",
            "result": "Filtered schedules are displayed"
          },
          {
            "step": 3,
            "action": "Print the schedule",
            "result": "Schedule is printed successfully"
          }
        ],
        "title": "Validate successful schedule viewing"
      },
      {
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the schedule viewing page",
            "result": "Schedule interface is displayed"
          },
          {
            "step": 2,
            "action": "Select export option for CSV",
            "result": "Export process is initiated"
          },
          {
            "step": 3,
            "action": "Check downloaded file",
            "result": "CSV file contains the correct schedule data"
          }
        ],
        "title": "Ensure export functionality works correctly"
      }
    ],
    "description": "CONTEXT & BACKGROUND:\nViewing schedules in a clear format is essential for administrators to monitor staffing levels and make adjustments as necessary. This story focuses on providing a user-friendly interface for viewing employee schedules.\n\nCURRENT STATE:\nCurrently, schedules are difficult to view and manage, leading to potential oversights.\n\nDESIRED STATE:\nAdministrators can easily view schedules in a calendar format, allowing for better oversight.\n\nKEY FUNCTIONALITY:\n• View employee schedules in a calendar format.\n• Filter schedules by employee or shift type.\n• Print schedules for offline use.\n• Export schedules to various formats (CSV, PDF).\n\nUSER INTERACTION FLOW:\n1. Administrator navigates to the schedule viewing page.\n2. Administrator selects filters for viewing schedules.\n3. System displays the filtered schedule.\n4. Administrator can print or export the schedule.\n5. System confirms the action.\n\nTECHNICAL CONSIDERATIONS:\n• Data source: EmployeeSchedules table in the database.\n• API endpoints: GET /api/employee-schedules for fetching schedules.\n• Security: Only authorized administrators can view schedules.\n• Performance: System should handle up to 1000 schedule views without performance degradation.\n\nOUT OF SCOPE:\n• Editing schedules is not included in this story.\n\nSUCCESS METRICS:\n• 90% of administrators report improved visibility of schedules.",
    "storyPoints": 5,
    "personaSource": "AI Suggested",
    "acceptanceCriteria": [
      "System displays employee schedules in a calendar format.",
      "Administrators can filter schedules by employee or shift type.",
      "System allows printing of schedules.",
      "System supports exporting schedules to CSV and PDF formats."
    ]
  }
}