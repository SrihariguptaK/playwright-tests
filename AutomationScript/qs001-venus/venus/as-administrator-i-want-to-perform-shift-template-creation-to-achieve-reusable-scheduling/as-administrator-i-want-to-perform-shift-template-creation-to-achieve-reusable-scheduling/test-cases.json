{
  "storyId": "db-story-story-1",
  "storyTitle": "As Administrator, I want to perform shift template creation to achieve reusable scheduling.",
  "functional": [
    {
      "id": "TC-FUNC-001",
      "title": "Successfully create a new shift template with valid start time, end time, and break times",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator with template creation permissions",
        "User is on the shift template management page at /admin/shift-templates",
        "Database has fewer than 100 existing templates",
        "System is connected to the ShiftTemplates database table"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click the 'Create New Template' button in the top-right corner of the page",
          "expectedResult": "Shift template creation form modal opens with empty fields for Template Name, Start Time, End Time, and Break Times"
        },
        {
          "step": 2,
          "action": "Enter 'Morning Shift' in the Template Name field",
          "expectedResult": "Text 'Morning Shift' appears in the Template Name input field"
        },
        {
          "step": 3,
          "action": "Select '08:00 AM' from the Start Time dropdown picker",
          "expectedResult": "Start Time field displays '08:00 AM'"
        },
        {
          "step": 4,
          "action": "Select '05:00 PM' from the End Time dropdown picker",
          "expectedResult": "End Time field displays '05:00 PM' and no validation error appears"
        },
        {
          "step": 5,
          "action": "Click 'Add Break' button and enter break time from '12:00 PM' to '01:00 PM'",
          "expectedResult": "Break time entry appears showing '12:00 PM - 01:00 PM' with a delete icon"
        },
        {
          "step": 6,
          "action": "Click the 'Save Template' button at the bottom of the form",
          "expectedResult": "Green success banner appears at top of page with message 'Template created successfully' and modal closes"
        },
        {
          "step": 7,
          "action": "Verify the templates list on the main page",
          "expectedResult": "'Morning Shift' template appears in the list with Start Time '08:00 AM', End Time '05:00 PM', and Break '12:00 PM - 01:00 PM'"
        }
      ],
      "postconditions": [
        "New shift template 'Morning Shift' is saved in the ShiftTemplates database table",
        "Template appears in the list of all templates on the management page",
        "Administrator remains logged in and on the shift template management page",
        "Template is available for selection in scheduling workflows"
      ]
    },
    {
      "id": "TC-FUNC-002",
      "title": "Successfully create a shift template with multiple break periods",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "No template with the name 'Extended Shift' exists"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter 'Extended Shift' as Template Name, '06:00 AM' as Start Time, '10:00 PM' as End Time",
          "expectedResult": "All fields populate correctly with entered values"
        },
        {
          "step": 3,
          "action": "Click 'Add Break' and add first break from '10:00 AM' to '10:15 AM'",
          "expectedResult": "First break appears in the breaks list"
        },
        {
          "step": 4,
          "action": "Click 'Add Break' again and add second break from '02:00 PM' to '02:30 PM'",
          "expectedResult": "Second break appears below the first break in the list"
        },
        {
          "step": 5,
          "action": "Click 'Add Break' again and add third break from '06:00 PM' to '06:15 PM'",
          "expectedResult": "Third break appears in the list, all three breaks are visible"
        },
        {
          "step": 6,
          "action": "Click 'Save Template' button",
          "expectedResult": "Success message 'Template created successfully' appears and form closes"
        }
      ],
      "postconditions": [
        "Template 'Extended Shift' is saved with three separate break periods",
        "All break times are stored correctly in the database",
        "Template appears in the list showing all three breaks"
      ]
    },
    {
      "id": "TC-FUNC-003",
      "title": "Successfully edit an existing shift template and save changes",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "At least one shift template named 'Evening Shift' exists with Start Time '02:00 PM' and End Time '10:00 PM'",
        "User is on the shift template management page"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate 'Evening Shift' template in the list and click the 'Edit' icon button",
          "expectedResult": "Edit template form opens pre-populated with existing values: Name 'Evening Shift', Start '02:00 PM', End '10:00 PM'"
        },
        {
          "step": 2,
          "action": "Change End Time from '10:00 PM' to '11:00 PM'",
          "expectedResult": "End Time field updates to show '11:00 PM'"
        },
        {
          "step": 3,
          "action": "Add a new break from '06:00 PM' to '06:30 PM'",
          "expectedResult": "Break entry appears in the breaks section"
        },
        {
          "step": 4,
          "action": "Click 'Save Changes' button",
          "expectedResult": "Success message 'Template updated successfully' appears in green banner"
        },
        {
          "step": 5,
          "action": "Verify the updated template in the list",
          "expectedResult": "'Evening Shift' now shows End Time as '11:00 PM' and includes the new break period"
        }
      ],
      "postconditions": [
        "Template changes are persisted in the ShiftTemplates database",
        "Updated template reflects new End Time and break period",
        "Template edit history is logged in the system audit trail"
      ]
    },
    {
      "id": "TC-FUNC-004",
      "title": "Successfully delete an existing shift template",
      "category": "Functional",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as an Administrator",
        "A shift template named 'Temporary Shift' exists in the system",
        "Template is not currently assigned to any active schedules",
        "User is on the shift template management page"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate 'Temporary Shift' template in the list and click the 'Delete' icon button",
          "expectedResult": "Confirmation dialog appears with message 'Are you sure you want to delete this template? This action cannot be undone.'"
        },
        {
          "step": 2,
          "action": "Click 'Confirm' button in the confirmation dialog",
          "expectedResult": "Dialog closes and success message 'Template deleted successfully' appears in green banner"
        },
        {
          "step": 3,
          "action": "Verify the templates list",
          "expectedResult": "'Temporary Shift' template no longer appears in the list"
        },
        {
          "step": 4,
          "action": "Refresh the page",
          "expectedResult": "Template list reloads and 'Temporary Shift' is still not present, confirming deletion"
        }
      ],
      "postconditions": [
        "Template 'Temporary Shift' is removed from the ShiftTemplates database",
        "Template is no longer available for scheduling",
        "Deletion action is logged in the system audit trail with timestamp and administrator ID"
      ]
    },
    {
      "id": "TC-FUNC-005",
      "title": "Successfully view list of all created shift templates with complete details",
      "category": "Functional",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as an Administrator",
        "At least 5 different shift templates exist in the system",
        "User navigates to the shift template management page"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Observe the main shift template management page",
          "expectedResult": "Page displays a table/list with columns: Template Name, Start Time, End Time, Break Times, Actions (Edit/Delete)"
        },
        {
          "step": 2,
          "action": "Verify all templates are displayed in the list",
          "expectedResult": "All 5+ templates appear with their respective details clearly visible"
        },
        {
          "step": 3,
          "action": "Check that each template shows complete information",
          "expectedResult": "Each row displays template name, formatted start time, formatted end time, and break periods (if any)"
        },
        {
          "step": 4,
          "action": "Verify action buttons are present for each template",
          "expectedResult": "Each template row has visible 'Edit' and 'Delete' action buttons/icons"
        }
      ],
      "postconditions": [
        "All templates remain unchanged in the database",
        "User remains on the template management page",
        "Page is ready for further template management actions"
      ]
    },
    {
      "id": "TC-FUNC-006",
      "title": "Successfully create shift template without break times",
      "category": "Functional",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "System allows templates without breaks"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter 'Short Shift' as Template Name",
          "expectedResult": "Template Name field shows 'Short Shift'"
        },
        {
          "step": 3,
          "action": "Select '09:00 AM' as Start Time and '01:00 PM' as End Time",
          "expectedResult": "Both time fields populate correctly"
        },
        {
          "step": 4,
          "action": "Do not add any break times, leave breaks section empty",
          "expectedResult": "Breaks section remains empty with no validation errors"
        },
        {
          "step": 5,
          "action": "Click 'Save Template' button",
          "expectedResult": "Success message appears: 'Template created successfully'"
        },
        {
          "step": 6,
          "action": "Verify template in the list",
          "expectedResult": "'Short Shift' appears with Start '09:00 AM', End '01:00 PM', and Break Times column shows 'None' or is empty"
        }
      ],
      "postconditions": [
        "Template is saved without break times in the database",
        "Template is available for use in scheduling",
        "No validation errors are present"
      ]
    },
    {
      "id": "TC-FUNC-007",
      "title": "Verify API endpoint POST /api/shift-templates successfully creates template",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User has valid Administrator authentication token",
        "API endpoint POST /api/shift-templates is accessible",
        "Database connection is active",
        "Request includes valid authorization headers"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Send POST request to /api/shift-templates with JSON body: {\"name\": \"API Test Shift\", \"startTime\": \"07:00\", \"endTime\": \"15:00\", \"breaks\": [{\"start\": \"11:00\", \"end\": \"11:30\"}]}",
          "expectedResult": "API returns HTTP 201 Created status code"
        },
        {
          "step": 2,
          "action": "Verify response body contains created template data",
          "expectedResult": "Response includes template ID, name 'API Test Shift', startTime '07:00', endTime '15:00', and breaks array"
        },
        {
          "step": 3,
          "action": "Query the database ShiftTemplates table for the new template ID",
          "expectedResult": "Template record exists in database with all correct field values"
        },
        {
          "step": 4,
          "action": "Navigate to shift template management page in UI",
          "expectedResult": "'API Test Shift' appears in the templates list"
        }
      ],
      "postconditions": [
        "Template is persisted in ShiftTemplates database table",
        "Template is visible in the UI",
        "API response matches database record",
        "Template can be edited and deleted through UI"
      ]
    }
  ],
  "negative": [
    {
      "id": "TC-NEGA-001",
      "title": "Attempt to create shift template with end time before start time",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "Template creation form is open"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter 'Invalid Shift' as Template Name",
          "expectedResult": "Template Name field populates"
        },
        {
          "step": 3,
          "action": "Select '05:00 PM' as Start Time",
          "expectedResult": "Start Time shows '05:00 PM'"
        },
        {
          "step": 4,
          "action": "Select '09:00 AM' as End Time (before start time)",
          "expectedResult": "End Time field shows '09:00 AM'"
        },
        {
          "step": 5,
          "action": "Click 'Save Template' button",
          "expectedResult": "Red error message appears: 'End time must be after start time' and template is not saved"
        },
        {
          "step": 6,
          "action": "Verify template list",
          "expectedResult": "'Invalid Shift' does not appear in the templates list"
        }
      ],
      "postconditions": [
        "No template is created in the database",
        "Form remains open with entered data",
        "Error message is displayed to guide user correction",
        "Save button remains enabled for retry"
      ]
    },
    {
      "id": "TC-NEGA-002",
      "title": "Attempt to create shift template with break time outside shift hours",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "User has opened the template creation form",
        "Validation rules are active for break time overlap"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'Overlap Test' as Template Name, '09:00 AM' as Start Time, '05:00 PM' as End Time",
          "expectedResult": "All fields populate correctly"
        },
        {
          "step": 2,
          "action": "Click 'Add Break' and enter break from '07:00 AM' to '08:00 AM' (before shift start)",
          "expectedResult": "Break time entry appears in the form"
        },
        {
          "step": 3,
          "action": "Click 'Save Template' button",
          "expectedResult": "Red error message appears: 'Break times must be within shift hours (09:00 AM - 05:00 PM)'"
        },
        {
          "step": 4,
          "action": "Verify the templates list",
          "expectedResult": "Template 'Overlap Test' is not created and does not appear in the list"
        }
      ],
      "postconditions": [
        "No template is saved to the database",
        "Form remains open with validation error displayed",
        "User can correct the break time and retry"
      ]
    },
    {
      "id": "TC-NEGA-003",
      "title": "Attempt to create shift template with empty required fields",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "Template creation form is open"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens with empty fields"
        },
        {
          "step": 2,
          "action": "Leave Template Name field empty",
          "expectedResult": "Template Name field remains empty"
        },
        {
          "step": 3,
          "action": "Leave Start Time and End Time fields empty",
          "expectedResult": "Time fields show placeholder text or remain unselected"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Red error messages appear: 'Template Name is required', 'Start Time is required', 'End Time is required'"
        },
        {
          "step": 5,
          "action": "Verify Save button behavior",
          "expectedResult": "Template is not saved and form remains open with error indicators on required fields"
        }
      ],
      "postconditions": [
        "No template is created in the database",
        "Form validation prevents submission",
        "Required field indicators (red borders or asterisks) are visible",
        "User remains on the form to complete required fields"
      ]
    },
    {
      "id": "TC-NEGA-004",
      "title": "Attempt to create shift template by unauthorized user without administrator permissions",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in with 'Employee' role (non-administrator)",
        "User attempts to access /admin/shift-templates URL directly",
        "Security permissions are enforced at both UI and API levels"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to /admin/shift-templates URL in browser",
          "expectedResult": "System redirects to unauthorized access page or displays error message 'Access Denied: Administrator privileges required'"
        },
        {
          "step": 2,
          "action": "Attempt to send POST request to /api/shift-templates with employee authentication token",
          "expectedResult": "API returns HTTP 403 Forbidden status with error message 'Insufficient permissions'"
        },
        {
          "step": 3,
          "action": "Verify no template creation form is accessible",
          "expectedResult": "'Create New Template' button is not visible or is disabled"
        }
      ],
      "postconditions": [
        "No template is created",
        "User access attempt is logged in security audit trail",
        "User remains on unauthorized access page or is redirected to appropriate page for their role"
      ]
    },
    {
      "id": "TC-NEGA-005",
      "title": "Attempt to create shift template with special characters and SQL injection in template name",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "Template creation form is open",
        "Input sanitization is implemented"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter \"'; DROP TABLE ShiftTemplates; --\" in the Template Name field",
          "expectedResult": "Text is entered in the field"
        },
        {
          "step": 2,
          "action": "Enter valid Start Time '08:00 AM' and End Time '04:00 PM'",
          "expectedResult": "Time fields populate correctly"
        },
        {
          "step": 3,
          "action": "Click 'Save Template' button",
          "expectedResult": "Either: (1) Error message 'Invalid characters in template name' appears, OR (2) Template is saved with sanitized name, OR (3) Special characters are escaped properly"
        },
        {
          "step": 4,
          "action": "Verify database integrity by checking ShiftTemplates table still exists",
          "expectedResult": "ShiftTemplates table is intact and not dropped, SQL injection was prevented"
        },
        {
          "step": 5,
          "action": "If template was saved, verify the stored name in database",
          "expectedResult": "Name is properly escaped/sanitized and does not contain executable SQL code"
        }
      ],
      "postconditions": [
        "Database remains secure and intact",
        "No SQL injection vulnerability is exploited",
        "Input is either rejected or properly sanitized",
        "Security event is logged if injection attempt detected"
      ]
    },
    {
      "id": "TC-NEGA-006",
      "title": "Attempt to delete a shift template that is currently assigned to active schedules",
      "category": "Negative",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as an Administrator",
        "A shift template named 'Active Shift' exists",
        "Template 'Active Shift' is currently assigned to at least one active employee schedule",
        "User is on the shift template management page"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate 'Active Shift' template in the list and click 'Delete' icon",
          "expectedResult": "Confirmation dialog appears"
        },
        {
          "step": 2,
          "action": "Click 'Confirm' button in the dialog",
          "expectedResult": "Red error message appears: 'Cannot delete template: Currently assigned to active schedules. Please remove assignments first.'"
        },
        {
          "step": 3,
          "action": "Verify template still exists in the list",
          "expectedResult": "'Active Shift' template remains in the list, unchanged"
        },
        {
          "step": 4,
          "action": "Verify database record",
          "expectedResult": "Template record still exists in ShiftTemplates table"
        }
      ],
      "postconditions": [
        "Template is not deleted from database",
        "Active schedule assignments remain intact",
        "Error message guides user to remove assignments first",
        "Template remains available for viewing and editing"
      ]
    },
    {
      "id": "TC-NEGA-007",
      "title": "Attempt to create shift template when system has reached maximum limit of 100 templates",
      "category": "Negative",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as an Administrator",
        "Exactly 100 shift templates already exist in the system",
        "Performance limit of 100 templates is enforced",
        "User is on the shift template management page"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Either button is disabled with tooltip 'Maximum template limit reached (100)', OR form opens normally"
        },
        {
          "step": 2,
          "action": "If form opens, enter 'Template 101' as name, '08:00 AM' as Start Time, '04:00 PM' as End Time",
          "expectedResult": "Fields populate with entered data"
        },
        {
          "step": 3,
          "action": "Click 'Save Template' button",
          "expectedResult": "Red error message appears: 'Maximum template limit reached. Please delete unused templates before creating new ones.'"
        },
        {
          "step": 4,
          "action": "Verify template count in database",
          "expectedResult": "ShiftTemplates table still contains exactly 100 records, no new template was added"
        }
      ],
      "postconditions": [
        "Template count remains at 100",
        "No new template is created",
        "User is informed of the limit and guided to delete unused templates",
        "System performance remains stable"
      ]
    }
  ],
  "edgeCases": [
    {
      "id": "TC-EDGE-001",
      "title": "Create shift template with minimum valid time difference (1 minute between start and end)",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as an Administrator",
        "Template creation form is open",
        "System allows minimum 1-minute shift duration"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter 'Minimal Shift' as Template Name",
          "expectedResult": "Template Name field shows 'Minimal Shift'"
        },
        {
          "step": 3,
          "action": "Select '09:00 AM' as Start Time and '09:01 AM' as End Time",
          "expectedResult": "Both time fields populate with 1-minute difference"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Either: (1) Success message appears and template is created, OR (2) Validation error appears if minimum duration is enforced"
        },
        {
          "step": 5,
          "action": "If saved successfully, verify template in the list",
          "expectedResult": "Template appears with Start '09:00 AM' and End '09:01 AM'"
        }
      ],
      "postconditions": [
        "Template is saved if system allows 1-minute shifts",
        "Validation behavior is consistent with business rules",
        "Template can be used in scheduling if created"
      ]
    },
    {
      "id": "TC-EDGE-002",
      "title": "Create shift template with maximum valid time span (23 hours 59 minutes)",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as an Administrator",
        "Template creation form is open",
        "System supports shifts up to 24 hours"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter 'Maximum Shift' as Template Name",
          "expectedResult": "Template Name field populates"
        },
        {
          "step": 3,
          "action": "Select '12:00 AM' as Start Time and '11:59 PM' as End Time",
          "expectedResult": "Time fields show nearly 24-hour span"
        },
        {
          "step": 4,
          "action": "Add break from '12:00 PM' to '01:00 PM'",
          "expectedResult": "Break is added successfully"
        },
        {
          "step": 5,
          "action": "Click 'Save Template' button",
          "expectedResult": "Success message appears: 'Template created successfully'"
        },
        {
          "step": 6,
          "action": "Verify template in list",
          "expectedResult": "'Maximum Shift' appears with full time span displayed correctly"
        }
      ],
      "postconditions": [
        "Template with maximum duration is saved successfully",
        "System handles extreme but valid time spans",
        "Template is available for scheduling"
      ]
    },
    {
      "id": "TC-EDGE-003",
      "title": "Create shift template with template name at maximum character limit",
      "category": "Edge Cases",
      "priority": "Low",
      "preconditions": [
        "User is logged in as an Administrator",
        "Template creation form is open",
        "Template Name field has a maximum character limit (assume 255 characters)"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter a 255-character string in Template Name field: 'A' repeated 255 times",
          "expectedResult": "Field accepts exactly 255 characters and prevents further input, or shows character counter '255/255'"
        },
        {
          "step": 3,
          "action": "Enter valid Start Time '08:00 AM' and End Time '05:00 PM'",
          "expectedResult": "Time fields populate correctly"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Success message appears and template is created"
        },
        {
          "step": 5,
          "action": "Verify template in list",
          "expectedResult": "Template appears with full name visible or truncated with ellipsis, hovering shows full name in tooltip"
        }
      ],
      "postconditions": [
        "Template is saved with maximum-length name",
        "Database field accommodates the full name",
        "UI handles display of long names appropriately"
      ]
    },
    {
      "id": "TC-EDGE-004",
      "title": "Create shift template with Unicode characters, emojis, and special characters in name",
      "category": "Edge Cases",
      "priority": "Low",
      "preconditions": [
        "User is logged in as an Administrator",
        "Template creation form is open",
        "System supports UTF-8 character encoding"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter 'Êó©Áè≠ Shift üåÖ (Morning)' in Template Name field",
          "expectedResult": "Field accepts and displays Unicode characters, Chinese characters, and emoji correctly"
        },
        {
          "step": 3,
          "action": "Enter Start Time '06:00 AM' and End Time '02:00 PM'",
          "expectedResult": "Time fields populate correctly"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Success message appears and template is created"
        },
        {
          "step": 5,
          "action": "Verify template in list",
          "expectedResult": "Template name displays correctly with all Unicode characters and emoji rendered properly"
        },
        {
          "step": 6,
          "action": "Refresh the page and verify persistence",
          "expectedResult": "Template name still displays correctly after page reload"
        }
      ],
      "postconditions": [
        "Template is saved with Unicode characters intact",
        "Database stores UTF-8 characters correctly",
        "UI renders special characters and emojis properly across browsers"
      ]
    },
    {
      "id": "TC-EDGE-005",
      "title": "Create shift template with break time exactly at shift boundaries",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as an Administrator",
        "Template creation form is open",
        "System validation allows breaks at shift boundaries"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter 'Boundary Break Shift' as Template Name, '08:00 AM' as Start Time, '04:00 PM' as End Time",
          "expectedResult": "All fields populate correctly"
        },
        {
          "step": 3,
          "action": "Add break from '08:00 AM' to '08:15 AM' (starts exactly at shift start)",
          "expectedResult": "Break is added to the form"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Either: (1) Success message appears if boundary breaks are allowed, OR (2) Validation error appears: 'Break cannot start at shift start time'"
        },
        {
          "step": 5,
          "action": "If error appears, modify break to '08:01 AM' to '08:15 AM' and save again",
          "expectedResult": "Template saves successfully with adjusted break time"
        }
      ],
      "postconditions": [
        "System behavior at boundaries is consistent with business rules",
        "Validation provides clear guidance on break time constraints",
        "Template is saved with valid break configuration"
      ]
    },
    {
      "id": "TC-EDGE-006",
      "title": "Rapidly create multiple templates in quick succession to test concurrent operations",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "System has fewer than 95 templates (room for 5 more)"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Open template creation form and create 'Rapid Test 1' with Start '08:00 AM', End '04:00 PM', click Save",
          "expectedResult": "First template saves and success message appears"
        },
        {
          "step": 2,
          "action": "Immediately click 'Create New Template' again and create 'Rapid Test 2' with Start '09:00 AM', End '05:00 PM', click Save",
          "expectedResult": "Second template saves successfully"
        },
        {
          "step": 3,
          "action": "Repeat process rapidly for 'Rapid Test 3', 'Rapid Test 4', and 'Rapid Test 5'",
          "expectedResult": "All templates are created without errors or race conditions"
        },
        {
          "step": 4,
          "action": "Refresh the page and verify all 5 templates appear in the list",
          "expectedResult": "All 5 'Rapid Test' templates are present with correct details"
        },
        {
          "step": 5,
          "action": "Verify database contains all 5 templates with unique IDs",
          "expectedResult": "Database shows 5 distinct records with no duplicates or missing entries"
        }
      ],
      "postconditions": [
        "All 5 templates are successfully created and persisted",
        "No race conditions or duplicate entries occurred",
        "System handled rapid successive operations correctly",
        "Database integrity is maintained"
      ]
    },
    {
      "id": "TC-EDGE-007",
      "title": "Create shift template and verify behavior when database connection is temporarily lost during save",
      "category": "Edge Cases",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "Template creation form is open with valid data entered",
        "Ability to simulate network/database interruption for testing"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'Network Test Shift' as Template Name, '10:00 AM' as Start Time, '06:00 PM' as End Time",
          "expectedResult": "All fields populate correctly"
        },
        {
          "step": 2,
          "action": "Simulate database connection loss or network interruption",
          "expectedResult": "Database connection is interrupted"
        },
        {
          "step": 3,
          "action": "Click 'Save Template' button",
          "expectedResult": "Error message appears: 'Unable to save template. Please check your connection and try again.' or 'Network error occurred'"
        },
        {
          "step": 4,
          "action": "Verify form data is retained",
          "expectedResult": "Form remains open with all entered data still present (not lost)"
        },
        {
          "step": 5,
          "action": "Restore database connection",
          "expectedResult": "Connection is re-established"
        },
        {
          "step": 6,
          "action": "Click 'Save Template' button again",
          "expectedResult": "Success message appears and template is saved successfully"
        }
      ],
      "postconditions": [
        "Template is saved after connection is restored",
        "No duplicate entries were created",
        "User data was preserved during the error",
        "Error handling provided clear feedback to user"
      ]
    }
  ],
  "accessibility": [
    {
      "id": "TC-ACCE-001",
      "title": "Verify complete keyboard navigation through shift template creation form",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "Screen reader is not required for this test (keyboard only)",
        "Browser supports standard keyboard navigation"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Press Tab key to navigate to 'Create New Template' button",
          "expectedResult": "Button receives visible focus indicator (outline or highlight) and is clearly distinguishable"
        },
        {
          "step": 2,
          "action": "Press Enter key to activate the button",
          "expectedResult": "Template creation form modal opens and focus moves to first input field (Template Name)"
        },
        {
          "step": 3,
          "action": "Type 'Keyboard Test Shift' in Template Name field, then press Tab",
          "expectedResult": "Focus moves to Start Time field with visible focus indicator"
        },
        {
          "step": 4,
          "action": "Use Arrow keys to select '08:00 AM' in Start Time dropdown, then press Tab",
          "expectedResult": "Time is selected and focus moves to End Time field"
        },
        {
          "step": 5,
          "action": "Use Arrow keys to select '04:00 PM' in End Time field, then press Tab",
          "expectedResult": "Time is selected and focus moves to 'Add Break' button"
        },
        {
          "step": 6,
          "action": "Press Enter on 'Add Break' button, then Tab through break time fields",
          "expectedResult": "Break fields appear and are navigable via Tab key with visible focus"
        },
        {
          "step": 7,
          "action": "Press Tab to navigate to 'Save Template' button and press Enter",
          "expectedResult": "Template is saved, success message appears, and focus returns to main page or 'Create New Template' button"
        },
        {
          "step": 8,
          "action": "Press Escape key when form is open",
          "expectedResult": "Form closes and focus returns to 'Create New Template' button"
        }
      ],
      "postconditions": [
        "All interactive elements are reachable via keyboard",
        "Focus order is logical and follows visual layout",
        "Focus is never trapped in any component",
        "Escape key closes modal and returns focus appropriately"
      ]
    },
    {
      "id": "TC-ACCE-002",
      "title": "Verify screen reader announces all form elements, labels, and validation messages correctly",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "Screen reader is active (NVDA, JAWS, or VoiceOver)",
        "User is on the shift template management page",
        "Screen reader is in forms mode"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to 'Create New Template' button using screen reader",
          "expectedResult": "Screen reader announces: 'Create New Template, button' with role and state"
        },
        {
          "step": 2,
          "action": "Activate button and navigate to Template Name field",
          "expectedResult": "Screen reader announces: 'Template Name, edit text, required' or similar with label and required state"
        },
        {
          "step": 3,
          "action": "Navigate to Start Time field",
          "expectedResult": "Screen reader announces: 'Start Time, combobox, required' with appropriate role"
        },
        {
          "step": 4,
          "action": "Navigate to End Time field",
          "expectedResult": "Screen reader announces: 'End Time, combobox, required' with appropriate role"
        },
        {
          "step": 5,
          "action": "Leave Template Name empty and attempt to save",
          "expectedResult": "Screen reader announces error message: 'Error: Template Name is required' and focus moves to the field with error"
        },
        {
          "step": 6,
          "action": "Successfully save a template",
          "expectedResult": "Screen reader announces success message: 'Success: Template created successfully' via ARIA live region"
        },
        {
          "step": 7,
          "action": "Navigate through the templates list",
          "expectedResult": "Screen reader announces each template with its details: 'Morning Shift, Start Time 8:00 AM, End Time 5:00 PM, Edit button, Delete button'"
        }
      ],
      "postconditions": [
        "All form labels are properly associated with inputs",
        "Required fields are announced as required",
        "Error and success messages are announced via ARIA live regions",
        "All interactive elements have accessible names"
      ]
    },
    {
      "id": "TC-ACCE-003",
      "title": "Verify ARIA labels, roles, and properties are correctly implemented throughout template management",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "Browser developer tools are available for inspection",
        "Accessibility testing extension is installed (e.g., axe DevTools)"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Inspect 'Create New Template' button in browser developer tools",
          "expectedResult": "Button has appropriate ARIA attributes: role='button' (or is a native button element), aria-label or visible text"
        },
        {
          "step": 2,
          "action": "Open template creation form and inspect modal container",
          "expectedResult": "Modal has role='dialog', aria-labelledby pointing to modal title, aria-modal='true'"
        },
        {
          "step": 3,
          "action": "Inspect Template Name input field",
          "expectedResult": "Input has associated label via <label> element or aria-label, aria-required='true' attribute"
        },
        {
          "step": 4,
          "action": "Inspect time picker dropdowns",
          "expectedResult": "Dropdowns have role='combobox' or use native <select>, aria-label or associated label, aria-required='true'"
        },
        {
          "step": 5,
          "action": "Trigger a validation error and inspect error message",
          "expectedResult": "Error message has role='alert' or is in an aria-live='assertive' region, aria-describedby links input to error message"
        },
        {
          "step": 6,
          "action": "Inspect success message after saving template",
          "expectedResult": "Success message is in aria-live='polite' region for non-intrusive announcement"
        },
        {
          "step": 7,
          "action": "Inspect templates list/table",
          "expectedResult": "List has appropriate structure: role='table' or semantic <table>, headers have scope attributes, rows have proper markup"
        }
      ],
      "postconditions": [
        "All ARIA roles are semantically correct",
        "ARIA properties accurately reflect component states",
        "No ARIA validation errors are present",
        "Accessibility tree is properly structured"
      ]
    },
    {
      "id": "TC-ACCE-004",
      "title": "Verify sufficient color contrast ratios for all text and interactive elements (WCAG AA compliance)",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is on the shift template management page",
        "Color contrast analyzer tool is available (e.g., browser extension or online tool)",
        "Page is displayed at 100% zoom"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Measure color contrast ratio of 'Create New Template' button text against button background",
          "expectedResult": "Contrast ratio is at least 4.5:1 for normal text or 3:1 for large text (18pt+)"
        },
        {
          "step": 2,
          "action": "Measure contrast ratio of form labels (Template Name, Start Time, End Time) against page background",
          "expectedResult": "Contrast ratio meets WCAG AA standard of 4.5:1 minimum"
        },
        {
          "step": 3,
          "action": "Measure contrast ratio of input field text against input background",
          "expectedResult": "Contrast ratio is at least 4.5:1"
        },
        {
          "step": 4,
          "action": "Measure contrast ratio of error messages (red text) against background",
          "expectedResult": "Contrast ratio is at least 4.5:1, error is not conveyed by color alone (icon or text indicator present)"
        },
        {
          "step": 5,
          "action": "Measure contrast ratio of success messages (green text) against background",
          "expectedResult": "Contrast ratio is at least 4.5:1, success is not conveyed by color alone"
        },
        {
          "step": 6,
          "action": "Measure contrast ratio of focus indicators on interactive elements",
          "expectedResult": "Focus indicator has at least 3:1 contrast ratio against adjacent colors"
        },
        {
          "step": 7,
          "action": "Check that information is not conveyed by color alone",
          "expectedResult": "Required fields have asterisk or 'required' text in addition to any color coding, errors have icons or text in addition to red color"
        }
      ],
      "postconditions": [
        "All text meets WCAG AA contrast requirements",
        "Interactive elements are distinguishable",
        "Information is accessible to users with color blindness",
        "Focus indicators are clearly visible"
      ]
    },
    {
      "id": "TC-ACCE-005",
      "title": "Verify page functionality and readability at 200% browser zoom level",
      "category": "Accessibility",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "Browser is set to 100% zoom initially",
        "Browser window is at standard desktop resolution (1920x1080 or similar)"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Set browser zoom to 200% using Ctrl/Cmd + '+' or browser settings",
          "expectedResult": "Page content scales to 200% without horizontal scrolling required"
        },
        {
          "step": 2,
          "action": "Verify 'Create New Template' button is visible and clickable",
          "expectedResult": "Button is fully visible, text is readable, and button is clickable without overlapping other elements"
        },
        {
          "step": 3,
          "action": "Click 'Create New Template' and verify form modal at 200% zoom",
          "expectedResult": "Modal opens and all form fields are visible, properly sized, and usable without horizontal scrolling within modal"
        },
        {
          "step": 4,
          "action": "Verify all form labels and input fields are readable",
          "expectedResult": "Text is not truncated, fields are properly sized, and layout adapts responsively"
        },
        {
          "step": 5,
          "action": "Complete form and save template at 200% zoom",
          "expectedResult": "All interactions work correctly, success message is visible and readable"
        },
        {
          "step": 6,
          "action": "Verify templates list is readable and functional at 200% zoom",
          "expectedResult": "List items are visible, text is readable, Edit and Delete buttons are accessible and clickable"
        }
      ],
      "postconditions": [
        "All functionality remains available at 200% zoom",
        "No content is cut off or hidden",
        "Layout adapts appropriately to larger text",
        "User can complete all tasks without reducing zoom"
      ]
    },
    {
      "id": "TC-ACCE-006",
      "title": "Verify focus management and focus trap behavior in template creation modal dialog",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "Keyboard navigation is being used (no mouse)"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Press Tab to navigate to 'Create New Template' button and press Enter",
          "expectedResult": "Modal opens and focus automatically moves to first focusable element (Template Name field or modal close button)"
        },
        {
          "step": 2,
          "action": "Press Tab repeatedly to cycle through all focusable elements in the modal",
          "expectedResult": "Focus cycles through: Template Name, Start Time, End Time, Add Break button, Save button, Cancel button, Close (X) button"
        },
        {
          "step": 3,
          "action": "Continue pressing Tab after reaching the last focusable element",
          "expectedResult": "Focus wraps back to the first focusable element in the modal (focus is trapped within modal)"
        },
        {
          "step": 4,
          "action": "Press Shift+Tab from the first focusable element",
          "expectedResult": "Focus moves backward to the last focusable element (reverse focus trap works)"
        },
        {
          "step": 5,
          "action": "Press Escape key while modal is open",
          "expectedResult": "Modal closes and focus returns to 'Create New Template' button that originally opened the modal"
        },
        {
          "step": 6,
          "action": "Open modal again, fill form, and click Save button",
          "expectedResult": "After successful save, modal closes and focus returns to appropriate element (either 'Create New Template' button or newly created template in list)"
        }
      ],
      "postconditions": [
        "Focus is properly trapped within modal when open",
        "Focus returns to logical location when modal closes",
        "No focus is lost or moved to unexpected locations",
        "Keyboard users can efficiently navigate and exit modal"
      ]
    },
    {
      "id": "TC-ACCE-007",
      "title": "Verify mobile accessibility including touch target sizes and gesture support",
      "category": "Accessibility",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as an Administrator on a mobile device or browser in mobile emulation mode",
        "Screen size is set to mobile dimensions (e.g., 375x667 for iPhone)",
        "Touch input is available or simulated"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Measure the size of 'Create New Template' button on mobile view",
          "expectedResult": "Button is at least 44x44 pixels (iOS) or 48x48 pixels (Android) to meet minimum touch target size"
        },
        {
          "step": 2,
          "action": "Tap 'Create New Template' button",
          "expectedResult": "Button responds to touch, modal opens, and form is displayed in mobile-optimized layout"
        },
        {
          "step": 3,
          "action": "Verify spacing between interactive elements in the form",
          "expectedResult": "All buttons and input fields have adequate spacing (at least 8px) to prevent accidental taps"
        },
        {
          "step": 4,
          "action": "Measure Edit and Delete icon buttons in templates list",
          "expectedResult": "Icon buttons are at least 44x44 pixels or have sufficient padding to meet touch target requirements"
        },
        {
          "step": 5,
          "action": "Test time picker dropdowns on mobile",
          "expectedResult": "Time pickers use native mobile controls (iOS/Android time pickers) or custom controls optimized for touch"
        },
        {
          "step": 6,
          "action": "Verify modal can be dismissed by tapping outside modal area or using close button",
          "expectedResult": "Modal closes appropriately, close button is large enough for easy tapping"
        },
        {
          "step": 7,
          "action": "Test form submission on mobile",
          "expectedResult": "Save button is easily tappable, success message is visible on mobile screen, and layout remains usable"
        }
      ],
      "postconditions": [
        "All touch targets meet minimum size requirements",
        "Mobile layout is optimized for touch interaction",
        "No elements are too small or too close together",
        "Mobile users can complete all tasks efficiently"
      ]
    }
  ],
  "selectedTypes": {
    "functional": true,
    "negative": true,
    "edgeCases": true,
    "accessibility": true
  },
  "userStoryObject": {
    "id": "db-story-story-1",
    "title": "As Administrator, I want to perform shift template creation to achieve reusable scheduling.",
    "description": "CONTEXT & BACKGROUND:\nThe ability to create shift templates is essential for streamlining the scheduling process. This feature allows administrators to define shifts that can be reused, reducing the time spent on scheduling.\n\nCURRENT STATE:\nCurrently, scheduling is done manually without templates, leading to inconsistencies and increased workload.\n\nDESIRED STATE:\nAdministrators can create and manage templates, ensuring consistency and efficiency in scheduling.\n\nKEY FUNCTIONALITY:\n‚Ä¢ Create new shift templates with start and end times.\n‚Ä¢ Define break times within templates.\n‚Ä¢ Edit existing templates as needed.\n‚Ä¢ Delete templates that are no longer in use.\n\nUSER INTERACTION FLOW:\n1. Administrator navigates to the shift template management page.\n2. Administrator clicks on 'Create New Template'.\n3. Administrator inputs shift details (start time, end time, breaks).\n4. Administrator saves the template.\n5. System confirms template creation.\n6. Administrator can view the list of created templates.\n\nTECHNICAL CONSIDERATIONS:\n‚Ä¢ Data source: ShiftTemplates table in the database.\n‚Ä¢ Validation rules: Ensure start time is before end time.\n‚Ä¢ API endpoints: POST /api/shift-templates for creation.\n‚Ä¢ Security: Only authorized administrators can create templates.\n‚Ä¢ Performance: System should handle up to 100 templates without performance degradation.\n\nOUT OF SCOPE:\n‚Ä¢ Employee-specific scheduling is not included in this story.\n\nSUCCESS METRICS:\n‚Ä¢ 90% of templates created without errors.",
    "persona": "Administrator",
    "personaId": "",
    "acceptanceCriteria": [
      "System allows creation of shift templates with valid start and end times.",
      "System validates break times and ensures they do not overlap with shift times.",
      "System displays a confirmation message upon successful template creation.",
      "System lists all created templates for review."
    ],
    "priority": "High",
    "storyPoints": 5,
    "epicId": "",
    "status": "Backlog"
  }
}