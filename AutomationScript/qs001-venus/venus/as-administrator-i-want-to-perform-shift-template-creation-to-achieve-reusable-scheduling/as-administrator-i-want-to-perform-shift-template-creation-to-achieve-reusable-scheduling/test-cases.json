{
  "storyId": "story-1",
  "storyTitle": "As Administrator, I want to perform shift template creation to achieve reusable scheduling.",
  "functional": [
    {
      "id": "TC-FUNC-001",
      "title": "Verify successful creation of shift template with valid start time, end time, and break periods",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in with Administrator role and has permission to create shift templates",
        "User is on the Shift Template Management page at /admin/shift-templates",
        "ShiftTemplates database table is accessible and has less than 100 existing templates",
        "System time is synchronized and displaying correct timezone"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click the 'Create New Template' button located in the top-right corner of the page",
          "expectedResult": "Shift template creation form modal opens with fields for Template Name, Start Time, End Time, and Break Times visible"
        },
        {
          "step": 2,
          "action": "Enter 'Morning Shift' in the Template Name field",
          "expectedResult": "Text 'Morning Shift' appears in the Template Name field without validation errors"
        },
        {
          "step": 3,
          "action": "Select '08:00 AM' from the Start Time dropdown picker",
          "expectedResult": "Start Time field displays '08:00 AM' and no validation errors appear"
        },
        {
          "step": 4,
          "action": "Select '05:00 PM' from the End Time dropdown picker",
          "expectedResult": "End Time field displays '05:00 PM' and duration calculation shows '9 hours' below the field"
        },
        {
          "step": 5,
          "action": "Click 'Add Break' button and enter break from '12:00 PM' to '01:00 PM'",
          "expectedResult": "Break period is added to the list showing '12:00 PM - 01:00 PM (1 hour)' with no validation errors"
        },
        {
          "step": 6,
          "action": "Click the 'Save Template' button at the bottom of the form",
          "expectedResult": "Green success banner appears at top of page with message 'Shift template created successfully' and modal closes automatically"
        },
        {
          "step": 7,
          "action": "Verify the newly created template appears in the templates list",
          "expectedResult": "Template 'Morning Shift' is visible in the list with details: 08:00 AM - 05:00 PM, 1 break period, and status 'Active'"
        }
      ],
      "postconditions": [
        "New shift template 'Morning Shift' is saved in ShiftTemplates database table with ID, timestamps, and creator information",
        "Template appears in the templates list and is available for selection in scheduling workflows",
        "User remains on the Shift Template Management page with the list view displayed",
        "Audit log entry is created recording template creation with administrator username and timestamp"
      ]
    },
    {
      "id": "TC-FUNC-002",
      "title": "Verify creation of shift template with multiple break periods within valid shift hours",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator with shift template creation permissions",
        "User is on the Shift Template Management page",
        "No existing template with the name 'Extended Shift' exists in the system",
        "Browser supports time picker functionality"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens with all required fields visible and enabled"
        },
        {
          "step": 2,
          "action": "Enter 'Extended Shift' in Template Name field, set Start Time to '06:00 AM' and End Time to '10:00 PM'",
          "expectedResult": "All fields accept input, duration shows '16 hours', and no validation errors appear"
        },
        {
          "step": 3,
          "action": "Click 'Add Break' and add first break from '09:00 AM' to '09:15 AM'",
          "expectedResult": "First break '09:00 AM - 09:15 AM (15 minutes)' is added to break list"
        },
        {
          "step": 4,
          "action": "Click 'Add Break' again and add second break from '01:00 PM' to '02:00 PM'",
          "expectedResult": "Second break '01:00 PM - 02:00 PM (1 hour)' is added below first break in the list"
        },
        {
          "step": 5,
          "action": "Click 'Add Break' again and add third break from '06:00 PM' to '06:30 PM'",
          "expectedResult": "Third break '06:00 PM - 06:30 PM (30 minutes)' is added to the list, total break time shows '1 hour 45 minutes'"
        },
        {
          "step": 6,
          "action": "Click 'Save Template' button",
          "expectedResult": "Success message 'Shift template created successfully' appears and form closes"
        }
      ],
      "postconditions": [
        "Template 'Extended Shift' is saved with all three break periods stored correctly in the database",
        "Template is visible in the list showing 06:00 AM - 10:00 PM with 3 breaks",
        "Total working hours calculation excludes break times (14 hours 15 minutes working time)",
        "Template is immediately available for use in scheduling operations"
      ]
    },
    {
      "id": "TC-FUNC-003",
      "title": "Verify template creation with minimum valid shift duration and no breaks",
      "category": "Functional",
      "priority": "Medium",
      "preconditions": [
        "Administrator user is authenticated and on Shift Template Management page",
        "System allows minimum shift duration of 1 hour based on business rules",
        "Database connection is active and responsive"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form displays with empty fields ready for input"
        },
        {
          "step": 2,
          "action": "Enter 'Short Shift' in Template Name, set Start Time to '02:00 PM' and End Time to '03:00 PM'",
          "expectedResult": "Fields accept input, duration calculation shows '1 hour', no validation errors displayed"
        },
        {
          "step": 3,
          "action": "Leave break periods section empty without adding any breaks",
          "expectedResult": "Break section shows 'No breaks added' message and Save button remains enabled"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template is saved successfully with confirmation message 'Shift template created successfully'"
        }
      ],
      "postconditions": [
        "Template 'Short Shift' is created in database with zero break periods",
        "Template appears in list showing 02:00 PM - 03:00 PM with '0 breaks' indicator",
        "Template is valid and can be used for scheduling purposes",
        "Working hours equals total shift duration (1 hour)"
      ]
    },
    {
      "id": "TC-FUNC-004",
      "title": "Verify template list displays all created templates with correct details and sorting",
      "category": "Functional",
      "priority": "Medium",
      "preconditions": [
        "Administrator is logged in and has access to Shift Template Management page",
        "At least 3 different shift templates exist in the system with varying times and break configurations",
        "User has just created a new template or is viewing existing templates"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to Shift Template Management page at /admin/shift-templates",
          "expectedResult": "Page loads showing header 'Shift Templates' and a list/grid of all existing templates"
        },
        {
          "step": 2,
          "action": "Observe the template list and verify each template card/row displays template name, start time, end time, and number of breaks",
          "expectedResult": "Each template shows complete information: name, time range (e.g., '08:00 AM - 05:00 PM'), break count (e.g., '2 breaks'), and status"
        },
        {
          "step": 3,
          "action": "Verify templates are sorted by creation date with newest templates appearing first",
          "expectedResult": "Most recently created template appears at the top of the list with creation timestamp visible"
        },
        {
          "step": 4,
          "action": "Check that each template has action buttons for Edit and Delete operations",
          "expectedResult": "Each template row/card displays 'Edit' and 'Delete' buttons or icons that are clickable"
        }
      ],
      "postconditions": [
        "All templates from database are displayed accurately with no missing or incorrect data",
        "Template count indicator shows correct total number (e.g., 'Showing 5 templates')",
        "User remains on the template list page ready to perform further actions",
        "Page performance is acceptable with all templates loaded within 2 seconds"
      ]
    },
    {
      "id": "TC-FUNC-005",
      "title": "Verify edit functionality allows modification of existing shift template details",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "Administrator is logged in with edit permissions for shift templates",
        "At least one shift template named 'Morning Shift' exists with Start Time 08:00 AM, End Time 05:00 PM, and one break",
        "User is on the Shift Template Management page viewing the list of templates"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate 'Morning Shift' template in the list and click the 'Edit' button/icon",
          "expectedResult": "Edit template form opens pre-populated with existing values: Template Name 'Morning Shift', Start Time '08:00 AM', End Time '05:00 PM', and existing break period"
        },
        {
          "step": 2,
          "action": "Change End Time from '05:00 PM' to '06:00 PM'",
          "expectedResult": "End Time field updates to '06:00 PM' and duration recalculates to show '10 hours'"
        },
        {
          "step": 3,
          "action": "Add a second break period from '03:00 PM' to '03:15 PM'",
          "expectedResult": "New break is added to the list showing '03:00 PM - 03:15 PM (15 minutes)' alongside existing break"
        },
        {
          "step": 4,
          "action": "Click 'Update Template' or 'Save Changes' button",
          "expectedResult": "Success message 'Shift template updated successfully' appears in green banner at top of page"
        },
        {
          "step": 5,
          "action": "Verify updated template in the list shows new end time and break count",
          "expectedResult": "Template 'Morning Shift' now displays '08:00 AM - 06:00 PM' with '2 breaks' indicator"
        }
      ],
      "postconditions": [
        "Template changes are persisted in ShiftTemplates database with updated timestamp",
        "Modified template reflects new values in all scheduling workflows that reference it",
        "Audit log records the modification with administrator username, timestamp, and changed fields",
        "User remains on template management page with updated list visible"
      ]
    },
    {
      "id": "TC-FUNC-006",
      "title": "Verify delete functionality removes shift template from system with confirmation",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "Administrator is logged in with delete permissions for shift templates",
        "A shift template named 'Test Template' exists and is not currently assigned to any active schedules",
        "User is on Shift Template Management page viewing the templates list"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate 'Test Template' in the templates list and click the 'Delete' button/icon",
          "expectedResult": "Confirmation dialog appears with message 'Are you sure you want to delete this shift template? This action cannot be undone.' and buttons 'Cancel' and 'Delete'"
        },
        {
          "step": 2,
          "action": "Click 'Delete' button in the confirmation dialog",
          "expectedResult": "Dialog closes and success message 'Shift template deleted successfully' appears in green banner"
        },
        {
          "step": 3,
          "action": "Verify 'Test Template' is no longer visible in the templates list",
          "expectedResult": "Template 'Test Template' is removed from the list and template count decreases by 1"
        },
        {
          "step": 4,
          "action": "Attempt to search for the deleted template using search functionality",
          "expectedResult": "Search returns no results for 'Test Template' confirming complete removal"
        }
      ],
      "postconditions": [
        "Template record is marked as deleted or removed from ShiftTemplates database table",
        "Template is no longer available for selection in any scheduling workflows",
        "Audit log entry records deletion with administrator username and timestamp",
        "Template count and list pagination update to reflect the deletion"
      ]
    }
  ],
  "negative": [
    {
      "id": "TC-NEGA-001",
      "title": "Verify system prevents template creation when end time is before or equal to start time",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "Administrator is logged in and on Shift Template Management page",
        "Template creation form is accessible and functional",
        "Validation rules are active for time field relationships"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button to open creation form",
          "expectedResult": "Template creation form opens with all fields ready for input"
        },
        {
          "step": 2,
          "action": "Enter 'Invalid Shift' in Template Name field",
          "expectedResult": "Template Name field accepts the input without errors"
        },
        {
          "step": 3,
          "action": "Set Start Time to '05:00 PM' and End Time to '09:00 AM' (end time before start time)",
          "expectedResult": "Red validation error message appears below End Time field stating 'End time must be after start time' or similar"
        },
        {
          "step": 4,
          "action": "Attempt to click 'Save Template' button",
          "expectedResult": "Save button is disabled or clicking it shows error message 'Please fix validation errors before saving' and form does not submit"
        },
        {
          "step": 5,
          "action": "Change End Time to '05:00 PM' (equal to start time)",
          "expectedResult": "Validation error persists showing 'End time must be after start time' or 'Shift duration must be at least 1 hour'"
        }
      ],
      "postconditions": [
        "No template is created in the database",
        "User remains on the creation form with validation errors visible",
        "Form fields retain entered values allowing user to correct the error",
        "No API call to POST /api/shift-templates is made"
      ]
    },
    {
      "id": "TC-NEGA-002",
      "title": "Verify system prevents template creation with overlapping break periods",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "Administrator is logged in with template creation permissions",
        "User is on template creation form with Start Time 08:00 AM and End Time 05:00 PM already entered",
        "At least one break period has been added to the form"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Add first break period from '12:00 PM' to '01:00 PM'",
          "expectedResult": "First break is added successfully showing '12:00 PM - 01:00 PM (1 hour)' in the breaks list"
        },
        {
          "step": 2,
          "action": "Click 'Add Break' button and attempt to add second break from '12:30 PM' to '01:30 PM' (overlapping with first break)",
          "expectedResult": "Red validation error appears stating 'Break times cannot overlap with existing breaks' or similar message"
        },
        {
          "step": 3,
          "action": "Attempt to save the template by clicking 'Save Template' button",
          "expectedResult": "Form submission is blocked and error message 'Please resolve break time conflicts before saving' appears"
        },
        {
          "step": 4,
          "action": "Modify second break to '12:00 PM' to '12:30 PM' (partial overlap at start)",
          "expectedResult": "Validation error persists showing overlap conflict message"
        }
      ],
      "postconditions": [
        "Template is not saved to database due to validation failure",
        "User remains on creation form with error messages visible",
        "Both break periods remain in the form allowing user to correct the overlap",
        "No success confirmation message is displayed"
      ]
    },
    {
      "id": "TC-NEGA-003",
      "title": "Verify system prevents template creation with break times outside shift hours",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "Administrator is logged in and on template creation form",
        "Template Name is entered as 'Test Shift'",
        "Start Time is set to '09:00 AM' and End Time is set to '05:00 PM'"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Add Break' button and enter break start time '08:00 AM' (before shift start)",
          "expectedResult": "Validation error appears stating 'Break start time must be after shift start time (09:00 AM)'"
        },
        {
          "step": 2,
          "action": "Change break start time to '04:30 PM' and end time to '06:00 PM' (break end after shift end)",
          "expectedResult": "Validation error displays 'Break end time must be before shift end time (05:00 PM)'"
        },
        {
          "step": 3,
          "action": "Attempt to click 'Save Template' button with invalid break times",
          "expectedResult": "Save operation is prevented and error message 'Break times must fall within shift hours' is displayed prominently"
        }
      ],
      "postconditions": [
        "No template is created in the database",
        "Form remains open with validation errors highlighted in red",
        "User can modify break times to correct the validation errors",
        "API endpoint POST /api/shift-templates is not called"
      ]
    },
    {
      "id": "TC-NEGA-004",
      "title": "Verify system prevents template creation with empty or missing required fields",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "Administrator is logged in and has opened the template creation form",
        "All form fields are initially empty",
        "Required field validation is enabled"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Leave Template Name field empty and click 'Save Template' button",
          "expectedResult": "Validation error 'Template name is required' appears below Template Name field in red text"
        },
        {
          "step": 2,
          "action": "Enter 'Test Template' in Template Name but leave Start Time empty, then click Save",
          "expectedResult": "Validation error 'Start time is required' appears below Start Time field"
        },
        {
          "step": 3,
          "action": "Fill Start Time with '09:00 AM' but leave End Time empty, then click Save",
          "expectedResult": "Validation error 'End time is required' appears below End Time field"
        },
        {
          "step": 4,
          "action": "Verify that Save button remains disabled or form submission is blocked until all required fields are filled",
          "expectedResult": "Form does not submit and all validation errors remain visible until corrected"
        }
      ],
      "postconditions": [
        "No template record is created in the database",
        "User remains on the creation form with all validation errors visible",
        "Form retains any valid data entered in non-empty fields",
        "No network request is sent to the backend API"
      ]
    },
    {
      "id": "TC-NEGA-005",
      "title": "Verify system prevents unauthorized users without administrator role from creating templates",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in with 'Employee' or 'Manager' role (not Administrator)",
        "User attempts to access Shift Template Management page directly via URL",
        "Authorization middleware is active and enforcing role-based access"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to /admin/shift-templates URL directly in browser",
          "expectedResult": "Access is denied and user is redirected to unauthorized page or dashboard with error message 'You do not have permission to access this page'"
        },
        {
          "step": 2,
          "action": "Attempt to access template creation API endpoint POST /api/shift-templates directly using browser developer tools or API client",
          "expectedResult": "API returns 403 Forbidden status code with error response 'Insufficient permissions to create shift templates'"
        },
        {
          "step": 3,
          "action": "Verify that navigation menu does not show 'Shift Templates' link for non-administrator users",
          "expectedResult": "Shift Template Management link is not visible in the navigation menu for current user role"
        }
      ],
      "postconditions": [
        "No template is created in the database",
        "User remains on their authorized page or is redirected to appropriate location",
        "Security audit log records the unauthorized access attempt with user ID and timestamp",
        "System security remains intact with no privilege escalation"
      ]
    },
    {
      "id": "TC-NEGA-006",
      "title": "Verify system handles template creation failure when database connection is lost",
      "category": "Negative",
      "priority": "Medium",
      "preconditions": [
        "Administrator is logged in and on template creation form",
        "Valid template data is entered: Name 'Test Shift', Start Time '09:00 AM', End Time '05:00 PM'",
        "Database connection can be simulated to fail or timeout during save operation"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Fill all required fields with valid data and click 'Save Template' button",
          "expectedResult": "Loading indicator appears showing save operation is in progress"
        },
        {
          "step": 2,
          "action": "Simulate database connection failure or timeout during the save operation",
          "expectedResult": "After timeout period, error message appears: 'Unable to save template. Please check your connection and try again.' or 'Database error occurred'"
        },
        {
          "step": 3,
          "action": "Verify that form data is retained and not cleared after the error",
          "expectedResult": "All entered field values remain in the form allowing user to retry without re-entering data"
        },
        {
          "step": 4,
          "action": "Check that no partial or corrupted template record is created in the database",
          "expectedResult": "Database query confirms no new template record exists with the attempted name"
        }
      ],
      "postconditions": [
        "No template is saved in the database",
        "User remains on the creation form with error message and original data intact",
        "System logs the database error with timestamp and error details for troubleshooting",
        "User can retry the save operation after connection is restored"
      ]
    }
  ],
  "edgeCases": [
    {
      "id": "TC-EDGE-001",
      "title": "Verify template creation with maximum allowed shift duration spanning 23 hours 59 minutes",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "Administrator is logged in and on template creation form",
        "System allows maximum shift duration up to 24 hours based on business rules",
        "Time picker supports selection of any valid time in 24-hour period"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' and enter 'Maximum Duration Shift' as template name",
          "expectedResult": "Template creation form opens and accepts the template name"
        },
        {
          "step": 2,
          "action": "Set Start Time to '12:00 AM' (midnight) and End Time to '11:59 PM'",
          "expectedResult": "Both times are accepted and duration calculation shows '23 hours 59 minutes' without validation errors"
        },
        {
          "step": 3,
          "action": "Add a break period from '12:00 PM' to '01:00 PM'",
          "expectedResult": "Break is added successfully and working hours recalculate to '22 hours 59 minutes'"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template is saved successfully with confirmation message and appears in templates list with correct duration"
        }
      ],
      "postconditions": [
        "Template is created with maximum duration and stored correctly in database",
        "Duration calculations are accurate and display properly in the UI",
        "Template can be used in scheduling without errors",
        "System performance remains acceptable with extreme duration value"
      ]
    },
    {
      "id": "TC-EDGE-002",
      "title": "Verify template creation with template name containing special characters, numbers, and maximum length",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "Administrator is logged in and on template creation form",
        "Template name field has a maximum character limit (assume 100 characters)",
        "System supports Unicode and special characters in template names"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter template name with special characters: 'Shift #1 - Morning/Evening (Mon-Fri) @2024 & Weekend 50%'",
          "expectedResult": "Template name field accepts all special characters without validation errors"
        },
        {
          "step": 2,
          "action": "Enter valid Start Time '09:00 AM' and End Time '05:00 PM', then save template",
          "expectedResult": "Template is created successfully and name displays correctly with all special characters preserved"
        },
        {
          "step": 3,
          "action": "Create another template with name at maximum character limit (100 characters): 'A' repeated 100 times or long descriptive name",
          "expectedResult": "Template name accepts exactly 100 characters and saves successfully"
        },
        {
          "step": 4,
          "action": "Attempt to enter 101 characters in template name field",
          "expectedResult": "Field either prevents input beyond 100 characters or shows validation error 'Template name cannot exceed 100 characters'"
        },
        {
          "step": 5,
          "action": "Test template name with Unicode characters: 'Shift Café ☕ 日本語 Ñoño'",
          "expectedResult": "Unicode characters are accepted, saved correctly, and display properly in the templates list"
        }
      ],
      "postconditions": [
        "All templates with special characters and Unicode are stored correctly in database with proper encoding",
        "Template names display correctly in list view without character corruption",
        "Search and filter functionality works correctly with special character template names",
        "Maximum length validation prevents data truncation or database errors"
      ]
    },
    {
      "id": "TC-EDGE-003",
      "title": "Verify system behavior when creating the 100th template at performance limit threshold",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "Administrator is logged in with template creation permissions",
        "Exactly 99 shift templates already exist in the system",
        "System performance requirement states handling up to 100 templates without degradation",
        "Database has sufficient storage capacity"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to Shift Template Management page and verify current template count shows 99",
          "expectedResult": "Page loads within 2 seconds and displays '99 templates' count indicator"
        },
        {
          "step": 2,
          "action": "Click 'Create New Template' and enter 'Template 100' with Start Time '09:00 AM' and End Time '05:00 PM'",
          "expectedResult": "Form accepts input normally without performance degradation"
        },
        {
          "step": 3,
          "action": "Click 'Save Template' and measure response time",
          "expectedResult": "Template is created successfully within 3 seconds and confirmation message appears"
        },
        {
          "step": 4,
          "action": "Verify templates list loads all 100 templates and check page performance",
          "expectedResult": "All 100 templates display in the list, page loads within 3 seconds, scrolling is smooth, and no UI lag is observed"
        },
        {
          "step": 5,
          "action": "Attempt to create the 101st template",
          "expectedResult": "System either allows creation (if no hard limit) or displays message 'Maximum template limit reached (100). Please delete unused templates before creating new ones.'"
        }
      ],
      "postconditions": [
        "System maintains acceptable performance with 100 templates loaded",
        "All templates are accessible and functional for scheduling operations",
        "Database queries remain optimized and response times stay within acceptable limits",
        "If limit is enforced, appropriate messaging guides user on next steps"
      ]
    },
    {
      "id": "TC-EDGE-004",
      "title": "Verify template creation with break period of minimum duration (1 minute) and maximum number of breaks",
      "category": "Edge Cases",
      "priority": "Low",
      "preconditions": [
        "Administrator is logged in and on template creation form",
        "System allows breaks with minimum duration of 1 minute",
        "Template has Start Time '06:00 AM' and End Time '10:00 PM' (16 hours) allowing multiple breaks"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Create template named 'Multiple Breaks Shift' with Start Time '06:00 AM' and End Time '10:00 PM'",
          "expectedResult": "Template form accepts the 16-hour shift duration"
        },
        {
          "step": 2,
          "action": "Add first break from '07:00 AM' to '07:01 AM' (1 minute duration)",
          "expectedResult": "Break is accepted and displays as '07:00 AM - 07:01 AM (1 minute)' in the breaks list"
        },
        {
          "step": 3,
          "action": "Continue adding breaks every 2 hours with 1-minute duration until reaching 8 breaks total",
          "expectedResult": "All 8 breaks are added successfully without errors, each showing 1-minute duration"
        },
        {
          "step": 4,
          "action": "Verify total break time calculation shows '8 minutes' and working hours show '15 hours 52 minutes'",
          "expectedResult": "Calculations are accurate and displayed correctly in the form summary"
        },
        {
          "step": 5,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template saves successfully with all 8 one-minute breaks preserved in database"
        }
      ],
      "postconditions": [
        "Template is created with all 8 minimum-duration breaks stored correctly",
        "Break calculations and working hours are accurate in database and UI",
        "Template displays properly in list view with '8 breaks' indicator",
        "Template functions correctly when used in scheduling workflows"
      ]
    },
    {
      "id": "TC-EDGE-005",
      "title": "Verify template creation behavior with rapid successive submissions (double-click scenario)",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "Administrator is logged in and on template creation form",
        "Valid template data is entered: Name 'Rapid Test', Start Time '09:00 AM', End Time '05:00 PM'",
        "Network latency is normal or slightly delayed to allow double-click scenario"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Fill all required fields with valid data",
          "expectedResult": "Form is complete and ready for submission"
        },
        {
          "step": 2,
          "action": "Rapidly double-click the 'Save Template' button within 200 milliseconds",
          "expectedResult": "Save button becomes disabled after first click showing loading state, preventing second click from registering"
        },
        {
          "step": 3,
          "action": "Wait for save operation to complete and check success message",
          "expectedResult": "Single success message appears: 'Shift template created successfully' (not duplicated)"
        },
        {
          "step": 4,
          "action": "Query database or check templates list to verify only one template was created",
          "expectedResult": "Only one instance of 'Rapid Test' template exists in the system, no duplicate records created"
        }
      ],
      "postconditions": [
        "Exactly one template record exists in database despite double-click attempt",
        "No duplicate API calls were processed by the backend",
        "Button re-enables after operation completes allowing further interactions",
        "System maintains data integrity with proper request deduplication"
      ]
    },
    {
      "id": "TC-EDGE-006",
      "title": "Verify template creation with shift spanning midnight (cross-day shift)",
      "category": "Edge Cases",
      "priority": "High",
      "preconditions": [
        "Administrator is logged in and on template creation form",
        "System supports shifts that span across midnight into the next day",
        "Time picker allows selection of times that create overnight shifts"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' and enter 'Night Shift' as template name",
          "expectedResult": "Template creation form opens and accepts the name"
        },
        {
          "step": 2,
          "action": "Set Start Time to '10:00 PM' and End Time to '06:00 AM' (next day)",
          "expectedResult": "System recognizes overnight shift and duration calculation shows '8 hours' with indicator '(next day)' or similar notation"
        },
        {
          "step": 3,
          "action": "Add break from '02:00 AM' to '02:30 AM' (during overnight period)",
          "expectedResult": "Break is added successfully and working hours recalculate to '7 hours 30 minutes'"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template saves successfully with confirmation message"
        },
        {
          "step": 5,
          "action": "Verify template in list displays correctly with overnight time range",
          "expectedResult": "Template shows '10:00 PM - 06:00 AM' with clear indication it spans to next day"
        }
      ],
      "postconditions": [
        "Overnight shift template is stored correctly with proper date/time handling in database",
        "Duration calculations account for midnight crossing accurately",
        "Template can be used in scheduling with correct date assignments",
        "Break times during overnight period are handled correctly"
      ]
    }
  ],
  "accessibility": [
    {
      "id": "TC-ACCE-001",
      "title": "Verify complete keyboard navigation through template creation form using Tab, Shift+Tab, and Enter keys",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "Administrator is logged in and on Shift Template Management page",
        "Screen reader is not required for this test (keyboard-only navigation)",
        "Browser supports standard keyboard navigation",
        "Template creation form is accessible via keyboard"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Press Tab key to navigate to 'Create New Template' button and press Enter to activate",
          "expectedResult": "Focus moves to button (visible focus indicator appears), Enter key opens template creation form, and focus automatically moves to first form field (Template Name)"
        },
        {
          "step": 2,
          "action": "Type 'Keyboard Test Shift' in Template Name field, then press Tab to move to Start Time field",
          "expectedResult": "Text is entered successfully, Tab moves focus to Start Time picker with visible focus indicator (blue outline or similar)"
        },
        {
          "step": 3,
          "action": "Use arrow keys or type to select '09:00 AM' in Start Time, press Tab to move to End Time field",
          "expectedResult": "Start Time is selected, focus moves to End Time field with clear visual focus indicator"
        },
        {
          "step": 4,
          "action": "Select '05:00 PM' in End Time, press Tab to navigate to 'Add Break' button, press Enter to activate",
          "expectedResult": "End Time is set, focus moves to Add Break button, Enter key opens break time input fields, focus moves to break start time"
        },
        {
          "step": 5,
          "action": "Enter break times using keyboard, Tab through all break fields, then Tab to 'Save Template' button",
          "expectedResult": "All break fields are accessible via Tab, focus indicators are visible throughout, focus reaches Save button"
        },
        {
          "step": 6,
          "action": "Press Enter on 'Save Template' button",
          "expectedResult": "Template is saved, success message appears and receives focus for screen reader announcement, focus management returns to templates list"
        },
        {
          "step": 7,
          "action": "Press Shift+Tab to navigate backwards through the form",
          "expectedResult": "Focus moves in reverse order through all interactive elements with visible focus indicators"
        }
      ],
      "postconditions": [
        "All interactive elements are reachable via keyboard without requiring mouse",
        "Focus order is logical and follows visual layout of the form",
        "No keyboard traps exist where user cannot escape using standard keys",
        "Template is created successfully using only keyboard input"
      ]
    },
    {
      "id": "TC-ACCE-002",
      "title": "Verify screen reader announces all form labels, errors, and success messages correctly using NVDA or JAWS",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "Administrator is logged in and on Shift Template Management page",
        "NVDA or JAWS screen reader is running and configured properly",
        "Browser is compatible with screen reader (Chrome, Firefox, or Edge)",
        "Audio output is enabled to hear screen reader announcements"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to 'Create New Template' button using screen reader navigation and activate it",
          "expectedResult": "Screen reader announces 'Create New Template, button' and when activated announces 'Template creation form, dialog' or similar landmark"
        },
        {
          "step": 2,
          "action": "Tab to Template Name field and listen to screen reader announcement",
          "expectedResult": "Screen reader announces 'Template Name, edit text, required' or 'Template Name, required field, edit' indicating field label and required status"
        },
        {
          "step": 3,
          "action": "Tab to Start Time field and listen to announcement",
          "expectedResult": "Screen reader announces 'Start Time, time picker, required' with instructions on how to interact with the time picker"
        },
        {
          "step": 4,
          "action": "Leave Template Name empty and attempt to save, then navigate to error message",
          "expectedResult": "Screen reader announces 'Error: Template name is required' with alert or assertive live region, error is associated with the field via aria-describedby"
        },
        {
          "step": 5,
          "action": "Fill all fields correctly and save template, listen for success message announcement",
          "expectedResult": "Screen reader announces 'Success: Shift template created successfully' immediately after save action completes using aria-live region"
        },
        {
          "step": 6,
          "action": "Navigate through the templates list and verify each template card is announced with complete information",
          "expectedResult": "Screen reader announces template name, time range, break count, and available actions (Edit, Delete buttons) for each template"
        }
      ],
      "postconditions": [
        "All form fields have proper labels announced by screen reader",
        "Required fields are identified as required in announcements",
        "Error messages are announced immediately and associated with relevant fields",
        "Success messages are announced using appropriate ARIA live regions",
        "All interactive elements have accessible names and roles"
      ]
    },
    {
      "id": "TC-ACCE-003",
      "title": "Verify focus management and focus trap behavior in template creation modal dialog",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "Administrator is logged in and on Shift Template Management page",
        "Template creation form opens as a modal dialog overlay",
        "Keyboard navigation is being used exclusively"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Open template creation form and verify focus automatically moves to first interactive element (Template Name field or Close button)",
          "expectedResult": "When modal opens, focus is automatically trapped inside modal and moves to first focusable element with visible focus indicator"
        },
        {
          "step": 2,
          "action": "Press Tab repeatedly until reaching the last focusable element in the modal (Save or Cancel button)",
          "expectedResult": "Focus moves through all interactive elements within modal in logical order"
        },
        {
          "step": 3,
          "action": "Press Tab again from the last element",
          "expectedResult": "Focus wraps around to the first focusable element in the modal (focus trap is working), focus does not escape to background page"
        },
        {
          "step": 4,
          "action": "Press Shift+Tab from the first element",
          "expectedResult": "Focus wraps to the last focusable element in the modal (reverse focus trap working)"
        },
        {
          "step": 5,
          "action": "Press Escape key while modal is open",
          "expectedResult": "Modal closes and focus returns to 'Create New Template' button that originally opened the modal"
        },
        {
          "step": 6,
          "action": "Open modal again, fill form, and click Save button",
          "expectedResult": "After successful save, modal closes and focus returns to appropriate element in templates list (newly created template or Create button)"
        }
      ],
      "postconditions": [
        "Focus is properly trapped within modal while open, preventing access to background content",
        "Focus returns to logical element when modal closes (trigger button or relevant list item)",
        "Escape key provides keyboard method to close modal",
        "Background content is inert and not accessible via keyboard while modal is open"
      ]
    },
    {
      "id": "TC-ACCE-004",
      "title": "Verify color contrast ratios meet WCAG 2.1 AA standards (4.5:1 for normal text, 3:1 for large text)",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "Administrator is logged in and viewing Shift Template Management page",
        "Color contrast analyzer tool is available (browser extension or standalone tool)",
        "Page is displayed at 100% zoom in standard viewing conditions"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Use color contrast analyzer to measure contrast ratio between Template Name label text and background",
          "expectedResult": "Contrast ratio is at least 4.5:1 for normal-sized text (under 18pt or 14pt bold), meeting WCAG AA standard"
        },
        {
          "step": 2,
          "action": "Measure contrast ratio of form field borders and surrounding background in default state",
          "expectedResult": "Border contrast is at least 3:1 against adjacent colors, making field boundaries clearly visible"
        },
        {
          "step": 3,
          "action": "Measure contrast ratio of error message text (red) against its background",
          "expectedResult": "Error text has contrast ratio of at least 4.5:1, ensuring readability without relying solely on color"
        },
        {
          "step": 4,
          "action": "Measure contrast ratio of success message text (green) against its background",
          "expectedResult": "Success message text has contrast ratio of at least 4.5:1"
        },
        {
          "step": 5,
          "action": "Measure contrast ratio of focus indicators (outline/border) when elements receive keyboard focus",
          "expectedResult": "Focus indicator has contrast ratio of at least 3:1 against both the focused element and adjacent background"
        },
        {
          "step": 6,
          "action": "Measure contrast of disabled button text and background",
          "expectedResult": "While disabled elements are exempt from WCAG, they should still maintain reasonable contrast (at least 3:1) for usability"
        }
      ],
      "postconditions": [
        "All text content meets minimum contrast requirements for readability",
        "Interactive elements have sufficient contrast to be easily identified",
        "Color is not the only means of conveying information (errors also have icons or text)",
        "Page is usable by people with color vision deficiencies"
      ]
    },
    {
      "id": "TC-ACCE-005",
      "title": "Verify form functionality and layout at 200% browser zoom level per WCAG 2.1 success criterion 1.4.4",
      "category": "Accessibility",
      "priority": "Medium",
      "preconditions": [
        "Administrator is logged in and on Shift Template Management page",
        "Browser zoom is initially set to 100% (default)",
        "Browser window is at standard desktop resolution (1920x1080 or similar)"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Set browser zoom to 200% using Ctrl/Cmd + Plus key or browser zoom controls",
          "expectedResult": "Page content scales to 200% without horizontal scrolling required, layout remains intact"
        },
        {
          "step": 2,
          "action": "Click 'Create New Template' button and verify modal dialog displays properly at 200% zoom",
          "expectedResult": "Modal opens and all form fields are visible without requiring horizontal scrolling, vertical scrolling is acceptable"
        },
        {
          "step": 3,
          "action": "Verify all form labels remain associated with their input fields and are fully visible",
          "expectedResult": "Labels do not overlap with fields, all text is readable, and field relationships are maintained"
        },
        {
          "step": 4,
          "action": "Fill out the form with template data and verify all interactive elements are clickable and functional",
          "expectedResult": "All buttons, dropdowns, and input fields remain functional, click targets are not obscured or overlapping"
        },
        {
          "step": 5,
          "action": "Trigger a validation error and verify error message displays properly at 200% zoom",
          "expectedResult": "Error messages are fully visible, properly positioned near relevant fields, and readable without horizontal scrolling"
        },
        {
          "step": 6,
          "action": "Save template and verify success message and templates list display correctly at 200% zoom",
          "expectedResult": "Success message is visible, templates list items are readable and properly formatted, all content remains accessible"
        }
      ],
      "postconditions": [
        "All functionality remains available at 200% zoom level",
        "No content is cut off or requires horizontal scrolling to access",
        "Text remains readable and does not overlap with other elements",
        "Interactive elements remain usable with appropriate touch/click target sizes"
      ]
    },
    {
      "id": "TC-ACCE-006",
      "title": "Verify ARIA roles, labels, and live regions are properly implemented for dynamic content updates",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "Administrator is logged in and on Shift Template Management page",
        "Browser developer tools are open to inspect ARIA attributes",
        "Screen reader is available for testing announcements (optional but recommended)"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Inspect 'Create New Template' button and verify it has appropriate ARIA attributes",
          "expectedResult": "Button has role='button' (implicit or explicit) and aria-label or accessible text content describing its purpose"
        },
        {
          "step": 2,
          "action": "Open template creation modal and inspect for proper dialog role and aria-labelledby",
          "expectedResult": "Modal has role='dialog', aria-modal='true', and aria-labelledby pointing to dialog title element"
        },
        {
          "step": 3,
          "action": "Inspect form fields for proper aria-required, aria-invalid, and aria-describedby attributes",
          "expectedResult": "Required fields have aria-required='true', invalid fields have aria-invalid='true', error messages are linked via aria-describedby"
        },
        {
          "step": 4,
          "action": "Trigger a validation error and inspect the error message container for ARIA live region",
          "expectedResult": "Error container has aria-live='assertive' or role='alert' causing immediate screen reader announcement"
        },
        {
          "step": 5,
          "action": "Save template successfully and inspect success message for ARIA live region",
          "expectedResult": "Success message has aria-live='polite' or role='status' for non-intrusive announcement"
        },
        {
          "step": 6,
          "action": "Inspect templates list for proper semantic structure and ARIA landmarks",
          "expectedResult": "List uses proper semantic HTML (ul/li or table) or has role='list', region has aria-label like 'Shift Templates List'"
        },
        {
          "step": 7,
          "action": "Inspect Edit and Delete buttons for each template for accessible names",
          "expectedResult": "Buttons have aria-label like 'Edit Morning Shift template' or 'Delete Morning Shift template' providing context beyond generic 'Edit' or 'Delete'"
        }
      ],
      "postconditions": [
        "All interactive elements have appropriate ARIA roles and accessible names",
        "Dynamic content updates are announced to screen readers via live regions",
        "Form validation states are properly communicated through ARIA attributes",
        "Modal dialogs follow ARIA authoring practices for accessibility",
        "Semantic HTML is used where possible with ARIA supplementing where needed"
      ]
    }
  ],
  "selectedTypes": {
    "functional": true,
    "negative": true,
    "edgeCases": true,
    "accessibility": true
  },
  "userStoryObject": {
    "id": "story-1",
    "title": "As Administrator, I want to perform shift template creation to achieve reusable scheduling.",
    "epicId": "epic-1",
    "persona": "Administrator",
    "priority": "High",
    "subtasks": [
      {
        "category": "Planning",
        "description": "Define the data model for shift templates.",
        "estimatedHours": 4
      },
      {
        "category": "Backend",
        "description": "Implement API endpoint for creating shift templates.",
        "estimatedHours": 6
      },
      {
        "category": "Frontend",
        "description": "Develop the user interface for shift template creation.",
        "estimatedHours": 8
      },
      {
        "category": "Testing",
        "description": "Create unit tests for the shift template creation functionality.",
        "estimatedHours": 4
      },
      {
        "category": "Documentation",
        "description": "Document the API endpoint and usage for shift template creation.",
        "estimatedHours": 3
      }
    ],
    "featureId": "feature-1",
    "testCases": [
      {
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the shift template creation page",
            "result": "Creation form is displayed"
          },
          {
            "step": 2,
            "action": "Enter valid start and end times",
            "result": "No validation errors"
          },
          {
            "step": 3,
            "action": "Submit the form",
            "result": "Template is created successfully with confirmation message"
          }
        ],
        "title": "Validate successful shift template creation"
      },
      {
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the shift template creation page",
            "result": "Creation form is displayed"
          },
          {
            "step": 2,
            "action": "Enter overlapping break times",
            "result": "Validation error is displayed"
          },
          {
            "step": 3,
            "action": "Attempt to submit the form",
            "result": "Submission is blocked with error message"
          }
        ],
        "title": "Ensure validation for overlapping break times"
      }
    ],
    "description": "CONTEXT & BACKGROUND:\nThe ability to create shift templates is essential for streamlining the scheduling process. This feature allows administrators to define shifts that can be reused, reducing the time spent on scheduling.\n\nCURRENT STATE:\nCurrently, scheduling is done manually without templates, leading to inconsistencies and increased workload.\n\nDESIRED STATE:\nAdministrators can create and manage templates, ensuring consistency and efficiency in scheduling.\n\nKEY FUNCTIONALITY:\n• Create new shift templates with start and end times.\n• Define break times within templates.\n• Edit existing templates as needed.\n• Delete templates that are no longer in use.\n\nUSER INTERACTION FLOW:\n1. Administrator navigates to the shift template management page.\n2. Administrator clicks on 'Create New Template'.\n3. Administrator inputs shift details (start time, end time, breaks).\n4. Administrator saves the template.\n5. System confirms template creation.\n6. Administrator can view the list of created templates.\n\nTECHNICAL CONSIDERATIONS:\n• Data source: ShiftTemplates table in the database.\n• Validation rules: Ensure start time is before end time.\n• API endpoints: POST /api/shift-templates for creation.\n• Security: Only authorized administrators can create templates.\n• Performance: System should handle up to 100 templates without performance degradation.\n\nOUT OF SCOPE:\n• Employee-specific scheduling is not included in this story.\n\nSUCCESS METRICS:\n• 90% of templates created without errors.",
    "storyPoints": 5,
    "personaSource": "AI Suggested",
    "acceptanceCriteria": [
      "System allows creation of shift templates with valid start and end times.",
      "System validates break times and ensures they do not overlap with shift times.",
      "System displays a confirmation message upon successful template creation.",
      "System lists all created templates for review."
    ]
  }
}