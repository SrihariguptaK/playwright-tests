{
  "storyId": "story-1",
  "storyTitle": "As Administrator, I want to perform shift template creation to achieve reusable scheduling.",
  "functional": [
    {
      "id": "TC-FUNC-001",
      "title": "Verify successful creation of shift template with valid start time, end time, and break times",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in with Administrator role and has permission to create shift templates",
        "User is on the shift template management page at /admin/shift-templates",
        "ShiftTemplates table in database is accessible and operational",
        "No existing templates with duplicate names exist in the system"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click on the 'Create New Template' button located in the top-right corner of the shift template management page",
          "expectedResult": "Shift template creation form is displayed with fields for Template Name, Start Time, End Time, and Break Times. All fields are empty and enabled for input"
        },
        {
          "step": 2,
          "action": "Enter 'Morning Shift' in the Template Name field, '08:00 AM' in Start Time field, '04:00 PM' in End Time field",
          "expectedResult": "All entered values are displayed correctly in their respective fields with no validation errors shown"
        },
        {
          "step": 3,
          "action": "Click 'Add Break' button and enter '12:00 PM' as break start time and '12:30 PM' as break end time",
          "expectedResult": "Break time fields are added to the form showing '12:00 PM - 12:30 PM' with no validation errors"
        },
        {
          "step": 4,
          "action": "Click the 'Save Template' button at the bottom of the form",
          "expectedResult": "Green success banner appears at the top of the page displaying 'Shift template created successfully'. Form is cleared and user remains on the template management page"
        },
        {
          "step": 5,
          "action": "Scroll down to view the list of shift templates on the page",
          "expectedResult": "Newly created 'Morning Shift' template appears in the templates list showing Start Time: 08:00 AM, End Time: 04:00 PM, Break: 12:00 PM - 12:30 PM"
        }
      ],
      "postconditions": [
        "New shift template 'Morning Shift' is saved in ShiftTemplates table with correct start time, end time, and break times",
        "Template appears in the list of available templates for scheduling",
        "Administrator remains logged in and on the shift template management page",
        "Template creation is logged in system audit trail with timestamp and administrator user ID"
      ]
    },
    {
      "id": "TC-FUNC-002",
      "title": "Verify creation of shift template with multiple break periods",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator with shift template creation permissions",
        "User is on the shift template creation form at /admin/shift-templates/create",
        "Database connection is active and ShiftTemplates table is writable",
        "System supports multiple break periods per shift template"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'Full Day Shift' in Template Name field, '09:00 AM' in Start Time, and '06:00 PM' in End Time",
          "expectedResult": "All fields display entered values correctly without validation errors"
        },
        {
          "step": 2,
          "action": "Click 'Add Break' button and enter first break as '11:00 AM' to '11:15 AM'",
          "expectedResult": "First break period is added and displayed as '11:00 AM - 11:15 AM' in the breaks section"
        },
        {
          "step": 3,
          "action": "Click 'Add Break' button again and enter second break as '02:00 PM' to '02:15 PM'",
          "expectedResult": "Second break period is added and displayed as '02:00 PM - 02:15 PM' below the first break. Both breaks are visible in the form"
        },
        {
          "step": 4,
          "action": "Click 'Add Break' button again and enter third break as '04:30 PM' to '04:45 PM'",
          "expectedResult": "Third break period is added and displayed as '04:30 PM - 04:45 PM'. All three breaks are visible and properly formatted"
        },
        {
          "step": 5,
          "action": "Click 'Save Template' button",
          "expectedResult": "Success message 'Shift template created successfully' appears in green banner. Template is saved with all three break periods"
        }
      ],
      "postconditions": [
        "Shift template 'Full Day Shift' is saved in database with three distinct break periods",
        "All break times are stored correctly and associated with the template",
        "Template appears in templates list showing all three break periods",
        "System allows future editing of all break periods"
      ]
    },
    {
      "id": "TC-FUNC-003",
      "title": "Verify editing of existing shift template with updated times",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator with edit permissions",
        "At least one shift template named 'Evening Shift' exists in the system with Start Time: 02:00 PM, End Time: 10:00 PM",
        "User is on the shift template management page viewing the list of templates",
        "Edit functionality is enabled for existing templates"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate 'Evening Shift' template in the list and click the 'Edit' icon button next to it",
          "expectedResult": "Edit form opens displaying current values: Template Name: 'Evening Shift', Start Time: 02:00 PM, End Time: 10:00 PM"
        },
        {
          "step": 2,
          "action": "Change Start Time from '02:00 PM' to '03:00 PM' and End Time from '10:00 PM' to '11:00 PM'",
          "expectedResult": "Updated times are displayed in the fields with no validation errors"
        },
        {
          "step": 3,
          "action": "Click 'Add Break' button and add break time '06:00 PM' to '06:30 PM'",
          "expectedResult": "Break period is added to the template showing '06:00 PM - 06:30 PM'"
        },
        {
          "step": 4,
          "action": "Click 'Update Template' button",
          "expectedResult": "Success message 'Shift template updated successfully' appears in green banner at top of page"
        },
        {
          "step": 5,
          "action": "View the 'Evening Shift' template in the templates list",
          "expectedResult": "Template displays updated values: Start Time: 03:00 PM, End Time: 11:00 PM, Break: 06:00 PM - 06:30 PM"
        }
      ],
      "postconditions": [
        "Evening Shift template is updated in ShiftTemplates table with new start time, end time, and break",
        "Previous version of template is archived or overwritten based on system configuration",
        "Updated template is immediately available for use in scheduling",
        "Update action is logged in audit trail with timestamp and administrator ID"
      ]
    },
    {
      "id": "TC-FUNC-004",
      "title": "Verify deletion of shift template that is no longer in use",
      "category": "Functional",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator with delete permissions",
        "Shift template named 'Test Template' exists and is not currently assigned to any active schedules",
        "User is on the shift template management page",
        "System allows deletion of unused templates"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate 'Test Template' in the templates list and click the 'Delete' icon button (trash icon) next to it",
          "expectedResult": "Confirmation modal dialog appears with message 'Are you sure you want to delete this shift template? This action cannot be undone.' with 'Cancel' and 'Delete' buttons"
        },
        {
          "step": 2,
          "action": "Click 'Delete' button in the confirmation modal",
          "expectedResult": "Modal closes and success message 'Shift template deleted successfully' appears in green banner at top of page"
        },
        {
          "step": 3,
          "action": "Scroll through the templates list to verify deletion",
          "expectedResult": "'Test Template' no longer appears in the list of shift templates. List is updated in real-time without page refresh"
        }
      ],
      "postconditions": [
        "Test Template is removed from ShiftTemplates table in database",
        "Template is no longer available for selection in scheduling workflows",
        "Deletion action is logged in system audit trail",
        "User remains on shift template management page"
      ]
    },
    {
      "id": "TC-FUNC-005",
      "title": "Verify viewing complete list of all created shift templates with pagination",
      "category": "Functional",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "At least 15 shift templates exist in the system to test pagination",
        "User navigates to shift template management page at /admin/shift-templates",
        "Templates list displays 10 items per page by default"
      ],
      "steps": [
        {
          "step": 1,
          "action": "View the shift templates list on the management page",
          "expectedResult": "First 10 templates are displayed in a table format showing columns: Template Name, Start Time, End Time, Break Times, Actions. Pagination controls are visible at bottom"
        },
        {
          "step": 2,
          "action": "Verify each template row displays complete information including template name, start time, end time, and break times",
          "expectedResult": "All displayed templates show complete and accurate information in readable format with proper time formatting (HH:MM AM/PM)"
        },
        {
          "step": 3,
          "action": "Click 'Next' button or page '2' in pagination controls",
          "expectedResult": "Page 2 loads showing templates 11-15. URL updates to include page parameter. Previous page button becomes enabled"
        },
        {
          "step": 4,
          "action": "Click 'Previous' button to return to page 1",
          "expectedResult": "First 10 templates are displayed again. Page indicator shows page 1 is active"
        }
      ],
      "postconditions": [
        "All templates remain in database unchanged",
        "User can navigate between pages to view all templates",
        "Template list accurately reflects current state of ShiftTemplates table",
        "Administrator remains logged in on template management page"
      ]
    }
  ],
  "negative": [
    {
      "id": "TC-NEGA-001",
      "title": "Verify validation error when start time is after end time",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on the shift template creation form",
        "Form validation is enabled and enforces time logic rules",
        "No data has been entered in the form yet"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'Invalid Shift' in Template Name field",
          "expectedResult": "Template name is accepted and displayed in the field"
        },
        {
          "step": 2,
          "action": "Enter '06:00 PM' in Start Time field and '08:00 AM' in End Time field (end time is before start time)",
          "expectedResult": "Both times are entered in their respective fields"
        },
        {
          "step": 3,
          "action": "Click outside the End Time field or press Tab to trigger validation",
          "expectedResult": "Red validation error message appears below End Time field stating 'End time must be after start time' or similar. End Time field is highlighted with red border"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Form submission is blocked. Error message persists. Red error banner appears at top stating 'Please fix validation errors before submitting'. Template is not saved"
        }
      ],
      "postconditions": [
        "No template is created in ShiftTemplates table",
        "User remains on the creation form with entered data still visible",
        "Validation error messages remain displayed",
        "Form fields retain entered values for correction"
      ]
    },
    {
      "id": "TC-NEGA-002",
      "title": "Verify validation error when break time overlaps with shift start or end time",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on shift template creation form",
        "System validates that break times must fall within shift start and end times",
        "Break time validation is active"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'Overlap Test Shift' in Template Name, '09:00 AM' in Start Time, '05:00 PM' in End Time",
          "expectedResult": "All fields accept the values without errors"
        },
        {
          "step": 2,
          "action": "Click 'Add Break' and enter break start time as '08:00 AM' and break end time as '08:30 AM' (break starts before shift starts)",
          "expectedResult": "Break times are entered in the fields"
        },
        {
          "step": 3,
          "action": "Click outside the break end time field or press Tab",
          "expectedResult": "Red validation error appears below break time fields stating 'Break time must be within shift hours (09:00 AM - 05:00 PM)'. Break fields are highlighted with red border"
        },
        {
          "step": 4,
          "action": "Attempt to click 'Save Template' button",
          "expectedResult": "Form submission is prevented. Error banner displays 'Cannot save template with invalid break times'. Template is not created"
        }
      ],
      "postconditions": [
        "No template is saved to database",
        "Validation errors remain visible on form",
        "User can correct break times and resubmit",
        "Form data is retained for correction"
      ]
    },
    {
      "id": "TC-NEGA-003",
      "title": "Verify error handling when attempting to create template with empty required fields",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on shift template creation form at /admin/shift-templates/create",
        "All form fields are empty",
        "Required field validation is enabled"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Leave Template Name field empty, leave Start Time field empty, leave End Time field empty",
          "expectedResult": "All fields remain empty with no pre-filled values"
        },
        {
          "step": 2,
          "action": "Click 'Save Template' button directly without entering any data",
          "expectedResult": "Form submission is blocked. Red validation errors appear below each required field: 'Template name is required', 'Start time is required', 'End time is required'"
        },
        {
          "step": 3,
          "action": "Verify error banner at top of form",
          "expectedResult": "Red error banner displays 'Please fill in all required fields' at the top of the page"
        },
        {
          "step": 4,
          "action": "Check database for any created templates",
          "expectedResult": "No new template record exists in ShiftTemplates table"
        }
      ],
      "postconditions": [
        "No template is created in database",
        "User remains on creation form with validation errors displayed",
        "All required fields are highlighted with red borders",
        "Form is ready for user to enter valid data"
      ]
    },
    {
      "id": "TC-NEGA-004",
      "title": "Verify error when unauthorized user attempts to access shift template creation",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in with 'Employee' role (non-administrator)",
        "Employee role does not have permissions to create shift templates",
        "User attempts to navigate directly to /admin/shift-templates/create URL",
        "Authorization middleware is active and enforcing permissions"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Type '/admin/shift-templates/create' in browser address bar and press Enter",
          "expectedResult": "Page does not load. User is redirected to error page or dashboard"
        },
        {
          "step": 2,
          "action": "Verify the displayed error message",
          "expectedResult": "Error page displays '403 Forbidden - You do not have permission to access this resource' or similar authorization error message"
        },
        {
          "step": 3,
          "action": "Verify user is redirected to appropriate page",
          "expectedResult": "After 3 seconds, user is automatically redirected to their dashboard or previous page with error notification 'Access denied: Administrator privileges required'"
        }
      ],
      "postconditions": [
        "User cannot access shift template creation functionality",
        "No template creation form is displayed to unauthorized user",
        "Access attempt is logged in security audit log with user ID and timestamp",
        "User remains logged in but on authorized page only"
      ]
    },
    {
      "id": "TC-NEGA-005",
      "title": "Verify error handling when attempting to delete a shift template currently in use",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "Shift template named 'Active Shift' exists and is currently assigned to 5 active employee schedules",
        "User is on shift template management page",
        "System prevents deletion of templates in active use"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate 'Active Shift' template in the list and click the 'Delete' icon button",
          "expectedResult": "Confirmation modal appears asking 'Are you sure you want to delete this shift template?'"
        },
        {
          "step": 2,
          "action": "Click 'Delete' button in the confirmation modal",
          "expectedResult": "Modal closes and red error banner appears at top of page stating 'Cannot delete template: This template is currently assigned to 5 active schedules. Please remove all assignments before deleting.'"
        },
        {
          "step": 3,
          "action": "Verify template still exists in the list",
          "expectedResult": "'Active Shift' template remains in the templates list unchanged with all original data intact"
        },
        {
          "step": 4,
          "action": "Check database to confirm template was not deleted",
          "expectedResult": "Template record still exists in ShiftTemplates table with active status"
        }
      ],
      "postconditions": [
        "Template remains in database and is not deleted",
        "All active schedule assignments remain intact",
        "Error message guides administrator to remove assignments first",
        "Template list displays unchanged"
      ]
    },
    {
      "id": "TC-NEGA-006",
      "title": "Verify error handling when database connection fails during template creation",
      "category": "Negative",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on shift template creation form",
        "Database connection can be simulated to fail or timeout",
        "Error handling for database failures is implemented"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter valid data: Template Name 'DB Test Shift', Start Time '09:00 AM', End Time '05:00 PM'",
          "expectedResult": "All data is entered correctly with no validation errors"
        },
        {
          "step": 2,
          "action": "Simulate database connection failure or disconnect database, then click 'Save Template' button",
          "expectedResult": "Loading spinner appears briefly, then red error banner displays 'Unable to save template: Database connection error. Please try again later.'"
        },
        {
          "step": 3,
          "action": "Verify form state after error",
          "expectedResult": "Form data is retained in all fields. User can attempt to save again. 'Save Template' button remains enabled"
        },
        {
          "step": 4,
          "action": "Check database for any partial or corrupted records",
          "expectedResult": "No template record exists in database. No partial data was saved. Database integrity is maintained"
        }
      ],
      "postconditions": [
        "No template is created in database",
        "User's entered data is preserved in form for retry",
        "Error is logged in application error log with timestamp and error details",
        "User can retry submission once database connection is restored"
      ]
    }
  ],
  "edgeCases": [
    {
      "id": "TC-EDGE-001",
      "title": "Verify shift template creation with minimum valid time difference (1 minute between start and end)",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on shift template creation form",
        "System allows minimum 1-minute shift duration",
        "No minimum duration validation beyond start < end exists"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'Minimal Shift' in Template Name field",
          "expectedResult": "Template name is accepted"
        },
        {
          "step": 2,
          "action": "Enter '09:00 AM' in Start Time field and '09:01 AM' in End Time field (1 minute difference)",
          "expectedResult": "Both times are accepted without validation errors"
        },
        {
          "step": 3,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template is saved successfully. Success message 'Shift template created successfully' appears"
        },
        {
          "step": 4,
          "action": "View the created template in the templates list",
          "expectedResult": "Template displays correctly showing Start Time: 09:00 AM, End Time: 09:01 AM, Duration: 1 minute"
        }
      ],
      "postconditions": [
        "Template is saved in database with 1-minute duration",
        "Template is available for use in scheduling",
        "System correctly calculates and displays duration",
        "No data corruption or calculation errors occur"
      ]
    },
    {
      "id": "TC-EDGE-002",
      "title": "Verify shift template creation with maximum duration (23 hours 59 minutes)",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on shift template creation form",
        "System supports shifts up to but not exceeding 24 hours",
        "Time picker allows selection of any valid time within 24-hour period"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'Maximum Duration Shift' in Template Name field",
          "expectedResult": "Template name is accepted"
        },
        {
          "step": 2,
          "action": "Enter '12:00 AM' (midnight) in Start Time field and '11:59 PM' in End Time field",
          "expectedResult": "Both times are accepted. System calculates duration as 23 hours 59 minutes"
        },
        {
          "step": 3,
          "action": "Add break time from '12:00 PM' to '12:30 PM'",
          "expectedResult": "Break is added successfully within the shift timeframe"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template is saved successfully with success confirmation message"
        },
        {
          "step": 5,
          "action": "Verify template in list shows correct duration calculation",
          "expectedResult": "Template displays Start: 12:00 AM, End: 11:59 PM, Duration: 23h 59m, Break: 12:00 PM - 12:30 PM"
        }
      ],
      "postconditions": [
        "Template with maximum duration is saved correctly in database",
        "Duration calculations are accurate",
        "Template can be used for scheduling without errors",
        "Break times are correctly associated with the template"
      ]
    },
    {
      "id": "TC-EDGE-003",
      "title": "Verify shift template creation with template name containing special characters and maximum length",
      "category": "Edge Cases",
      "priority": "Low",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on shift template creation form",
        "Template name field has maximum character limit of 100 characters",
        "System accepts alphanumeric and special characters in template names"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter template name with exactly 100 characters including special characters: 'Shift-Template_2024!@#$%^&*()[]{}|;:,.<>?/~`+=Morning-Evening-Night-Rotation-Schedule-For-Healthcare-Workers-v1.0'",
          "expectedResult": "Template name field accepts all 100 characters. Character counter shows '100/100' if present"
        },
        {
          "step": 2,
          "action": "Enter valid Start Time '08:00 AM' and End Time '04:00 PM'",
          "expectedResult": "Times are accepted without errors"
        },
        {
          "step": 3,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template is saved successfully. Success message appears"
        },
        {
          "step": 4,
          "action": "Locate and view the saved template in the templates list",
          "expectedResult": "Template name is displayed correctly with all special characters intact. Name is not truncated or corrupted. Full name is visible on hover or in expanded view"
        }
      ],
      "postconditions": [
        "Template is saved with full 100-character name including special characters",
        "Special characters are properly encoded and stored in database",
        "Template name displays correctly in all UI locations",
        "No SQL injection or XSS vulnerabilities are exploited"
      ]
    },
    {
      "id": "TC-EDGE-004",
      "title": "Verify system performance when creating the 100th shift template (maximum limit)",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "Exactly 99 shift templates already exist in the system",
        "System performance requirement states support for up to 100 templates without degradation",
        "User is on shift template creation form"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter '100th Template' in Template Name, '10:00 AM' in Start Time, '06:00 PM' in End Time",
          "expectedResult": "All fields accept the data without performance lag"
        },
        {
          "step": 2,
          "action": "Click 'Save Template' button and measure response time",
          "expectedResult": "Template is saved within 2 seconds. Success message appears promptly without delay"
        },
        {
          "step": 3,
          "action": "Navigate to templates list page and verify load time",
          "expectedResult": "Templates list page loads within 3 seconds displaying all 100 templates. Pagination works smoothly"
        },
        {
          "step": 4,
          "action": "Attempt to create a 101st template by clicking 'Create New Template' button",
          "expectedResult": "System either allows creation (if no hard limit) or displays message 'Maximum template limit (100) reached. Please delete unused templates before creating new ones.'"
        }
      ],
      "postconditions": [
        "100 templates exist in system without performance degradation",
        "All templates are accessible and functional",
        "System enforces maximum limit if configured",
        "Performance metrics meet specified requirements"
      ]
    },
    {
      "id": "TC-EDGE-005",
      "title": "Verify shift template creation with break time exactly at shift boundaries",
      "category": "Edge Cases",
      "priority": "Low",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on shift template creation form",
        "System allows breaks that start at shift start time or end at shift end time",
        "Break validation checks for within-bounds timing"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'Boundary Break Shift' in Template Name, '09:00 AM' in Start Time, '05:00 PM' in End Time",
          "expectedResult": "All fields accept the values"
        },
        {
          "step": 2,
          "action": "Click 'Add Break' and enter break start time as '09:00 AM' (exactly at shift start) and break end time as '09:15 AM'",
          "expectedResult": "Break times are accepted. Validation passes as break is technically within shift hours"
        },
        {
          "step": 3,
          "action": "Click 'Add Break' again and enter second break start time as '04:45 PM' and break end time as '05:00 PM' (exactly at shift end)",
          "expectedResult": "Second break is accepted. Both breaks are displayed in the form"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template is saved successfully with both boundary breaks. Success message appears"
        },
        {
          "step": 5,
          "action": "View template in list to verify break times are stored correctly",
          "expectedResult": "Template shows both breaks: 09:00 AM - 09:15 AM and 04:45 PM - 05:00 PM without data corruption"
        }
      ],
      "postconditions": [
        "Template is saved with breaks at exact shift boundaries",
        "Break times are stored accurately in database",
        "No calculation errors occur with boundary break times",
        "Template functions correctly in scheduling workflows"
      ]
    },
    {
      "id": "TC-EDGE-006",
      "title": "Verify rapid consecutive template creation (stress test for concurrent operations)",
      "category": "Edge Cases",
      "priority": "Low",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on shift template management page",
        "System can handle rapid successive API calls",
        "No rate limiting is enforced for administrators"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button and quickly enter 'Rapid Test 1', Start: '08:00 AM', End: '04:00 PM', then click Save",
          "expectedResult": "First template is saved successfully"
        },
        {
          "step": 2,
          "action": "Immediately click 'Create New Template' again and enter 'Rapid Test 2', Start: '09:00 AM', End: '05:00 PM', then click Save within 2 seconds",
          "expectedResult": "Second template is saved successfully without conflicts or errors"
        },
        {
          "step": 3,
          "action": "Repeat step 2 for 'Rapid Test 3' with Start: '10:00 AM', End: '06:00 PM' within another 2 seconds",
          "expectedResult": "Third template is saved successfully. All three templates are created within 6 seconds total"
        },
        {
          "step": 4,
          "action": "Verify all three templates appear in the templates list with correct data",
          "expectedResult": "All three templates ('Rapid Test 1', 'Rapid Test 2', 'Rapid Test 3') are displayed in the list with accurate start and end times. No data corruption or duplicate entries exist"
        }
      ],
      "postconditions": [
        "All three templates are saved correctly in database with unique IDs",
        "No race conditions or data conflicts occurred",
        "System handled rapid successive operations without errors",
        "Database integrity is maintained with proper transaction handling"
      ]
    }
  ],
  "accessibility": [
    {
      "id": "TC-ACCE-001",
      "title": "Verify complete keyboard navigation through shift template creation form",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on shift template creation form",
        "Keyboard navigation is enabled in browser",
        "No mouse or pointing device is used during test"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Press Tab key from browser address bar to navigate to first focusable element on page",
          "expectedResult": "Focus moves to 'Create New Template' heading or skip link with visible focus indicator (blue outline or highlight)"
        },
        {
          "step": 2,
          "action": "Continue pressing Tab to navigate through Template Name field, Start Time field, End Time field, and 'Add Break' button",
          "expectedResult": "Focus moves sequentially through all form elements in logical order. Each element shows clear visible focus indicator. Focus order matches visual layout"
        },
        {
          "step": 3,
          "action": "Press Tab to reach 'Add Break' button and press Enter or Space key to activate",
          "expectedResult": "Break time fields are added to form. Focus automatically moves to first break time field"
        },
        {
          "step": 4,
          "action": "Press Tab to navigate through break start time and break end time fields",
          "expectedResult": "Focus moves through break fields with visible indicators. Tab order includes newly added break fields"
        },
        {
          "step": 5,
          "action": "Press Tab to reach 'Save Template' button and press Enter to submit form",
          "expectedResult": "Form is submitted successfully. Success message receives focus and is announced. User can Tab to navigate away from success message"
        },
        {
          "step": 6,
          "action": "Press Shift+Tab to navigate backwards through the form",
          "expectedResult": "Focus moves in reverse order through all form elements correctly"
        }
      ],
      "postconditions": [
        "All interactive elements are keyboard accessible",
        "Focus order is logical and matches visual layout",
        "No keyboard traps exist in the form",
        "User can complete entire workflow using only keyboard"
      ]
    },
    {
      "id": "TC-ACCE-002",
      "title": "Verify screen reader announces all form labels, errors, and success messages correctly",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "Screen reader (NVDA, JAWS, or VoiceOver) is active and running",
        "User is on shift template creation form",
        "Screen reader is in forms mode or focus mode"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to Template Name field using screen reader navigation commands",
          "expectedResult": "Screen reader announces 'Template Name, edit text, required' or similar. Label is properly associated with input field"
        },
        {
          "step": 2,
          "action": "Navigate to Start Time field",
          "expectedResult": "Screen reader announces 'Start Time, time picker, required' with instructions on how to use the time picker"
        },
        {
          "step": 3,
          "action": "Navigate to End Time field",
          "expectedResult": "Screen reader announces 'End Time, time picker, required' with proper field type and state"
        },
        {
          "step": 4,
          "action": "Submit form with empty fields to trigger validation errors",
          "expectedResult": "Screen reader announces 'Error: Template name is required' for each field with error. Error messages are associated with their respective fields using aria-describedby"
        },
        {
          "step": 5,
          "action": "Fill form with valid data and submit",
          "expectedResult": "Screen reader announces 'Success: Shift template created successfully' or similar. Success message is in an ARIA live region and announced automatically"
        },
        {
          "step": 6,
          "action": "Navigate to 'Add Break' button",
          "expectedResult": "Screen reader announces 'Add Break, button' with clear indication of button purpose"
        }
      ],
      "postconditions": [
        "All form labels are properly announced by screen reader",
        "Error messages are associated with form fields and announced",
        "Success messages are announced via ARIA live regions",
        "Screen reader users can understand and complete the form independently"
      ]
    },
    {
      "id": "TC-ACCE-003",
      "title": "Verify sufficient color contrast ratios for all text and interactive elements (WCAG 2.1 AA compliance)",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is on shift template creation form",
        "Color contrast analyzer tool is available (browser extension or standalone tool)",
        "Page is displayed at 100% zoom in standard browser",
        "Default theme/color scheme is active"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Use color contrast analyzer to measure contrast ratio between Template Name label text and background",
          "expectedResult": "Contrast ratio is at least 4.5:1 for normal text (or 3:1 for large text 18pt+). Meets WCAG 2.1 AA standards"
        },
        {
          "step": 2,
          "action": "Measure contrast ratio for form input field borders and backgrounds",
          "expectedResult": "Input field borders have at least 3:1 contrast ratio against adjacent colors. Input text has at least 4.5:1 contrast against background"
        },
        {
          "step": 3,
          "action": "Measure contrast ratio for error messages (red text)",
          "expectedResult": "Error message text has at least 4.5:1 contrast ratio against background. Error indication does not rely on color alone (includes icon or text indicator)"
        },
        {
          "step": 4,
          "action": "Measure contrast ratio for 'Save Template' button in normal, hover, and focus states",
          "expectedResult": "Button text has at least 4.5:1 contrast in all states. Button background has at least 3:1 contrast against page background"
        },
        {
          "step": 5,
          "action": "Measure contrast ratio for success message (green banner)",
          "expectedResult": "Success message text has at least 4.5:1 contrast against green background. Success indication includes icon, not just color"
        }
      ],
      "postconditions": [
        "All text meets WCAG 2.1 AA contrast requirements (4.5:1 for normal text)",
        "Interactive elements have sufficient contrast (3:1 minimum)",
        "Color is not the only means of conveying information",
        "Form is usable by users with color vision deficiencies"
      ]
    },
    {
      "id": "TC-ACCE-004",
      "title": "Verify form remains functional and readable at 200% browser zoom level",
      "category": "Accessibility",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on shift template creation form",
        "Browser zoom is set to 100% initially",
        "Browser window is at standard desktop resolution (1920x1080 or similar)"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Press Ctrl and + (or Cmd and + on Mac) repeatedly to zoom browser to 200%",
          "expectedResult": "Page zooms to 200%. All content scales proportionally"
        },
        {
          "step": 2,
          "action": "Verify all form labels and field labels are fully visible and readable",
          "expectedResult": "All text is readable without horizontal scrolling. Text does not overlap or get cut off. Labels remain associated with their fields"
        },
        {
          "step": 3,
          "action": "Verify all form input fields are accessible and functional",
          "expectedResult": "Input fields are fully visible and functional. Time pickers open correctly. No UI elements are hidden or inaccessible"
        },
        {
          "step": 4,
          "action": "Scroll vertically through the form to access all elements",
          "expectedResult": "Vertical scrolling works smoothly. All form elements are accessible without horizontal scrolling. No content is lost or hidden"
        },
        {
          "step": 5,
          "action": "Complete form entry and submit at 200% zoom",
          "expectedResult": "Form can be completed successfully. All buttons are clickable. Success message is visible and readable at 200% zoom"
        }
      ],
      "postconditions": [
        "Form is fully functional at 200% zoom level",
        "No horizontal scrolling is required to view content",
        "All interactive elements remain accessible",
        "Text remains readable and does not overlap"
      ]
    },
    {
      "id": "TC-ACCE-005",
      "title": "Verify proper ARIA labels and roles for time picker components",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is on shift template creation form",
        "Browser developer tools are open to inspect ARIA attributes",
        "Screen reader is available for testing announcements",
        "Time picker components are custom-built (not native HTML5 time inputs)"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Inspect Start Time field in browser developer tools and check for ARIA attributes",
          "expectedResult": "Time picker has role='combobox' or role='textbox', aria-label='Start Time', aria-required='true', and aria-describedby pointing to help text or format instructions"
        },
        {
          "step": 2,
          "action": "Click or focus on Start Time field to open time picker dropdown",
          "expectedResult": "Dropdown has role='listbox' or role='dialog'. aria-expanded='true' is set on the trigger. Focus moves to first selectable time option"
        },
        {
          "step": 3,
          "action": "Navigate through time options using arrow keys",
          "expectedResult": "Each time option has role='option' and aria-selected state. Screen reader announces selected time as user navigates. Current selection is clearly indicated"
        },
        {
          "step": 4,
          "action": "Press Escape key to close time picker",
          "expectedResult": "Time picker closes. aria-expanded='false' is set. Focus returns to time input field. Screen reader announces closure"
        },
        {
          "step": 5,
          "action": "Trigger validation error on time field and inspect error message",
          "expectedResult": "Error message has role='alert' or is in aria-live='polite' region. Field has aria-invalid='true' and aria-describedby pointing to error message ID"
        }
      ],
      "postconditions": [
        "All ARIA attributes are properly implemented on time picker components",
        "Screen reader users can understand and operate time pickers",
        "ARIA states update dynamically as user interacts with components",
        "Error states are properly communicated via ARIA"
      ]
    },
    {
      "id": "TC-ACCE-006",
      "title": "Verify focus management when adding and removing break time fields dynamically",
      "category": "Accessibility",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on shift template creation form",
        "No break fields are currently added to the form",
        "Keyboard-only navigation is being used"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Tab to 'Add Break' button and press Enter to add first break field",
          "expectedResult": "Break fields are added to form. Focus automatically moves to the first break start time field. Screen reader announces 'Break start time field added'"
        },
        {
          "step": 2,
          "action": "Tab through break start time and break end time fields",
          "expectedResult": "Focus moves logically through break fields. Each field has visible focus indicator and is announced by screen reader"
        },
        {
          "step": 3,
          "action": "Tab to 'Remove Break' button (X icon) next to the break fields and press Enter",
          "expectedResult": "Break fields are removed from form. Focus moves to 'Add Break' button or next logical element. Screen reader announces 'Break removed'"
        },
        {
          "step": 4,
          "action": "Add multiple breaks (3 breaks) and verify focus management for each",
          "expectedResult": "Each time 'Add Break' is activated, focus moves to the newly added break's first field. Tab order includes all break fields in sequence"
        },
        {
          "step": 5,
          "action": "Remove the middle break (2nd of 3) and verify focus behavior",
          "expectedResult": "Focus moves to a logical location (next break's remove button or previous break field). Remaining breaks maintain proper tab order. No focus is lost"
        }
      ],
      "postconditions": [
        "Focus is managed properly when adding dynamic form fields",
        "Focus is managed properly when removing dynamic form fields",
        "No keyboard traps are created by dynamic content",
        "Screen reader announces changes to form structure"
      ]
    }
  ],
  "selectedTypes": {
    "functional": true,
    "negative": true,
    "edgeCases": true,
    "accessibility": true
  },
  "userStoryObject": {
    "id": "story-1",
    "title": "As Administrator, I want to perform shift template creation to achieve reusable scheduling.",
    "epicId": "epic-1",
    "persona": "Administrator",
    "priority": "High",
    "subtasks": [
      {
        "category": "Planning",
        "description": "Define the data model for shift templates.",
        "estimatedHours": 4
      },
      {
        "category": "Backend",
        "description": "Implement API endpoint for creating shift templates.",
        "estimatedHours": 6
      },
      {
        "category": "Frontend",
        "description": "Develop the user interface for shift template creation.",
        "estimatedHours": 8
      },
      {
        "category": "Testing",
        "description": "Create unit tests for the shift template creation functionality.",
        "estimatedHours": 4
      },
      {
        "category": "Documentation",
        "description": "Document the API endpoint and usage for shift template creation.",
        "estimatedHours": 3
      }
    ],
    "featureId": "feature-1",
    "testCases": [
      {
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the shift template creation page",
            "result": "Creation form is displayed"
          },
          {
            "step": 2,
            "action": "Enter valid start and end times",
            "result": "No validation errors"
          },
          {
            "step": 3,
            "action": "Submit the form",
            "result": "Template is created successfully with confirmation message"
          }
        ],
        "title": "Validate successful shift template creation"
      },
      {
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the shift template creation page",
            "result": "Creation form is displayed"
          },
          {
            "step": 2,
            "action": "Enter overlapping break times",
            "result": "Validation error is displayed"
          },
          {
            "step": 3,
            "action": "Attempt to submit the form",
            "result": "Submission is blocked with error message"
          }
        ],
        "title": "Ensure validation for overlapping break times"
      }
    ],
    "description": "CONTEXT & BACKGROUND:\nThe ability to create shift templates is essential for streamlining the scheduling process. This feature allows administrators to define shifts that can be reused, reducing the time spent on scheduling.\n\nCURRENT STATE:\nCurrently, scheduling is done manually without templates, leading to inconsistencies and increased workload.\n\nDESIRED STATE:\nAdministrators can create and manage templates, ensuring consistency and efficiency in scheduling.\n\nKEY FUNCTIONALITY:\n• Create new shift templates with start and end times.\n• Define break times within templates.\n• Edit existing templates as needed.\n• Delete templates that are no longer in use.\n\nUSER INTERACTION FLOW:\n1. Administrator navigates to the shift template management page.\n2. Administrator clicks on 'Create New Template'.\n3. Administrator inputs shift details (start time, end time, breaks).\n4. Administrator saves the template.\n5. System confirms template creation.\n6. Administrator can view the list of created templates.\n\nTECHNICAL CONSIDERATIONS:\n• Data source: ShiftTemplates table in the database.\n• Validation rules: Ensure start time is before end time.\n• API endpoints: POST /api/shift-templates for creation.\n• Security: Only authorized administrators can create templates.\n• Performance: System should handle up to 100 templates without performance degradation.\n\nOUT OF SCOPE:\n• Employee-specific scheduling is not included in this story.\n\nSUCCESS METRICS:\n• 90% of templates created without errors.",
    "storyPoints": 5,
    "personaSource": "AI Suggested",
    "acceptanceCriteria": [
      "System allows creation of shift templates with valid start and end times.",
      "System validates break times and ensures they do not overlap with shift times.",
      "System displays a confirmation message upon successful template creation.",
      "System lists all created templates for review."
    ]
  }
}