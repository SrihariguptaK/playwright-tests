{
  "storyId": "db-story-story-1",
  "storyTitle": "As Administrator, I want to perform shift template creation to achieve reusable scheduling.",
  "functional": [
    {
      "id": "TC-FUNC-001",
      "title": "Verify successful creation of shift template with valid start time, end time, and break times",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in with Administrator role and has permissions to create shift templates",
        "User is on the Shift Template Management page at /shift-templates",
        "Database has less than 100 existing shift templates to ensure performance",
        "System time is synchronized and displaying correct timezone"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click on the 'Create New Template' button located in the top-right corner of the page",
          "expectedResult": "Shift template creation form modal opens with empty fields for Template Name, Start Time, End Time, and Break Times"
        },
        {
          "step": 2,
          "action": "Enter 'Morning Shift' in the Template Name field",
          "expectedResult": "Text 'Morning Shift' appears in the Template Name field with no validation errors"
        },
        {
          "step": 3,
          "action": "Select '08:00 AM' from the Start Time dropdown picker",
          "expectedResult": "Start Time field displays '08:00 AM' and field is highlighted as filled"
        },
        {
          "step": 4,
          "action": "Select '05:00 PM' from the End Time dropdown picker",
          "expectedResult": "End Time field displays '05:00 PM' and no validation error appears since end time is after start time"
        },
        {
          "step": 5,
          "action": "Click 'Add Break' button and enter break time from '12:00 PM' to '01:00 PM'",
          "expectedResult": "Break time entry appears showing '12:00 PM - 01:00 PM' with no overlap validation errors"
        },
        {
          "step": 6,
          "action": "Click the 'Save Template' button at the bottom of the form",
          "expectedResult": "Green success banner appears at top of page displaying 'Shift template created successfully' and modal closes automatically"
        },
        {
          "step": 7,
          "action": "Verify the newly created template appears in the shift templates list",
          "expectedResult": "Template 'Morning Shift' is visible in the list showing Start Time: 08:00 AM, End Time: 05:00 PM, Break: 12:00 PM - 01:00 PM"
        }
      ],
      "postconditions": [
        "New shift template 'Morning Shift' is saved in ShiftTemplates database table with all entered details",
        "Template appears in the templates list and is available for selection in scheduling workflows",
        "Administrator remains on the Shift Template Management page with updated list visible",
        "Success confirmation message is logged in system audit trail with timestamp and admin user ID"
      ]
    },
    {
      "id": "TC-FUNC-002",
      "title": "Verify administrator can create shift template with multiple break periods",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator with shift template creation permissions",
        "User is on the Shift Template Management page",
        "No existing template with the name 'Extended Shift' exists in the system"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens with all required fields visible"
        },
        {
          "step": 2,
          "action": "Enter 'Extended Shift' as Template Name, '07:00 AM' as Start Time, and '11:00 PM' as End Time",
          "expectedResult": "All fields are populated correctly with no validation errors"
        },
        {
          "step": 3,
          "action": "Click 'Add Break' button and add first break from '10:00 AM' to '10:15 AM'",
          "expectedResult": "First break entry appears in the breaks section showing '10:00 AM - 10:15 AM'"
        },
        {
          "step": 4,
          "action": "Click 'Add Break' button again and add second break from '02:00 PM' to '02:30 PM'",
          "expectedResult": "Second break entry appears below first break showing '02:00 PM - 02:30 PM' with no overlap errors"
        },
        {
          "step": 5,
          "action": "Click 'Add Break' button again and add third break from '06:00 PM' to '06:30 PM'",
          "expectedResult": "Third break entry appears showing '06:00 PM - 06:30 PM', all breaks are within shift time boundaries"
        },
        {
          "step": 6,
          "action": "Click 'Save Template' button",
          "expectedResult": "Success message 'Shift template created successfully' appears and form closes"
        }
      ],
      "postconditions": [
        "Template 'Extended Shift' is saved with all three break periods in the database",
        "Template appears in list showing all break times correctly",
        "Total break duration is calculated and displayed (1 hour 15 minutes total)"
      ]
    },
    {
      "id": "TC-FUNC-003",
      "title": "Verify administrator can edit an existing shift template and changes are saved",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "At least one shift template named 'Morning Shift' exists in the system with Start Time: 08:00 AM, End Time: 05:00 PM",
        "User is on the Shift Template Management page viewing the list of templates"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate 'Morning Shift' template in the list and click the 'Edit' icon button next to it",
          "expectedResult": "Edit template form opens pre-populated with existing values: Template Name: 'Morning Shift', Start Time: 08:00 AM, End Time: 05:00 PM"
        },
        {
          "step": 2,
          "action": "Change the End Time from '05:00 PM' to '06:00 PM'",
          "expectedResult": "End Time field updates to show '06:00 PM' with no validation errors"
        },
        {
          "step": 3,
          "action": "Click 'Add Break' and add a new break from '03:00 PM' to '03:15 PM'",
          "expectedResult": "New break appears in the breaks list showing '03:00 PM - 03:15 PM'"
        },
        {
          "step": 4,
          "action": "Click 'Save Changes' button",
          "expectedResult": "Success message 'Shift template updated successfully' appears in green banner at top of page"
        },
        {
          "step": 5,
          "action": "Verify the updated template in the list",
          "expectedResult": "Template 'Morning Shift' now shows End Time: 06:00 PM and includes the new break time"
        }
      ],
      "postconditions": [
        "Template changes are persisted in ShiftTemplates database table",
        "Updated template reflects new end time and additional break in all views",
        "Edit action is logged in audit trail with timestamp and admin user ID"
      ]
    },
    {
      "id": "TC-FUNC-004",
      "title": "Verify administrator can delete a shift template that is no longer in use",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator with delete permissions",
        "A shift template named 'Old Shift' exists and is not currently assigned to any active schedules",
        "User is on the Shift Template Management page"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate 'Old Shift' template in the templates list",
          "expectedResult": "Template 'Old Shift' is visible in the list with Delete icon button enabled"
        },
        {
          "step": 2,
          "action": "Click the 'Delete' icon button next to 'Old Shift' template",
          "expectedResult": "Confirmation dialog appears with message 'Are you sure you want to delete this shift template? This action cannot be undone.' with 'Cancel' and 'Delete' buttons"
        },
        {
          "step": 3,
          "action": "Click 'Delete' button in the confirmation dialog",
          "expectedResult": "Confirmation dialog closes and success message 'Shift template deleted successfully' appears in green banner"
        },
        {
          "step": 4,
          "action": "Verify 'Old Shift' template is removed from the templates list",
          "expectedResult": "Template 'Old Shift' no longer appears in the list and total template count decreases by 1"
        }
      ],
      "postconditions": [
        "Template 'Old Shift' is removed from ShiftTemplates database table",
        "Template is no longer available for selection in any scheduling workflows",
        "Deletion action is logged in audit trail with timestamp and admin user ID"
      ]
    },
    {
      "id": "TC-FUNC-005",
      "title": "Verify system displays all created templates in a list view with correct details",
      "category": "Functional",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "At least 5 different shift templates exist in the system with varying start times, end times, and breaks",
        "User navigates to the Shift Template Management page"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Observe the shift templates list on the page load",
          "expectedResult": "All existing templates are displayed in a table/list format with columns: Template Name, Start Time, End Time, Break Times, Actions"
        },
        {
          "step": 2,
          "action": "Verify each template row displays complete information",
          "expectedResult": "Each template shows accurate Template Name, formatted Start Time (HH:MM AM/PM), formatted End Time (HH:MM AM/PM), and all break periods"
        },
        {
          "step": 3,
          "action": "Check that action buttons (Edit, Delete) are present for each template",
          "expectedResult": "Each template row has visible and enabled Edit and Delete icon buttons"
        },
        {
          "step": 4,
          "action": "Verify the total count of templates is displayed",
          "expectedResult": "Page header shows 'Total Templates: X' where X matches the actual number of templates in the list"
        }
      ],
      "postconditions": [
        "All templates remain in their original state",
        "User remains on the Shift Template Management page",
        "No data modifications occur during viewing"
      ]
    },
    {
      "id": "TC-FUNC-006",
      "title": "Verify validation that start time must be before end time when creating template",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on the Shift Template Management page",
        "User has clicked 'Create New Template' button and form is open"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'Test Shift' in Template Name field",
          "expectedResult": "Template Name field shows 'Test Shift'"
        },
        {
          "step": 2,
          "action": "Select '05:00 PM' from the Start Time dropdown",
          "expectedResult": "Start Time field displays '05:00 PM'"
        },
        {
          "step": 3,
          "action": "Select '08:00 AM' from the End Time dropdown (earlier than start time)",
          "expectedResult": "Red validation error message appears below End Time field stating 'End time must be after start time'"
        },
        {
          "step": 4,
          "action": "Attempt to click 'Save Template' button",
          "expectedResult": "'Save Template' button is disabled and cannot be clicked, or clicking shows error message 'Please fix validation errors before saving'"
        },
        {
          "step": 5,
          "action": "Change End Time to '11:00 PM' (after start time)",
          "expectedResult": "Validation error message disappears and 'Save Template' button becomes enabled"
        }
      ],
      "postconditions": [
        "No template is saved to the database due to validation failure",
        "Form remains open with corrected values",
        "User can proceed to save after fixing validation errors"
      ]
    },
    {
      "id": "TC-FUNC-007",
      "title": "Verify break times validation ensures breaks do not overlap with shift boundaries",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "User has opened the Create New Template form",
        "Template Name is 'Validation Test', Start Time is '09:00 AM', End Time is '05:00 PM'"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Add Break' button and attempt to add break from '08:00 AM' to '09:30 AM' (starts before shift start time)",
          "expectedResult": "Red validation error appears stating 'Break time must be within shift hours (09:00 AM - 05:00 PM)'"
        },
        {
          "step": 2,
          "action": "Clear the invalid break and add break from '04:00 PM' to '06:00 PM' (ends after shift end time)",
          "expectedResult": "Red validation error appears stating 'Break time must be within shift hours (09:00 AM - 05:00 PM)'"
        },
        {
          "step": 3,
          "action": "Clear the invalid break and add valid break from '12:00 PM' to '01:00 PM' (within shift hours)",
          "expectedResult": "Break is added successfully with no validation errors, showing '12:00 PM - 01:00 PM' in breaks list"
        },
        {
          "step": 4,
          "action": "Attempt to add another break from '12:30 PM' to '01:30 PM' (overlaps with existing break)",
          "expectedResult": "Validation error appears stating 'Break times cannot overlap with existing breaks'"
        }
      ],
      "postconditions": [
        "Only valid breaks within shift boundaries are accepted",
        "Form prevents saving until all break validations pass",
        "User receives clear feedback on validation failures"
      ]
    }
  ],
  "negative": [
    {
      "id": "TC-NEGA-001",
      "title": "Verify system rejects shift template creation with empty required fields",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on the Shift Template Management page",
        "User has clicked 'Create New Template' button and form is displayed"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Leave Template Name field empty",
          "expectedResult": "Template Name field remains empty with no default value"
        },
        {
          "step": 2,
          "action": "Leave Start Time field unselected",
          "expectedResult": "Start Time field shows placeholder text 'Select start time' with no value selected"
        },
        {
          "step": 3,
          "action": "Leave End Time field unselected",
          "expectedResult": "End Time field shows placeholder text 'Select end time' with no value selected"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button with all required fields empty",
          "expectedResult": "Red validation error messages appear: 'Template Name is required', 'Start Time is required', 'End Time is required'. Template is not saved."
        },
        {
          "step": 5,
          "action": "Verify no API call is made to POST /api/shift-templates",
          "expectedResult": "Network tab shows no POST request to /api/shift-templates endpoint, client-side validation prevents submission"
        }
      ],
      "postconditions": [
        "No template is created in the database",
        "Form remains open with validation errors displayed",
        "User remains on the template creation form to correct errors"
      ]
    },
    {
      "id": "TC-NEGA-002",
      "title": "Verify system rejects template creation with special characters and SQL injection attempts in Template Name",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "User has opened the Create New Template form",
        "Database connection is active and monitored for SQL injection attempts"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter SQL injection string \"'; DROP TABLE ShiftTemplates; --\" in Template Name field",
          "expectedResult": "Field accepts the input but system sanitizes it, or validation error appears stating 'Template Name contains invalid characters'"
        },
        {
          "step": 2,
          "action": "Enter valid Start Time '09:00 AM' and End Time '05:00 PM'",
          "expectedResult": "Time fields are populated correctly"
        },
        {
          "step": 3,
          "action": "Click 'Save Template' button",
          "expectedResult": "Either validation error prevents save with message 'Template Name contains invalid characters', or template saves with sanitized name and SQL injection is prevented"
        },
        {
          "step": 4,
          "action": "Verify ShiftTemplates table still exists and no SQL injection occurred",
          "expectedResult": "Database table ShiftTemplates remains intact, no tables were dropped, and no unauthorized SQL commands were executed"
        },
        {
          "step": 5,
          "action": "Attempt to create template with XSS payload \"<script>alert('XSS')</script>\" as Template Name",
          "expectedResult": "Input is either rejected with validation error or sanitized/escaped before storage, preventing XSS execution"
        }
      ],
      "postconditions": [
        "Database integrity is maintained with no SQL injection damage",
        "No malicious scripts are stored or executed",
        "Security event is logged in system audit trail"
      ]
    },
    {
      "id": "TC-NEGA-003",
      "title": "Verify unauthorized user without Administrator role cannot access shift template creation",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in with 'Employee' role (non-administrator)",
        "User does not have shift template creation permissions",
        "Shift Template Management page URL is /shift-templates"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Attempt to navigate directly to /shift-templates URL by typing in browser address bar",
          "expectedResult": "System redirects to unauthorized access page or dashboard with error message 'You do not have permission to access this page'"
        },
        {
          "step": 2,
          "action": "Attempt to access the page through any navigation menu",
          "expectedResult": "'Shift Template Management' option is not visible in navigation menu for Employee role"
        },
        {
          "step": 3,
          "action": "Attempt to make direct API call to POST /api/shift-templates with valid template data using browser console or API tool",
          "expectedResult": "API returns 403 Forbidden status code with error message 'Insufficient permissions to create shift templates'"
        },
        {
          "step": 4,
          "action": "Verify no template is created in the database",
          "expectedResult": "ShiftTemplates table shows no new entries from unauthorized user attempt"
        }
      ],
      "postconditions": [
        "User remains on their current authorized page or is redirected to error page",
        "No unauthorized template creation occurs",
        "Unauthorized access attempt is logged in security audit trail with user ID and timestamp"
      ]
    },
    {
      "id": "TC-NEGA-004",
      "title": "Verify system handles network timeout during template creation gracefully",
      "category": "Negative",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "User has filled out valid template creation form with all required fields",
        "Network simulation tool is configured to simulate timeout after 30 seconds"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter valid template data: Name 'Network Test', Start Time '09:00 AM', End Time '05:00 PM'",
          "expectedResult": "All fields are populated correctly with valid data"
        },
        {
          "step": 2,
          "action": "Simulate network timeout condition and click 'Save Template' button",
          "expectedResult": "Loading spinner appears on Save button with text changing to 'Saving...'"
        },
        {
          "step": 3,
          "action": "Wait for timeout to occur (30 seconds)",
          "expectedResult": "After timeout, error message appears: 'Network error: Unable to save template. Please check your connection and try again.' with 'Retry' button"
        },
        {
          "step": 4,
          "action": "Verify form data is preserved and not lost",
          "expectedResult": "All entered data remains in the form fields (Template Name, Start Time, End Time) and user can retry without re-entering"
        },
        {
          "step": 5,
          "action": "Click 'Retry' button after network is restored",
          "expectedResult": "Template saves successfully with message 'Shift template created successfully'"
        }
      ],
      "postconditions": [
        "Template is eventually saved after retry with network restored",
        "No duplicate templates are created from multiple retry attempts",
        "User experience is maintained with clear error messaging and data preservation"
      ]
    },
    {
      "id": "TC-NEGA-005",
      "title": "Verify system prevents deletion of shift template currently assigned to active schedules",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "A shift template named 'Active Shift' exists and is currently assigned to at least one active employee schedule",
        "User is on the Shift Template Management page viewing the templates list"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate 'Active Shift' template that is in use and click the 'Delete' icon button",
          "expectedResult": "Confirmation dialog appears with warning message 'This template is currently in use by active schedules and cannot be deleted'"
        },
        {
          "step": 2,
          "action": "Verify Delete button in dialog is disabled or shows 'Cannot Delete'",
          "expectedResult": "Delete button is either disabled (grayed out) or replaced with 'Close' button only"
        },
        {
          "step": 3,
          "action": "Attempt to make direct API DELETE call to /api/shift-templates/{id} for the active template",
          "expectedResult": "API returns 409 Conflict status code with error message 'Cannot delete template: currently in use by X active schedules'"
        },
        {
          "step": 4,
          "action": "Verify template still exists in the database and templates list",
          "expectedResult": "Template 'Active Shift' remains in ShiftTemplates table and is still visible in the templates list"
        }
      ],
      "postconditions": [
        "Template remains in database and is not deleted",
        "Active schedules using this template are not affected",
        "Deletion attempt is logged in audit trail with reason for failure"
      ]
    },
    {
      "id": "TC-NEGA-006",
      "title": "Verify system rejects template with excessively long Template Name exceeding character limit",
      "category": "Negative",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "User has opened Create New Template form",
        "Template Name field has a maximum character limit of 100 characters"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter a 150-character string in Template Name field: 'A' repeated 150 times",
          "expectedResult": "Field either truncates input at 100 characters or shows character count '150/100' in red"
        },
        {
          "step": 2,
          "action": "Enter valid Start Time '09:00 AM' and End Time '05:00 PM'",
          "expectedResult": "Time fields are populated correctly"
        },
        {
          "step": 3,
          "action": "Click 'Save Template' button",
          "expectedResult": "Validation error appears: 'Template Name must not exceed 100 characters' and template is not saved"
        },
        {
          "step": 4,
          "action": "Reduce Template Name to exactly 100 characters and click Save again",
          "expectedResult": "Template saves successfully with 100-character name, showing success message"
        }
      ],
      "postconditions": [
        "Only template with valid character length is saved to database",
        "Database field constraints are enforced",
        "User receives clear feedback on character limit violations"
      ]
    },
    {
      "id": "TC-NEGA-007",
      "title": "Verify system handles server error (500) during template creation with appropriate error message",
      "category": "Negative",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "User has filled valid template creation form",
        "Backend server is configured to return 500 Internal Server Error for testing"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter valid template data: Name 'Server Error Test', Start Time '09:00 AM', End Time '05:00 PM'",
          "expectedResult": "All fields are populated with valid data"
        },
        {
          "step": 2,
          "action": "Click 'Save Template' button while server is returning 500 error",
          "expectedResult": "Loading indicator appears briefly, then error message displays: 'Server error: Unable to create template. Please try again later or contact support.'"
        },
        {
          "step": 3,
          "action": "Verify form data is preserved",
          "expectedResult": "All entered data remains in form fields and is not lost"
        },
        {
          "step": 4,
          "action": "Verify no partial or corrupted data is saved to database",
          "expectedResult": "ShiftTemplates table shows no new incomplete or corrupted entries"
        },
        {
          "step": 5,
          "action": "Verify error is logged with details for debugging",
          "expectedResult": "Server error log contains entry with timestamp, user ID, error details, and stack trace for troubleshooting"
        }
      ],
      "postconditions": [
        "No template is created due to server error",
        "User can retry after server issue is resolved",
        "Error is properly logged for system administrators to investigate"
      ]
    }
  ],
  "edgeCases": [
    {
      "id": "TC-EDGE-001",
      "title": "Verify system handles template creation at exact boundary of 100 templates performance limit",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "Exactly 99 shift templates already exist in the system",
        "System performance requirement states handling up to 100 templates without degradation",
        "User is on Shift Template Management page"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Verify current template count shows '99 templates' in the page header",
          "expectedResult": "Page displays 'Total Templates: 99' and all 99 templates load within acceptable time (under 3 seconds)"
        },
        {
          "step": 2,
          "action": "Click 'Create New Template' button and create 100th template with Name '100th Template', Start Time '09:00 AM', End Time '05:00 PM'",
          "expectedResult": "Template creation form opens and accepts input without performance issues"
        },
        {
          "step": 3,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template saves successfully with message 'Shift template created successfully' and page updates to show 'Total Templates: 100'"
        },
        {
          "step": 4,
          "action": "Measure page load time and verify all 100 templates display correctly",
          "expectedResult": "Page loads all 100 templates within 3 seconds with no performance degradation, all templates are visible and functional"
        },
        {
          "step": 5,
          "action": "Attempt to create 101st template",
          "expectedResult": "System either allows creation (no hard limit) or displays warning 'Maximum recommended templates (100) reached. Performance may be affected.'"
        }
      ],
      "postconditions": [
        "System maintains performance with 100 templates as per requirements",
        "All templates remain accessible and functional",
        "User is warned if exceeding recommended limits"
      ]
    },
    {
      "id": "TC-EDGE-002",
      "title": "Verify template creation with minimum valid time duration (1 minute shift)",
      "category": "Edge Cases",
      "priority": "Low",
      "preconditions": [
        "User is logged in as Administrator",
        "User has opened Create New Template form",
        "System allows minimum shift duration of 1 minute"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'Minimal Shift' as Template Name",
          "expectedResult": "Template Name field shows 'Minimal Shift'"
        },
        {
          "step": 2,
          "action": "Select '09:00 AM' as Start Time",
          "expectedResult": "Start Time field displays '09:00 AM'"
        },
        {
          "step": 3,
          "action": "Select '09:01 AM' as End Time (exactly 1 minute after start)",
          "expectedResult": "End Time field displays '09:01 AM' with no validation errors"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template saves successfully with success message, or validation error appears if minimum duration requirement exists stating 'Shift duration must be at least X minutes'"
        },
        {
          "step": 5,
          "action": "If saved, verify template appears in list with correct 1-minute duration",
          "expectedResult": "Template 'Minimal Shift' shows Start: 09:00 AM, End: 09:01 AM, Duration: 1 minute"
        }
      ],
      "postconditions": [
        "System behavior at minimum time boundary is clearly defined and consistent",
        "Template is saved if within system constraints",
        "Duration calculations handle edge case correctly"
      ]
    },
    {
      "id": "TC-EDGE-003",
      "title": "Verify template creation with maximum valid time duration (24-hour shift spanning midnight)",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "User has opened Create New Template form",
        "System supports shifts spanning across midnight"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter '24-Hour Shift' as Template Name",
          "expectedResult": "Template Name field shows '24-Hour Shift'"
        },
        {
          "step": 2,
          "action": "Select '12:00 AM' (midnight) as Start Time",
          "expectedResult": "Start Time field displays '12:00 AM'"
        },
        {
          "step": 3,
          "action": "Select '11:59 PM' as End Time (23 hours 59 minutes later)",
          "expectedResult": "End Time field displays '11:59 PM' with no validation errors"
        },
        {
          "step": 4,
          "action": "Add break from '12:00 PM' to '01:00 PM'",
          "expectedResult": "Break is added successfully within the 24-hour shift boundary"
        },
        {
          "step": 5,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template saves successfully showing duration of 23 hours 59 minutes, or validation error if maximum duration limit exists"
        },
        {
          "step": 6,
          "action": "Verify template displays correctly in list with proper time formatting",
          "expectedResult": "Template shows Start: 12:00 AM, End: 11:59 PM with correct duration calculation"
        }
      ],
      "postconditions": [
        "System handles maximum duration edge case correctly",
        "Time calculations across midnight are accurate",
        "Template is usable in scheduling workflows"
      ]
    },
    {
      "id": "TC-EDGE-004",
      "title": "Verify template creation with Unicode characters, emojis, and international characters in Template Name",
      "category": "Edge Cases",
      "priority": "Low",
      "preconditions": [
        "User is logged in as Administrator",
        "User has opened Create New Template form",
        "System database supports UTF-8 encoding"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter Template Name with Unicode characters: 'Shift Êó©Áè≠ üåÖ Fr√ºh'",
          "expectedResult": "Template Name field displays all characters correctly including Chinese characters, emoji, and German umlaut"
        },
        {
          "step": 2,
          "action": "Enter valid Start Time '08:00 AM' and End Time '04:00 PM'",
          "expectedResult": "Time fields are populated correctly"
        },
        {
          "step": 3,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template saves successfully with success message"
        },
        {
          "step": 4,
          "action": "Verify template appears in list with all Unicode characters displayed correctly",
          "expectedResult": "Template name 'Shift Êó©Áè≠ üåÖ Fr√ºh' displays correctly in the list without character corruption or encoding issues"
        },
        {
          "step": 5,
          "action": "Edit the template and verify Unicode characters are preserved",
          "expectedResult": "Edit form shows Template Name with all Unicode characters intact and editable"
        }
      ],
      "postconditions": [
        "Template with Unicode characters is stored correctly in database",
        "All international characters display properly across all views",
        "System supports internationalization requirements"
      ]
    },
    {
      "id": "TC-EDGE-005",
      "title": "Verify system behavior when creating template with zero break times (no breaks)",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "User has opened Create New Template form",
        "Break times are optional (not required fields)"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'No Break Shift' as Template Name",
          "expectedResult": "Template Name field shows 'No Break Shift'"
        },
        {
          "step": 2,
          "action": "Select '09:00 AM' as Start Time and '05:00 PM' as End Time",
          "expectedResult": "Time fields are populated correctly"
        },
        {
          "step": 3,
          "action": "Do not add any breaks - leave breaks section empty",
          "expectedResult": "Breaks section shows 'No breaks added' or remains empty with 'Add Break' button available"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template saves successfully with message 'Shift template created successfully'"
        },
        {
          "step": 5,
          "action": "Verify template in list shows no break times",
          "expectedResult": "Template 'No Break Shift' displays with Start: 09:00 AM, End: 05:00 PM, Breaks: None or 'No breaks'"
        }
      ],
      "postconditions": [
        "Template without breaks is saved and functional",
        "System correctly handles null or empty break times",
        "Template can be used in scheduling without errors"
      ]
    },
    {
      "id": "TC-EDGE-006",
      "title": "Verify rapid consecutive template creation (stress test for race conditions)",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on Shift Template Management page",
        "System is monitored for race conditions and duplicate entries"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Open Create New Template form and fill with 'Rapid Test 1', Start: 09:00 AM, End: 05:00 PM",
          "expectedResult": "Form is populated with valid data"
        },
        {
          "step": 2,
          "action": "Click 'Save Template' button rapidly 5 times in quick succession (within 1 second)",
          "expectedResult": "System processes only one save request, button becomes disabled after first click, or loading state prevents multiple submissions"
        },
        {
          "step": 3,
          "action": "Verify only one template 'Rapid Test 1' is created in the database",
          "expectedResult": "Templates list shows exactly one entry for 'Rapid Test 1', no duplicate entries exist"
        },
        {
          "step": 4,
          "action": "Immediately create another template 'Rapid Test 2' and save",
          "expectedResult": "Second template saves successfully without conflicts or errors"
        },
        {
          "step": 5,
          "action": "Verify both templates exist with unique IDs and no data corruption",
          "expectedResult": "Both 'Rapid Test 1' and 'Rapid Test 2' appear in list with unique identifiers and correct data"
        }
      ],
      "postconditions": [
        "No duplicate templates are created from rapid clicking",
        "System handles concurrent requests gracefully",
        "Data integrity is maintained under stress conditions"
      ]
    },
    {
      "id": "TC-EDGE-007",
      "title": "Verify template list behavior when exactly zero templates exist (empty state)",
      "category": "Edge Cases",
      "priority": "Low",
      "preconditions": [
        "User is logged in as Administrator",
        "All existing shift templates have been deleted from the system",
        "ShiftTemplates table is empty",
        "User navigates to Shift Template Management page"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Observe the templates list area on page load",
          "expectedResult": "Empty state message displays: 'No shift templates found. Click Create New Template to get started.' with an illustration or icon"
        },
        {
          "step": 2,
          "action": "Verify 'Create New Template' button is prominently displayed and enabled",
          "expectedResult": "'Create New Template' button is visible, enabled, and highlighted as primary action"
        },
        {
          "step": 3,
          "action": "Verify page header shows 'Total Templates: 0'",
          "expectedResult": "Template count displays '0' correctly without errors"
        },
        {
          "step": 4,
          "action": "Click 'Create New Template' button from empty state",
          "expectedResult": "Template creation form opens normally without errors"
        },
        {
          "step": 5,
          "action": "Create first template with Name 'First Template', Start: 09:00 AM, End: 05:00 PM and save",
          "expectedResult": "Template saves successfully and empty state is replaced with template list showing the new template"
        }
      ],
      "postconditions": [
        "Empty state provides clear guidance to users",
        "System handles zero templates gracefully without errors",
        "User can successfully create first template from empty state"
      ]
    }
  ],
  "accessibility": [
    {
      "id": "TC-ACCE-001",
      "title": "Verify complete keyboard navigation through shift template creation workflow using Tab, Enter, and Escape keys",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on Shift Template Management page",
        "Screen reader is not active (testing keyboard-only navigation)",
        "Browser is set to show focus indicators"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Press Tab key repeatedly to navigate through page elements until 'Create New Template' button receives focus",
          "expectedResult": "Visible focus indicator (blue outline or highlight) appears on 'Create New Template' button"
        },
        {
          "step": 2,
          "action": "Press Enter key to activate 'Create New Template' button",
          "expectedResult": "Template creation form modal opens and focus automatically moves to first form field (Template Name)"
        },
        {
          "step": 3,
          "action": "Type 'Keyboard Test' in Template Name field, then press Tab to move to Start Time field",
          "expectedResult": "Focus moves to Start Time dropdown with visible focus indicator, Template Name contains 'Keyboard Test'"
        },
        {
          "step": 4,
          "action": "Press Enter or Space to open Start Time dropdown, use Arrow keys to select '09:00 AM', press Enter to confirm",
          "expectedResult": "Start Time dropdown opens, Arrow keys navigate through time options, Enter selects '09:00 AM' and closes dropdown"
        },
        {
          "step": 5,
          "action": "Press Tab to move to End Time field, repeat selection process to choose '05:00 PM'",
          "expectedResult": "Focus moves to End Time field, time selection works with keyboard, '05:00 PM' is selected"
        },
        {
          "step": 6,
          "action": "Press Tab to navigate to 'Add Break' button and press Enter",
          "expectedResult": "Break time fields appear and focus moves to first break time field"
        },
        {
          "step": 7,
          "action": "Use keyboard to add break from '12:00 PM' to '01:00 PM', then Tab to 'Save Template' button and press Enter",
          "expectedResult": "Break is added successfully, focus moves to Save button, Enter key saves template and shows success message"
        },
        {
          "step": 8,
          "action": "Press Escape key to close success message or modal",
          "expectedResult": "Modal closes and focus returns to 'Create New Template' button or first element in templates list"
        }
      ],
      "postconditions": [
        "Entire workflow is completable using only keyboard",
        "Focus order is logical and follows visual layout",
        "Focus is never trapped and always visible",
        "Template is successfully created using keyboard only"
      ]
    },
    {
      "id": "TC-ACCE-002",
      "title": "Verify screen reader announces all form fields, labels, errors, and success messages correctly",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "NVDA or JAWS screen reader is active and running",
        "User is on Shift Template Management page",
        "Screen reader verbosity is set to default level"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to 'Create New Template' button using screen reader navigation commands",
          "expectedResult": "Screen reader announces: 'Create New Template, button' with role and state information"
        },
        {
          "step": 2,
          "action": "Activate button and navigate to Template Name field",
          "expectedResult": "Screen reader announces: 'Template Name, edit, required' indicating field label, type, and required status"
        },
        {
          "step": 3,
          "action": "Navigate to Start Time field without entering data",
          "expectedResult": "Screen reader announces: 'Start Time, combobox, required, collapsed' with instructions 'Press Alt+Down to open'"
        },
        {
          "step": 4,
          "action": "Attempt to save form with empty required fields",
          "expectedResult": "Screen reader announces each validation error: 'Error: Template Name is required', 'Error: Start Time is required', 'Error: End Time is required' with error role"
        },
        {
          "step": 5,
          "action": "Fill all required fields correctly and save template",
          "expectedResult": "Screen reader announces: 'Success: Shift template created successfully' with alert or status role"
        },
        {
          "step": 6,
          "action": "Navigate to newly created template in the list",
          "expectedResult": "Screen reader announces template details: 'Morning Shift, Start Time: 09:00 AM, End Time: 05:00 PM, Break: 12:00 PM to 01:00 PM, Edit button, Delete button'"
        },
        {
          "step": 7,
          "action": "Navigate to Edit and Delete buttons for the template",
          "expectedResult": "Screen reader announces: 'Edit Morning Shift template, button' and 'Delete Morning Shift template, button' with context"
        }
      ],
      "postconditions": [
        "All interactive elements have proper ARIA labels and roles",
        "Screen reader users receive all necessary information",
        "Error and success messages are announced via ARIA live regions",
        "Context is provided for all buttons and controls"
      ]
    },
    {
      "id": "TC-ACCE-003",
      "title": "Verify focus management and focus trap in modal dialog during template creation",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on Shift Template Management page",
        "Keyboard navigation is being used"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Use keyboard to open 'Create New Template' modal dialog",
          "expectedResult": "Modal opens and focus automatically moves to first focusable element (Template Name field or Close button)"
        },
        {
          "step": 2,
          "action": "Press Tab repeatedly to cycle through all focusable elements in the modal",
          "expectedResult": "Focus cycles through: Template Name, Start Time, End Time, Add Break button, Save Template button, Cancel button, Close (X) button"
        },
        {
          "step": 3,
          "action": "Continue pressing Tab after reaching last focusable element (Close button)",
          "expectedResult": "Focus wraps back to first focusable element (Template Name field), creating a focus trap within modal"
        },
        {
          "step": 4,
          "action": "Press Shift+Tab from first element",
          "expectedResult": "Focus moves backward to last focusable element (Close button), reverse focus trap works correctly"
        },
        {
          "step": 5,
          "action": "Attempt to Tab to elements outside the modal (page header, navigation)",
          "expectedResult": "Focus remains trapped within modal, cannot reach elements outside modal while it is open"
        },
        {
          "step": 6,
          "action": "Press Escape key to close modal",
          "expectedResult": "Modal closes and focus returns to 'Create New Template' button that originally opened the modal"
        },
        {
          "step": 7,
          "action": "Open modal again, click Cancel button",
          "expectedResult": "Modal closes and focus returns to 'Create New Template' button"
        }
      ],
      "postconditions": [
        "Focus is properly trapped within modal when open",
        "Focus returns to trigger element when modal closes",
        "Users cannot accidentally interact with background content",
        "Escape key provides keyboard method to close modal"
      ]
    },
    {
      "id": "TC-ACCE-004",
      "title": "Verify color contrast ratios meet WCAG 2.1 Level AA standards (4.5:1 for normal text)",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is on Shift Template Management page",
        "Color contrast analyzer tool is available (browser extension or standalone)",
        "Page is displayed at 100% zoom in standard lighting conditions"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Use color contrast analyzer to check contrast ratio of 'Create New Template' button text against button background",
          "expectedResult": "Contrast ratio is at least 4.5:1 for normal text or 3:1 for large text (18pt+), meets WCAG AA standards"
        },
        {
          "step": 2,
          "action": "Check contrast ratio of form field labels (Template Name, Start Time, End Time) against page background",
          "expectedResult": "All label text has contrast ratio of at least 4.5:1 against background"
        },
        {
          "step": 3,
          "action": "Check contrast ratio of placeholder text in input fields",
          "expectedResult": "Placeholder text has contrast ratio of at least 4.5:1 (not relying on 3:1 exception for disabled text)"
        },
        {
          "step": 4,
          "action": "Check contrast ratio of error messages (red text) against background",
          "expectedResult": "Error message text has contrast ratio of at least 4.5:1, error is not conveyed by color alone (includes icon or text indicator)"
        },
        {
          "step": 5,
          "action": "Check contrast ratio of success message (green text/background) against its background",
          "expectedResult": "Success message text has contrast ratio of at least 4.5:1, success is not conveyed by color alone"
        },
        {
          "step": 6,
          "action": "Check contrast ratio of focus indicators (outline/border) against background",
          "expectedResult": "Focus indicator has contrast ratio of at least 3:1 against adjacent colors (WCAG 2.1 non-text contrast requirement)"
        }
      ],
      "postconditions": [
        "All text meets WCAG AA contrast requirements",
        "Users with low vision can read all content",
        "Color is not the only means of conveying information",
        "Focus indicators are clearly visible"
      ]
    },
    {
      "id": "TC-ACCE-005",
      "title": "Verify page functionality and readability at 200% browser zoom level",
      "category": "Accessibility",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on Shift Template Management page",
        "Browser zoom is set to 100% initially",
        "Browser window is at standard desktop resolution (1920x1080)"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Increase browser zoom to 200% using Ctrl/Cmd + Plus or browser zoom controls",
          "expectedResult": "Page content scales proportionally, all text is larger and readable"
        },
        {
          "step": 2,
          "action": "Verify all page elements remain visible without horizontal scrolling (vertical scrolling is acceptable)",
          "expectedResult": "Page layout adapts responsively, no content is cut off, horizontal scrolling is not required or is minimal"
        },
        {
          "step": 3,
          "action": "Click 'Create New Template' button at 200% zoom",
          "expectedResult": "Button is clickable, modal opens correctly, all form fields are visible and accessible"
        },
        {
          "step": 4,
          "action": "Fill out template creation form at 200% zoom",
          "expectedResult": "All form fields are usable, dropdowns open correctly, text input is visible, no overlapping elements"
        },
        {
          "step": 5,
          "action": "Verify validation error messages display correctly at 200% zoom",
          "expectedResult": "Error messages are fully visible, readable, and properly positioned near relevant fields"
        },
        {
          "step": 6,
          "action": "Save template and verify success message at 200% zoom",
          "expectedResult": "Success message displays correctly, is fully readable, and does not overlap other content"
        },
        {
          "step": 7,
          "action": "Verify templates list displays correctly at 200% zoom",
          "expectedResult": "Template list is readable, all columns are visible (may require scrolling), action buttons are accessible"
        }
      ],
      "postconditions": [
        "All functionality works at 200% zoom",
        "Content reflows appropriately without loss of information",
        "Users with low vision can use the feature at increased zoom levels",
        "No content is hidden or inaccessible due to zoom"
      ]
    },
    {
      "id": "TC-ACCE-006",
      "title": "Verify ARIA live regions announce dynamic content changes for template creation and deletion",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "Screen reader (NVDA or JAWS) is active",
        "User is on Shift Template Management page",
        "At least one template exists in the system"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Create a new template using the form and click Save",
          "expectedResult": "Screen reader announces 'Shift template created successfully' immediately without requiring navigation, using aria-live='polite' or 'assertive' region"
        },
        {
          "step": 2,
          "action": "Verify screen reader announces the updated template count",
          "expectedResult": "Screen reader announces 'Total templates: X' where X is the new count, using aria-live region"
        },
        {
          "step": 3,
          "action": "Attempt to save a template with validation errors",
          "expectedResult": "Screen reader announces each validation error as it appears: 'Error: Template Name is required' using aria-live='assertive' for immediate announcement"
        },
        {
          "step": 4,
          "action": "Delete an existing template",
          "expectedResult": "Screen reader announces 'Shift template deleted successfully' and updated count 'Total templates: X' using aria-live region"
        },
        {
          "step": 5,
          "action": "Edit a template and save changes",
          "expectedResult": "Screen reader announces 'Shift template updated successfully' using aria-live region"
        },
        {
          "step": 6,
          "action": "Trigger a network error during save operation",
          "expectedResult": "Screen reader announces error message 'Network error: Unable to save template' using aria-live='assertive' for critical errors"
        }
      ],
      "postconditions": [
        "All dynamic content changes are announced to screen reader users",
        "ARIA live regions are properly implemented with appropriate politeness levels",
        "Users are informed of success, errors, and state changes without manual navigation",
        "Critical errors use assertive live regions for immediate announcement"
      ]
    },
    {
      "id": "TC-ACCE-007",
      "title": "Verify mobile accessibility with touch targets meeting minimum size requirements (44x44 CSS pixels)",
      "category": "Accessibility",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator on mobile device or browser in mobile emulation mode",
        "Device viewport is set to mobile size (375x667 iPhone size or similar)",
        "User is on Shift Template Management page in mobile view"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Measure the touch target size of 'Create New Template' button using browser developer tools",
          "expectedResult": "Button has minimum dimensions of 44x44 CSS pixels (or 48x48 for better accessibility), easily tappable with finger"
        },
        {
          "step": 2,
          "action": "Measure touch target sizes of Edit and Delete icon buttons in templates list",
          "expectedResult": "Each icon button has minimum 44x44 pixel touch target, adequate spacing between buttons (at least 8 pixels) to prevent accidental taps"
        },
        {
          "step": 3,
          "action": "Open template creation form on mobile and verify form field touch targets",
          "expectedResult": "All form fields (Template Name input, Start Time dropdown, End Time dropdown) have touch targets of at least 44x44 pixels"
        },
        {
          "step": 4,
          "action": "Test dropdown menus (Start Time, End Time) on mobile device",
          "expectedResult": "Dropdowns open correctly, time options are easily selectable with finger, each option has adequate touch target size"
        },
        {
          "step": 5,
          "action": "Verify Save and Cancel buttons in mobile form have adequate touch targets",
          "expectedResult": "Both buttons are at least 44x44 pixels, properly spaced apart to prevent accidental taps"
        },
        {
          "step": 6,
          "action": "Test mobile gestures: swipe to scroll templates list, pinch to zoom",
          "expectedResult": "Standard mobile gestures work correctly, page is responsive to touch, no gesture conflicts"
        },
        {
          "step": 7,
          "action": "Verify mobile screen reader (VoiceOver on iOS or TalkBack on Android) announces all elements correctly",
          "expectedResult": "Mobile screen reader announces all buttons, fields, and content with proper labels and roles"
        }
      ],
      "postconditions": [
        "All interactive elements meet minimum touch target size requirements",
        "Mobile users can easily tap buttons without errors",
        "Adequate spacing prevents accidental activation of adjacent controls",
        "Mobile screen readers provide full accessibility"
      ]
    }
  ],
  "selectedTypes": {
    "functional": true,
    "negative": true,
    "edgeCases": true,
    "accessibility": true
  },
  "userStoryObject": {
    "id": "db-story-story-1",
    "title": "As Administrator, I want to perform shift template creation to achieve reusable scheduling.",
    "description": "CONTEXT & BACKGROUND:\nThe ability to create shift templates is essential for streamlining the scheduling process. This feature allows administrators to define shifts that can be reused, reducing the time spent on scheduling.\n\nCURRENT STATE:\nCurrently, scheduling is done manually without templates, leading to inconsistencies and increased workload.\n\nDESIRED STATE:\nAdministrators can create and manage templates, ensuring consistency and efficiency in scheduling.\n\nKEY FUNCTIONALITY:\n‚Ä¢ Create new shift templates with start and end times.\n‚Ä¢ Define break times within templates.\n‚Ä¢ Edit existing templates as needed.\n‚Ä¢ Delete templates that are no longer in use.\n\nUSER INTERACTION FLOW:\n1. Administrator navigates to the shift template management page.\n2. Administrator clicks on 'Create New Template'.\n3. Administrator inputs shift details (start time, end time, breaks).\n4. Administrator saves the template.\n5. System confirms template creation.\n6. Administrator can view the list of created templates.\n\nTECHNICAL CONSIDERATIONS:\n‚Ä¢ Data source: ShiftTemplates table in the database.\n‚Ä¢ Validation rules: Ensure start time is before end time.\n‚Ä¢ API endpoints: POST /api/shift-templates for creation.\n‚Ä¢ Security: Only authorized administrators can create templates.\n‚Ä¢ Performance: System should handle up to 100 templates without performance degradation.\n\nOUT OF SCOPE:\n‚Ä¢ Employee-specific scheduling is not included in this story.\n\nSUCCESS METRICS:\n‚Ä¢ 90% of templates created without errors.",
    "persona": "Administrator",
    "personaId": "",
    "acceptanceCriteria": [
      "System allows creation of shift templates with valid start and end times.",
      "System validates break times and ensures they do not overlap with shift times.",
      "System displays a confirmation message upon successful template creation.",
      "System lists all created templates for review."
    ],
    "priority": "High",
    "storyPoints": 5,
    "epicId": "",
    "status": "Backlog"
  }
}