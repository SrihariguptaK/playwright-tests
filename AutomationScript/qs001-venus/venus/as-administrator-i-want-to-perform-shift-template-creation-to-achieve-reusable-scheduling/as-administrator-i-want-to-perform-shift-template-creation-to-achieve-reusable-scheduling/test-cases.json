{
  "storyId": "story-1",
  "storyTitle": "As Administrator, I want to perform shift template creation to achieve reusable scheduling.",
  "functional": [
    {
      "id": "TC-FUNC-001",
      "title": "Verify successful creation of shift template with valid start time, end time, and break times",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in with Administrator role and has permissions to create shift templates",
        "User is on the shift template management page at /admin/shift-templates",
        "Database ShiftTemplates table is accessible and has less than 100 existing templates",
        "Browser is Chrome/Firefox/Safari latest version"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click on the 'Create New Template' button located in the top-right corner of the page",
          "expectedResult": "Shift template creation form is displayed with fields for Template Name, Start Time, End Time, and Break Times"
        },
        {
          "step": 2,
          "action": "Enter 'Morning Shift' in the Template Name field",
          "expectedResult": "Template Name field accepts the input and displays 'Morning Shift'"
        },
        {
          "step": 3,
          "action": "Select '08:00 AM' from the Start Time dropdown picker",
          "expectedResult": "Start Time field displays '08:00 AM' and no validation errors appear"
        },
        {
          "step": 4,
          "action": "Select '05:00 PM' from the End Time dropdown picker",
          "expectedResult": "End Time field displays '05:00 PM' and no validation errors appear"
        },
        {
          "step": 5,
          "action": "Click 'Add Break' button and enter break time from '12:00 PM' to '01:00 PM'",
          "expectedResult": "Break time is added to the form showing '12:00 PM - 01:00 PM' with no validation errors"
        },
        {
          "step": 6,
          "action": "Click the 'Save Template' button at the bottom of the form",
          "expectedResult": "Green success banner appears at the top of the page with message 'Shift template created successfully' and form is cleared"
        },
        {
          "step": 7,
          "action": "Verify the template list on the shift template management page",
          "expectedResult": "Newly created 'Morning Shift' template appears in the list with start time '08:00 AM', end time '05:00 PM', and break '12:00 PM - 01:00 PM'"
        }
      ],
      "postconditions": [
        "New shift template 'Morning Shift' is saved in the ShiftTemplates database table with correct times",
        "User remains on the shift template management page",
        "Template list is refreshed and displays the new template",
        "Success notification is visible for 5 seconds before auto-dismissing"
      ]
    },
    {
      "id": "TC-FUNC-002",
      "title": "Verify creation of shift template with multiple non-overlapping break times",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator with shift template creation permissions",
        "User is on the shift template management page",
        "No existing templates with the name 'Double Break Shift' exist",
        "System supports multiple breaks per shift template"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens with all required fields visible"
        },
        {
          "step": 2,
          "action": "Enter 'Double Break Shift' in Template Name field, '07:00 AM' as Start Time, and '06:00 PM' as End Time",
          "expectedResult": "All fields accept input without validation errors"
        },
        {
          "step": 3,
          "action": "Click 'Add Break' and enter first break from '10:00 AM' to '10:15 AM'",
          "expectedResult": "First break is added and displayed in the breaks section"
        },
        {
          "step": 4,
          "action": "Click 'Add Break' again and enter second break from '02:00 PM' to '02:30 PM'",
          "expectedResult": "Second break is added and both breaks are displayed without overlap validation errors"
        },
        {
          "step": 5,
          "action": "Click 'Save Template' button",
          "expectedResult": "Success message 'Shift template created successfully' appears and template is saved"
        }
      ],
      "postconditions": [
        "Template 'Double Break Shift' is saved with two separate break periods in the database",
        "Template appears in the list showing both break times",
        "User can edit or delete the newly created template"
      ]
    },
    {
      "id": "TC-FUNC-003",
      "title": "Verify editing an existing shift template updates all fields correctly",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "At least one shift template named 'Evening Shift' exists with start time '02:00 PM' and end time '10:00 PM'",
        "User is on the shift template management page viewing the list of templates",
        "Edit functionality is enabled for existing templates"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate 'Evening Shift' template in the list and click the 'Edit' icon/button next to it",
          "expectedResult": "Edit form opens pre-populated with existing values: Template Name 'Evening Shift', Start Time '02:00 PM', End Time '10:00 PM'"
        },
        {
          "step": 2,
          "action": "Change the End Time from '10:00 PM' to '11:00 PM'",
          "expectedResult": "End Time field updates to '11:00 PM' without validation errors"
        },
        {
          "step": 3,
          "action": "Add a new break time from '06:00 PM' to '06:30 PM'",
          "expectedResult": "Break is added to the template and displayed in the breaks section"
        },
        {
          "step": 4,
          "action": "Click 'Update Template' button",
          "expectedResult": "Success message 'Shift template updated successfully' appears in green banner"
        },
        {
          "step": 5,
          "action": "Verify the updated template in the list",
          "expectedResult": "'Evening Shift' now shows end time as '11:00 PM' and includes the new break time"
        }
      ],
      "postconditions": [
        "Template 'Evening Shift' is updated in the database with new end time and break",
        "Template list reflects the updated information",
        "No duplicate templates are created during the edit process"
      ]
    },
    {
      "id": "TC-FUNC-004",
      "title": "Verify deletion of shift template removes it from the system",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator with delete permissions",
        "At least one shift template named 'Test Template' exists in the system",
        "User is on the shift template management page",
        "Template 'Test Template' is not currently assigned to any active schedules"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate 'Test Template' in the template list and click the 'Delete' icon/button",
          "expectedResult": "Confirmation dialog appears with message 'Are you sure you want to delete this template?' and 'Cancel' and 'Confirm' buttons"
        },
        {
          "step": 2,
          "action": "Click 'Confirm' button in the confirmation dialog",
          "expectedResult": "Dialog closes and success message 'Shift template deleted successfully' appears in green banner"
        },
        {
          "step": 3,
          "action": "Verify the template list",
          "expectedResult": "'Test Template' is no longer visible in the list of shift templates"
        },
        {
          "step": 4,
          "action": "Refresh the page by pressing F5",
          "expectedResult": "Page reloads and 'Test Template' remains absent from the list, confirming deletion persistence"
        }
      ],
      "postconditions": [
        "Template 'Test Template' is permanently removed from the ShiftTemplates database table",
        "Template count is decremented by one",
        "User remains on the shift template management page",
        "No orphaned data remains in the database related to the deleted template"
      ]
    },
    {
      "id": "TC-FUNC-005",
      "title": "Verify viewing the complete list of all created shift templates with pagination",
      "category": "Functional",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "At least 15 shift templates exist in the system",
        "User navigates to the shift template management page",
        "Pagination is set to display 10 templates per page"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Observe the shift template list on the initial page load",
          "expectedResult": "First 10 templates are displayed in a table/list format with columns for Template Name, Start Time, End Time, Breaks, and Actions"
        },
        {
          "step": 2,
          "action": "Verify pagination controls are visible at the bottom of the list",
          "expectedResult": "Pagination shows 'Page 1 of 2' with 'Next' button enabled and 'Previous' button disabled"
        },
        {
          "step": 3,
          "action": "Click the 'Next' button",
          "expectedResult": "Page 2 loads showing the remaining 5 templates, 'Previous' button is now enabled"
        },
        {
          "step": 4,
          "action": "Click on any template name to view details",
          "expectedResult": "Template details modal or page opens showing full information including all break times"
        }
      ],
      "postconditions": [
        "All templates are accessible through pagination",
        "User can navigate back and forth between pages",
        "Template data is displayed accurately on all pages"
      ]
    },
    {
      "id": "TC-FUNC-006",
      "title": "Verify API endpoint POST /api/shift-templates creates template with correct data structure",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User has valid Administrator authentication token",
        "API endpoint POST /api/shift-templates is accessible",
        "Database connection is active",
        "Request payload is properly formatted JSON"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Send POST request to /api/shift-templates with payload: {\"name\": \"Night Shift\", \"startTime\": \"22:00\", \"endTime\": \"06:00\", \"breaks\": [{\"start\": \"02:00\", \"end\": \"02:30\"}]}",
          "expectedResult": "API returns HTTP 201 Created status code"
        },
        {
          "step": 2,
          "action": "Verify the response body contains the created template with generated ID",
          "expectedResult": "Response includes: {\"id\": <generated_id>, \"name\": \"Night Shift\", \"startTime\": \"22:00\", \"endTime\": \"06:00\", \"breaks\": [{\"start\": \"02:00\", \"end\": \"02:30\"}], \"createdAt\": <timestamp>}"
        },
        {
          "step": 3,
          "action": "Query the database ShiftTemplates table for the newly created template ID",
          "expectedResult": "Template exists in database with all fields matching the request payload"
        },
        {
          "step": 4,
          "action": "Navigate to the shift template management page in the UI",
          "expectedResult": "'Night Shift' template appears in the list with correct times"
        }
      ],
      "postconditions": [
        "Template is persisted in the database",
        "Template is immediately available for use in scheduling",
        "API response matches database record",
        "Template appears in UI without requiring page refresh"
      ]
    }
  ],
  "negative": [
    {
      "id": "TC-NEGA-001",
      "title": "Verify system prevents creation of shift template with end time before start time",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on the shift template creation form",
        "Form validation is enabled",
        "No templates are currently being saved"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form is displayed"
        },
        {
          "step": 2,
          "action": "Enter 'Invalid Shift' in Template Name field",
          "expectedResult": "Template Name field accepts the input"
        },
        {
          "step": 3,
          "action": "Select '05:00 PM' as Start Time",
          "expectedResult": "Start Time field displays '05:00 PM'"
        },
        {
          "step": 4,
          "action": "Select '08:00 AM' as End Time (earlier than start time)",
          "expectedResult": "Red validation error message appears below End Time field stating 'End time must be after start time'"
        },
        {
          "step": 5,
          "action": "Attempt to click 'Save Template' button",
          "expectedResult": "'Save Template' button is disabled and cannot be clicked, or clicking shows error message 'Please fix validation errors before saving'"
        }
      ],
      "postconditions": [
        "No template is created in the database",
        "User remains on the creation form with error message visible",
        "Form data is retained for correction",
        "No API call is made to POST /api/shift-templates"
      ]
    },
    {
      "id": "TC-NEGA-002",
      "title": "Verify system prevents creation of shift template with overlapping break times",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on the shift template creation form",
        "Break time validation is implemented",
        "Form allows multiple breaks to be added"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' and enter 'Overlap Test' as Template Name, '08:00 AM' as Start Time, '05:00 PM' as End Time",
          "expectedResult": "All fields accept input without errors"
        },
        {
          "step": 2,
          "action": "Click 'Add Break' and enter first break from '12:00 PM' to '01:00 PM'",
          "expectedResult": "First break is added successfully"
        },
        {
          "step": 3,
          "action": "Click 'Add Break' again and enter second break from '12:30 PM' to '01:30 PM' (overlaps with first break)",
          "expectedResult": "Red validation error appears stating 'Break times cannot overlap with existing breaks' below the second break time fields"
        },
        {
          "step": 4,
          "action": "Attempt to click 'Save Template' button",
          "expectedResult": "Save action is blocked and error message 'Please resolve break time conflicts before saving' is displayed"
        }
      ],
      "postconditions": [
        "No template is saved to the database",
        "Both break entries remain visible for user to correct",
        "Validation error persists until overlap is resolved",
        "Form remains in edit mode"
      ]
    },
    {
      "id": "TC-NEGA-003",
      "title": "Verify system prevents unauthorized user without Administrator role from creating shift templates",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in with 'Employee' role (non-Administrator)",
        "User attempts to access shift template management page at /admin/shift-templates",
        "Role-based access control is implemented",
        "User does not have shift template creation permissions"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to /admin/shift-templates URL directly in the browser",
          "expectedResult": "System redirects to 403 Forbidden page or displays error message 'You do not have permission to access this page'"
        },
        {
          "step": 2,
          "action": "Attempt to send POST request to /api/shift-templates with valid template data using Employee role authentication token",
          "expectedResult": "API returns HTTP 403 Forbidden status with response body: {\"error\": \"Insufficient permissions to create shift templates\"}"
        },
        {
          "step": 3,
          "action": "Check if 'Create New Template' button is visible in the UI (if page is somehow accessible)",
          "expectedResult": "'Create New Template' button is not rendered or is disabled for non-Administrator users"
        }
      ],
      "postconditions": [
        "No template is created in the database",
        "User access attempt is logged in security audit log",
        "User is redirected to appropriate page or shown error message",
        "System security remains intact"
      ]
    },
    {
      "id": "TC-NEGA-004",
      "title": "Verify system handles empty/null required fields during shift template creation",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on the shift template creation form",
        "Required field validation is enabled",
        "Template Name, Start Time, and End Time are mandatory fields"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button to open the form",
          "expectedResult": "Empty template creation form is displayed"
        },
        {
          "step": 2,
          "action": "Leave Template Name field empty and click 'Save Template' button",
          "expectedResult": "Red validation error 'Template Name is required' appears below the Template Name field"
        },
        {
          "step": 3,
          "action": "Enter 'Test Template' in Template Name but leave Start Time empty, then click 'Save Template'",
          "expectedResult": "Validation error 'Start Time is required' appears below Start Time field"
        },
        {
          "step": 4,
          "action": "Fill Start Time as '08:00 AM' but leave End Time empty, then click 'Save Template'",
          "expectedResult": "Validation error 'End Time is required' appears below End Time field"
        },
        {
          "step": 5,
          "action": "Verify that 'Save Template' button remains disabled or non-functional until all required fields are filled",
          "expectedResult": "Button is disabled or shows cumulative error message listing all missing required fields"
        }
      ],
      "postconditions": [
        "No template is created in the database",
        "All validation errors are displayed simultaneously",
        "Form retains any valid data entered",
        "User can correct errors and resubmit"
      ]
    },
    {
      "id": "TC-NEGA-005",
      "title": "Verify system prevents deletion of shift template currently assigned to active schedules",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "Shift template 'Active Shift' exists and is assigned to at least one active employee schedule",
        "User is on the shift template management page",
        "Business rule prevents deletion of templates in use"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate 'Active Shift' template in the list and click the 'Delete' icon",
          "expectedResult": "Confirmation dialog appears with warning message 'This template is currently in use and cannot be deleted'"
        },
        {
          "step": 2,
          "action": "Verify that 'Confirm' button is either disabled or replaced with 'OK' button to dismiss the warning",
          "expectedResult": "Only 'OK' or 'Cancel' button is available, no 'Confirm Delete' option"
        },
        {
          "step": 3,
          "action": "Click 'OK' to dismiss the dialog",
          "expectedResult": "Dialog closes and template remains in the list unchanged"
        },
        {
          "step": 4,
          "action": "Attempt to send DELETE request to /api/shift-templates/{id} for the active template",
          "expectedResult": "API returns HTTP 409 Conflict with response: {\"error\": \"Cannot delete template currently assigned to schedules\"}"
        }
      ],
      "postconditions": [
        "Template 'Active Shift' remains in the database",
        "Template is still visible in the list",
        "Associated schedules remain intact",
        "Deletion attempt is logged for audit purposes"
      ]
    },
    {
      "id": "TC-NEGA-006",
      "title": "Verify system handles break times that fall outside of shift start and end times",
      "category": "Negative",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on the shift template creation form",
        "Break time validation checks against shift boundaries",
        "Form allows break time input"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'Boundary Test' as Template Name, '09:00 AM' as Start Time, '05:00 PM' as End Time",
          "expectedResult": "All fields accept input without errors"
        },
        {
          "step": 2,
          "action": "Click 'Add Break' and enter break time from '08:00 AM' to '08:30 AM' (before shift start)",
          "expectedResult": "Red validation error appears: 'Break time must be within shift hours (09:00 AM - 05:00 PM)'"
        },
        {
          "step": 3,
          "action": "Change break time to '05:30 PM' to '06:00 PM' (after shift end)",
          "expectedResult": "Validation error appears: 'Break time must be within shift hours (09:00 AM - 05:00 PM)'"
        },
        {
          "step": 4,
          "action": "Attempt to save the template with invalid break times",
          "expectedResult": "Save action is blocked with error message 'Please ensure all break times fall within shift hours'"
        }
      ],
      "postconditions": [
        "No template is saved to the database",
        "Validation errors remain visible until corrected",
        "User can modify break times to valid values",
        "Form data is preserved for correction"
      ]
    }
  ],
  "edgeCases": [
    {
      "id": "TC-EDGE-001",
      "title": "Verify system handles creation of shift template spanning midnight (overnight shift)",
      "category": "Edge Cases",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on the shift template creation form",
        "System supports overnight shifts that cross midnight",
        "Time validation handles 24-hour time periods"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form is displayed"
        },
        {
          "step": 2,
          "action": "Enter 'Overnight Shift' as Template Name, '10:00 PM' as Start Time, '06:00 AM' as End Time (next day)",
          "expectedResult": "Both times are accepted and system recognizes this as an 8-hour overnight shift"
        },
        {
          "step": 3,
          "action": "Add break time from '02:00 AM' to '02:30 AM'",
          "expectedResult": "Break time is accepted as valid within the overnight shift period"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Success message 'Shift template created successfully' appears"
        },
        {
          "step": 5,
          "action": "Verify the template in the list displays correctly with indication of overnight shift",
          "expectedResult": "Template shows '10:00 PM - 06:00 AM (next day)' or similar notation indicating overnight period"
        }
      ],
      "postconditions": [
        "Overnight shift template is saved correctly in database",
        "Shift duration is calculated correctly as 8 hours",
        "Template can be used for scheduling overnight shifts",
        "Break time is properly associated with the overnight period"
      ]
    },
    {
      "id": "TC-EDGE-002",
      "title": "Verify system performance when exactly 100 shift templates exist (performance threshold)",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "Exactly 99 shift templates already exist in the system",
        "System performance requirement states no degradation up to 100 templates",
        "User is on the shift template management page"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Measure page load time for the template list with 99 templates",
          "expectedResult": "Page loads within acceptable time (e.g., under 2 seconds)"
        },
        {
          "step": 2,
          "action": "Create the 100th template with name 'Template 100', start time '08:00 AM', end time '04:00 PM'",
          "expectedResult": "Template is created successfully without errors or timeouts"
        },
        {
          "step": 3,
          "action": "Refresh the template list page and measure load time",
          "expectedResult": "Page loads within the same acceptable time range as with 99 templates, no performance degradation"
        },
        {
          "step": 4,
          "action": "Attempt to create the 101st template",
          "expectedResult": "System either allows creation (if limit is soft) or displays message 'Maximum template limit of 100 reached' (if limit is hard)"
        },
        {
          "step": 5,
          "action": "Test pagination, search, and filter functions with 100 templates",
          "expectedResult": "All functions respond within acceptable time without lag or errors"
        }
      ],
      "postconditions": [
        "System maintains performance with 100 templates",
        "All CRUD operations function normally",
        "Database queries remain optimized",
        "UI remains responsive"
      ]
    },
    {
      "id": "TC-EDGE-003",
      "title": "Verify system handles shift template with maximum allowed break periods",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on the shift template creation form",
        "System has a maximum limit for number of breaks per shift (e.g., 5 breaks)",
        "All breaks must be non-overlapping and within shift hours"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Create new template 'Max Breaks Shift' with start time '06:00 AM' and end time '10:00 PM' (16-hour shift)",
          "expectedResult": "Template form accepts the long shift duration"
        },
        {
          "step": 2,
          "action": "Add 5 breaks: 08:00-08:15, 10:00-10:15, 12:00-12:30, 15:00-15:15, 18:00-18:30",
          "expectedResult": "All 5 breaks are added successfully without overlap errors"
        },
        {
          "step": 3,
          "action": "Attempt to add a 6th break",
          "expectedResult": "System displays message 'Maximum of 5 breaks allowed per shift' or disables 'Add Break' button"
        },
        {
          "step": 4,
          "action": "Save the template with 5 breaks",
          "expectedResult": "Template is saved successfully with all 5 breaks persisted"
        },
        {
          "step": 5,
          "action": "View the saved template in the list",
          "expectedResult": "All 5 breaks are displayed correctly in the template details"
        }
      ],
      "postconditions": [
        "Template with maximum breaks is saved in database",
        "All break times are correctly stored and retrievable",
        "Template can be edited to modify or remove breaks",
        "System enforces maximum break limit consistently"
      ]
    },
    {
      "id": "TC-EDGE-004",
      "title": "Verify system handles template name with special characters, Unicode, and maximum length",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on the shift template creation form",
        "Template name field has a maximum character limit (e.g., 100 characters)",
        "System supports Unicode characters"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter template name with special characters: 'Shift #1 - Morning/Evening (50% Split)'",
          "expectedResult": "Template name field accepts special characters and displays them correctly"
        },
        {
          "step": 2,
          "action": "Enter template name with Unicode characters: 'Café Shift ☕ 早班'",
          "expectedResult": "Unicode characters are accepted and displayed correctly without corruption"
        },
        {
          "step": 3,
          "action": "Enter template name at exactly maximum length (100 characters): 'A' repeated 100 times",
          "expectedResult": "Field accepts exactly 100 characters and shows character count '100/100'"
        },
        {
          "step": 4,
          "action": "Attempt to enter 101st character",
          "expectedResult": "Field prevents input beyond 100 characters or truncates with warning message"
        },
        {
          "step": 5,
          "action": "Save template with maximum length name and verify in list",
          "expectedResult": "Template is saved and name is displayed correctly (possibly truncated with ellipsis in list view but full name in details)"
        }
      ],
      "postconditions": [
        "Template with special characters is saved correctly in database",
        "Unicode characters are preserved without encoding issues",
        "Maximum length constraint is enforced",
        "Template names display correctly across all views"
      ]
    },
    {
      "id": "TC-EDGE-005",
      "title": "Verify system handles minimum valid shift duration (1 minute shift)",
      "category": "Edge Cases",
      "priority": "Low",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on the shift template creation form",
        "System allows very short shift durations",
        "No minimum shift duration validation exists"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Create template 'Minimal Shift' with start time '09:00 AM' and end time '09:01 AM'",
          "expectedResult": "System accepts the 1-minute shift duration without validation errors"
        },
        {
          "step": 2,
          "action": "Attempt to add a break to the 1-minute shift",
          "expectedResult": "System either prevents break addition (as break cannot fit) or shows validation error 'Break duration exceeds shift duration'"
        },
        {
          "step": 3,
          "action": "Save the template without breaks",
          "expectedResult": "Template is saved successfully with 1-minute duration"
        },
        {
          "step": 4,
          "action": "Verify template appears in list with correct duration displayed",
          "expectedResult": "Template shows '09:00 AM - 09:01 AM' with duration calculated as '1 minute'"
        }
      ],
      "postconditions": [
        "Minimal duration template is saved in database",
        "Template can be used in scheduling (though impractical)",
        "System handles edge case without errors",
        "Duration calculations are accurate"
      ]
    },
    {
      "id": "TC-EDGE-006",
      "title": "Verify system handles rapid consecutive template creation requests (race condition test)",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "User has the shift template creation form open",
        "Network latency is minimal for testing",
        "System has transaction handling for concurrent requests"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Fill out template form with name 'Rapid Test 1', start time '08:00 AM', end time '04:00 PM'",
          "expectedResult": "Form is filled correctly"
        },
        {
          "step": 2,
          "action": "Click 'Save Template' button multiple times rapidly (5 clicks within 1 second)",
          "expectedResult": "System processes only one template creation request and ignores duplicate clicks, or shows message 'Request already in progress'"
        },
        {
          "step": 3,
          "action": "Verify the template list after save completes",
          "expectedResult": "Only ONE instance of 'Rapid Test 1' appears in the list, no duplicates created"
        },
        {
          "step": 4,
          "action": "Check database for duplicate entries",
          "expectedResult": "Database contains only one record for 'Rapid Test 1' template"
        },
        {
          "step": 5,
          "action": "Open two browser tabs and attempt to create templates with same name simultaneously",
          "expectedResult": "System either allows both (with unique IDs) or prevents duplicate names with validation error on second submission"
        }
      ],
      "postconditions": [
        "No duplicate templates are created from rapid clicks",
        "Database integrity is maintained",
        "System handles concurrent requests gracefully",
        "User receives appropriate feedback for duplicate attempts"
      ]
    }
  ],
  "accessibility": [
    {
      "id": "TC-ACCE-001",
      "title": "Verify complete keyboard navigation through shift template creation form using Tab, Shift+Tab, and Enter keys",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on the shift template management page",
        "Keyboard navigation is enabled in the browser",
        "No mouse or pointing device is used during test"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Press Tab key from the page header to navigate to 'Create New Template' button",
          "expectedResult": "Focus moves to 'Create New Template' button with visible focus indicator (blue outline or highlight)"
        },
        {
          "step": 2,
          "action": "Press Enter key to activate the button",
          "expectedResult": "Template creation form opens and focus automatically moves to the first field (Template Name)"
        },
        {
          "step": 3,
          "action": "Type 'Keyboard Test' in the Template Name field and press Tab",
          "expectedResult": "Focus moves to Start Time field with visible focus indicator"
        },
        {
          "step": 4,
          "action": "Use arrow keys to select '08:00 AM' from Start Time dropdown, then press Tab",
          "expectedResult": "Start Time is set to '08:00 AM' and focus moves to End Time field"
        },
        {
          "step": 5,
          "action": "Use arrow keys to select '05:00 PM' from End Time dropdown, then press Tab",
          "expectedResult": "End Time is set and focus moves to 'Add Break' button"
        },
        {
          "step": 6,
          "action": "Press Enter on 'Add Break' button, then Tab through break time fields",
          "expectedResult": "Break fields appear and focus moves through break start time, break end time sequentially"
        },
        {
          "step": 7,
          "action": "Press Tab to reach 'Save Template' button and press Enter",
          "expectedResult": "Template is saved and success message receives focus for screen reader announcement"
        },
        {
          "step": 8,
          "action": "Press Escape key while form is open",
          "expectedResult": "Form closes and focus returns to 'Create New Template' button"
        }
      ],
      "postconditions": [
        "All interactive elements are reachable via keyboard",
        "Focus order is logical and follows visual layout",
        "Focus indicators are visible at all times",
        "No keyboard traps exist in the form"
      ]
    },
    {
      "id": "TC-ACCE-002",
      "title": "Verify screen reader announces all form labels, errors, and success messages correctly",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "Screen reader (NVDA, JAWS, or VoiceOver) is active",
        "User is on the shift template management page",
        "Screen reader is in forms mode"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to 'Create New Template' button using screen reader",
          "expectedResult": "Screen reader announces 'Create New Template, button' with role and state"
        },
        {
          "step": 2,
          "action": "Activate button and navigate to Template Name field",
          "expectedResult": "Screen reader announces 'Template Name, edit text, required' indicating field label and required state"
        },
        {
          "step": 3,
          "action": "Navigate to Start Time field",
          "expectedResult": "Screen reader announces 'Start Time, combobox, required' with appropriate role"
        },
        {
          "step": 4,
          "action": "Leave Template Name empty and attempt to save",
          "expectedResult": "Screen reader announces 'Error: Template Name is required' and focus moves to the field with error"
        },
        {
          "step": 5,
          "action": "Fill all required fields correctly and save template",
          "expectedResult": "Screen reader announces 'Success: Shift template created successfully' from ARIA live region"
        },
        {
          "step": 6,
          "action": "Navigate through the template list",
          "expectedResult": "Screen reader announces each template with format 'Template Name: Morning Shift, Start Time: 08:00 AM, End Time: 05:00 PM, Edit button, Delete button'"
        },
        {
          "step": 7,
          "action": "Navigate to break time fields",
          "expectedResult": "Screen reader announces 'Break Start Time, combobox' and 'Break End Time, combobox' with clear labels"
        }
      ],
      "postconditions": [
        "All form elements have proper ARIA labels",
        "Error messages are associated with fields via aria-describedby",
        "Success messages are announced via aria-live regions",
        "Screen reader users can complete all tasks independently"
      ]
    },
    {
      "id": "TC-ACCE-003",
      "title": "Verify focus management and focus trap in modal dialogs (delete confirmation)",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "At least one shift template exists in the system",
        "User is on the shift template management page",
        "Keyboard-only navigation is being used"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Use Tab key to navigate to 'Delete' button for a template and press Enter",
          "expectedResult": "Delete confirmation modal opens and focus automatically moves to the first focusable element in the modal (typically the modal heading or first button)"
        },
        {
          "step": 2,
          "action": "Press Tab key repeatedly to cycle through modal elements",
          "expectedResult": "Focus cycles only within modal elements: heading, message text, 'Cancel' button, 'Confirm' button, and back to heading (focus is trapped in modal)"
        },
        {
          "step": 3,
          "action": "Press Shift+Tab to navigate backwards through modal",
          "expectedResult": "Focus moves backwards through modal elements in reverse order, remaining trapped within modal"
        },
        {
          "step": 4,
          "action": "Press Escape key while modal is open",
          "expectedResult": "Modal closes and focus returns to the 'Delete' button that opened the modal"
        },
        {
          "step": 5,
          "action": "Reopen modal and press Enter on 'Cancel' button",
          "expectedResult": "Modal closes and focus returns to the 'Delete' button"
        },
        {
          "step": 6,
          "action": "Reopen modal and press Enter on 'Confirm' button",
          "expectedResult": "Template is deleted, modal closes, success message appears, and focus moves to success message or next template in list"
        }
      ],
      "postconditions": [
        "Focus is properly trapped within modal when open",
        "Focus returns to trigger element when modal closes",
        "Escape key closes modal consistently",
        "No focus is lost during modal interactions"
      ]
    },
    {
      "id": "TC-ACCE-004",
      "title": "Verify color contrast ratios meet WCAG 2.1 AA standards (4.5:1 for normal text)",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is on the shift template management page",
        "Color contrast analyzer tool is available (e.g., browser DevTools, WAVE, axe)",
        "Page is displayed at 100% zoom",
        "Default theme/color scheme is active"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Use color contrast analyzer to check the 'Create New Template' button text against its background",
          "expectedResult": "Contrast ratio is at least 4.5:1 for normal text or 3:1 for large text (18pt+), meeting WCAG AA standards"
        },
        {
          "step": 2,
          "action": "Check contrast of form field labels (Template Name, Start Time, End Time) against page background",
          "expectedResult": "All labels have contrast ratio of at least 4.5:1"
        },
        {
          "step": 3,
          "action": "Check contrast of error messages (red text) against their background",
          "expectedResult": "Error text has contrast ratio of at least 4.5:1 and does not rely solely on color to convey error state (includes icon or text indicator)"
        },
        {
          "step": 4,
          "action": "Check contrast of success messages (green text/background) against page background",
          "expectedResult": "Success message text has contrast ratio of at least 4.5:1"
        },
        {
          "step": 5,
          "action": "Check contrast of focus indicators (outline/border) on interactive elements",
          "expectedResult": "Focus indicators have contrast ratio of at least 3:1 against adjacent colors"
        },
        {
          "step": 6,
          "action": "Check contrast of template list text (template names, times) against list background",
          "expectedResult": "All text in the list meets 4.5:1 contrast ratio"
        }
      ],
      "postconditions": [
        "All text meets WCAG 2.1 AA contrast requirements",
        "Error and success states are distinguishable without color alone",
        "Focus indicators are clearly visible",
        "Page is usable for users with low vision or color blindness"
      ]
    },
    {
      "id": "TC-ACCE-005",
      "title": "Verify page functionality at 200% browser zoom level",
      "category": "Accessibility",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on the shift template management page",
        "Browser zoom is initially set to 100%",
        "Responsive design is implemented"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Set browser zoom to 200% using Ctrl/Cmd + '+' or browser settings",
          "expectedResult": "Page content scales to 200% without horizontal scrolling (or minimal horizontal scrolling)"
        },
        {
          "step": 2,
          "action": "Verify all text is readable and not truncated at 200% zoom",
          "expectedResult": "All labels, buttons, and text content remain fully visible and readable without overlapping"
        },
        {
          "step": 3,
          "action": "Click 'Create New Template' button at 200% zoom",
          "expectedResult": "Form opens and all fields are accessible and properly laid out without requiring horizontal scrolling"
        },
        {
          "step": 4,
          "action": "Fill out the form fields at 200% zoom",
          "expectedResult": "All form fields are usable, dropdowns open correctly, and input is accepted normally"
        },
        {
          "step": 5,
          "action": "Verify error messages and success notifications at 200% zoom",
          "expectedResult": "Messages are fully visible and readable without being cut off or overlapping other elements"
        },
        {
          "step": 6,
          "action": "Navigate through the template list at 200% zoom",
          "expectedResult": "List items are readable, action buttons are accessible, and pagination works correctly"
        }
      ],
      "postconditions": [
        "All functionality works at 200% zoom",
        "No content is lost or becomes inaccessible",
        "Layout adapts responsively to zoom level",
        "Users with low vision can use the feature effectively"
      ]
    },
    {
      "id": "TC-ACCE-006",
      "title": "Verify proper ARIA roles, states, and properties for dynamic content updates",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on the shift template management page",
        "Browser DevTools or accessibility inspector is open",
        "Screen reader is active for testing announcements"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Inspect the 'Create New Template' button in accessibility inspector",
          "expectedResult": "Button has role='button' and appropriate accessible name"
        },
        {
          "step": 2,
          "action": "Inspect the template creation form",
          "expectedResult": "Form has role='form' or is wrapped in <form> element with aria-labelledby pointing to form heading"
        },
        {
          "step": 3,
          "action": "Inspect required fields (Template Name, Start Time, End Time)",
          "expectedResult": "Fields have aria-required='true' attribute"
        },
        {
          "step": 4,
          "action": "Trigger a validation error and inspect the error message",
          "expectedResult": "Error message has role='alert' or is in an element with aria-live='assertive', and field has aria-invalid='true' and aria-describedby pointing to error message"
        },
        {
          "step": 5,
          "action": "Successfully save a template and inspect the success message",
          "expectedResult": "Success message is in an ARIA live region with aria-live='polite' and role='status', causing screen reader to announce it"
        },
        {
          "step": 6,
          "action": "Inspect the template list",
          "expectedResult": "List has role='list' or uses semantic <ul>/<ol>, and each item has role='listitem' or uses <li>"
        },
        {
          "step": 7,
          "action": "Inspect the delete confirmation modal",
          "expectedResult": "Modal has role='dialog', aria-modal='true', and aria-labelledby pointing to modal title"
        }
      ],
      "postconditions": [
        "All interactive elements have appropriate ARIA roles",
        "Dynamic content updates are announced to screen readers",
        "Form validation states are properly communicated",
        "Modal dialogs are properly marked up for accessibility"
      ]
    }
  ],
  "selectedTypes": {
    "functional": true,
    "negative": true,
    "edgeCases": true,
    "accessibility": true
  },
  "userStoryObject": {
    "id": "story-1",
    "title": "As Administrator, I want to perform shift template creation to achieve reusable scheduling.",
    "epicId": "epic-1",
    "persona": "Administrator",
    "priority": "High",
    "subtasks": [
      {
        "category": "Planning",
        "description": "Define the data model for shift templates.",
        "estimatedHours": 4
      },
      {
        "category": "Backend",
        "description": "Implement API endpoint for creating shift templates.",
        "estimatedHours": 6
      },
      {
        "category": "Frontend",
        "description": "Develop the user interface for shift template creation.",
        "estimatedHours": 8
      },
      {
        "category": "Testing",
        "description": "Create unit tests for the shift template creation functionality.",
        "estimatedHours": 4
      },
      {
        "category": "Documentation",
        "description": "Document the API endpoint and usage for shift template creation.",
        "estimatedHours": 3
      }
    ],
    "featureId": "feature-1",
    "testCases": [
      {
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the shift template creation page",
            "result": "Creation form is displayed"
          },
          {
            "step": 2,
            "action": "Enter valid start and end times",
            "result": "No validation errors"
          },
          {
            "step": 3,
            "action": "Submit the form",
            "result": "Template is created successfully with confirmation message"
          }
        ],
        "title": "Validate successful shift template creation"
      },
      {
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the shift template creation page",
            "result": "Creation form is displayed"
          },
          {
            "step": 2,
            "action": "Enter overlapping break times",
            "result": "Validation error is displayed"
          },
          {
            "step": 3,
            "action": "Attempt to submit the form",
            "result": "Submission is blocked with error message"
          }
        ],
        "title": "Ensure validation for overlapping break times"
      }
    ],
    "description": "CONTEXT & BACKGROUND:\nThe ability to create shift templates is essential for streamlining the scheduling process. This feature allows administrators to define shifts that can be reused, reducing the time spent on scheduling.\n\nCURRENT STATE:\nCurrently, scheduling is done manually without templates, leading to inconsistencies and increased workload.\n\nDESIRED STATE:\nAdministrators can create and manage templates, ensuring consistency and efficiency in scheduling.\n\nKEY FUNCTIONALITY:\n• Create new shift templates with start and end times.\n• Define break times within templates.\n• Edit existing templates as needed.\n• Delete templates that are no longer in use.\n\nUSER INTERACTION FLOW:\n1. Administrator navigates to the shift template management page.\n2. Administrator clicks on 'Create New Template'.\n3. Administrator inputs shift details (start time, end time, breaks).\n4. Administrator saves the template.\n5. System confirms template creation.\n6. Administrator can view the list of created templates.\n\nTECHNICAL CONSIDERATIONS:\n• Data source: ShiftTemplates table in the database.\n• Validation rules: Ensure start time is before end time.\n• API endpoints: POST /api/shift-templates for creation.\n• Security: Only authorized administrators can create templates.\n• Performance: System should handle up to 100 templates without performance degradation.\n\nOUT OF SCOPE:\n• Employee-specific scheduling is not included in this story.\n\nSUCCESS METRICS:\n• 90% of templates created without errors.",
    "storyPoints": 5,
    "personaSource": "AI Suggested",
    "acceptanceCriteria": [
      "System allows creation of shift templates with valid start and end times.",
      "System validates break times and ensures they do not overlap with shift times.",
      "System displays a confirmation message upon successful template creation.",
      "System lists all created templates for review."
    ]
  }
}