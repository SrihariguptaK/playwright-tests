{
  "storyId": "story-1",
  "storyTitle": "As Administrator, I want to perform shift template creation to achieve reusable scheduling.",
  "functional": [
    {
      "id": "TC-FUNC-001",
      "title": "Verify successful creation of shift template with valid start time, end time, and break periods",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in with Administrator role and has 'Create Shift Template' permission",
        "User is on the Shift Template Management page at /admin/shift-templates",
        "ShiftTemplates database table is accessible and operational",
        "System time is synchronized and accurate"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click the 'Create New Template' button located in the top-right corner of the page",
          "expectedResult": "Shift template creation form modal opens with fields for Template Name, Start Time, End Time, and Break Times visible"
        },
        {
          "step": 2,
          "action": "Enter 'Morning Shift' in the Template Name field",
          "expectedResult": "Text 'Morning Shift' appears in the Template Name field without validation errors"
        },
        {
          "step": 3,
          "action": "Select '08:00 AM' from the Start Time dropdown picker",
          "expectedResult": "Start Time field displays '08:00 AM' and no validation errors appear"
        },
        {
          "step": 4,
          "action": "Select '05:00 PM' from the End Time dropdown picker",
          "expectedResult": "End Time field displays '05:00 PM' and duration calculation shows '9 hours' below the field"
        },
        {
          "step": 5,
          "action": "Click 'Add Break' button and enter break from '12:00 PM' to '01:00 PM'",
          "expectedResult": "Break period is added to the list showing '12:00 PM - 01:00 PM (1 hour)' and net working hours updates to '8 hours'"
        },
        {
          "step": 6,
          "action": "Click the 'Save Template' button at the bottom of the form",
          "expectedResult": "Green success banner appears at top of page with message 'Shift template created successfully' and modal closes automatically"
        },
        {
          "step": 7,
          "action": "Verify the newly created template appears in the templates list",
          "expectedResult": "Template 'Morning Shift' is visible in the list with details: 08:00 AM - 05:00 PM, 1 break, 8 hours net"
        }
      ],
      "postconditions": [
        "New shift template 'Morning Shift' is saved in ShiftTemplates database table with status 'Active'",
        "Template appears in the templates list and is available for selection in scheduling workflows",
        "Administrator remains on the Shift Template Management page",
        "Audit log records template creation with timestamp and administrator user ID"
      ]
    },
    {
      "id": "TC-FUNC-002",
      "title": "Verify creation of shift template with multiple break periods within valid shift hours",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator with template creation permissions",
        "User is on the Shift Template Management page",
        "No existing template named 'Extended Shift' exists in the system",
        "Browser supports time picker functionality"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens with all required fields visible and enabled"
        },
        {
          "step": 2,
          "action": "Enter 'Extended Shift' in Template Name field and set Start Time to '06:00 AM' and End Time to '10:00 PM'",
          "expectedResult": "All fields accept input, duration shows '16 hours', and no validation errors appear"
        },
        {
          "step": 3,
          "action": "Click 'Add Break' and add first break from '10:00 AM' to '10:15 AM'",
          "expectedResult": "First break appears in break list showing '10:00 AM - 10:15 AM (15 minutes)'"
        },
        {
          "step": 4,
          "action": "Click 'Add Break' again and add second break from '02:00 PM' to '02:30 PM'",
          "expectedResult": "Second break appears in list showing '02:00 PM - 02:30 PM (30 minutes)', net hours updates to '15 hours 15 minutes'"
        },
        {
          "step": 5,
          "action": "Click 'Add Break' again and add third break from '06:00 PM' to '06:15 PM'",
          "expectedResult": "Third break appears in list, net working hours updates to '14 hours 30 minutes', all breaks listed in chronological order"
        },
        {
          "step": 6,
          "action": "Click 'Save Template' button",
          "expectedResult": "Success message 'Shift template created successfully' displays and template is saved"
        }
      ],
      "postconditions": [
        "Template 'Extended Shift' is created with 3 separate break periods stored correctly",
        "Template appears in list with accurate net working hours calculation",
        "All break times are stored in database with correct start and end timestamps",
        "Template is immediately available for use in scheduling operations"
      ]
    },
    {
      "id": "TC-FUNC-003",
      "title": "Verify editing of existing shift template updates all fields correctly",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "At least one shift template named 'Evening Shift' exists with Start Time 02:00 PM, End Time 10:00 PM, and one break",
        "User is on the Shift Template Management page viewing the templates list",
        "Template 'Evening Shift' is not currently assigned to any active schedules"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate 'Evening Shift' template in the list and click the 'Edit' icon button next to it",
          "expectedResult": "Edit template form opens pre-populated with existing values: Name 'Evening Shift', Start '02:00 PM', End '10:00 PM', and existing break"
        },
        {
          "step": 2,
          "action": "Change the Start Time from '02:00 PM' to '03:00 PM'",
          "expectedResult": "Start Time field updates to '03:00 PM' and duration recalculates to '7 hours'"
        },
        {
          "step": 3,
          "action": "Change the End Time from '10:00 PM' to '11:00 PM'",
          "expectedResult": "End Time field updates to '11:00 PM' and duration recalculates to '8 hours'"
        },
        {
          "step": 4,
          "action": "Click the delete icon next to the existing break to remove it",
          "expectedResult": "Break is removed from the list and net working hours updates to '8 hours' (no breaks)"
        },
        {
          "step": 5,
          "action": "Click 'Save Changes' button",
          "expectedResult": "Blue success banner displays 'Shift template updated successfully' and form closes"
        },
        {
          "step": 6,
          "action": "Verify updated template in the list",
          "expectedResult": "Template 'Evening Shift' now shows 03:00 PM - 11:00 PM, 0 breaks, 8 hours"
        }
      ],
      "postconditions": [
        "Template 'Evening Shift' is updated in database with new start time, end time, and no breaks",
        "Previous version of template is archived in audit history",
        "Updated template reflects changes immediately in the templates list",
        "System logs the update action with administrator ID and timestamp"
      ]
    },
    {
      "id": "TC-FUNC-004",
      "title": "Verify deletion of shift template removes it from system and displays confirmation",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator with delete permissions",
        "At least one shift template named 'Test Template' exists and is not assigned to any schedules",
        "User is on the Shift Template Management page",
        "Template list contains at least 2 templates to ensure list is not empty after deletion"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate 'Test Template' in the templates list and click the 'Delete' icon button (trash icon)",
          "expectedResult": "Confirmation modal appears with message 'Are you sure you want to delete this template? This action cannot be undone.' and buttons 'Cancel' and 'Delete'"
        },
        {
          "step": 2,
          "action": "Click the 'Delete' button in the confirmation modal",
          "expectedResult": "Modal closes and red success banner appears with message 'Shift template deleted successfully'"
        },
        {
          "step": 3,
          "action": "Verify 'Test Template' is no longer visible in the templates list",
          "expectedResult": "'Test Template' is removed from the list and remaining templates are displayed without gaps"
        },
        {
          "step": 4,
          "action": "Refresh the page by pressing F5",
          "expectedResult": "Page reloads and 'Test Template' remains absent from the list, confirming deletion persisted"
        }
      ],
      "postconditions": [
        "Template 'Test Template' is marked as deleted in database or removed from ShiftTemplates table",
        "Template is no longer available for selection in any scheduling workflows",
        "Deletion action is logged in audit trail with administrator ID and timestamp",
        "User remains on Shift Template Management page with updated list"
      ]
    },
    {
      "id": "TC-FUNC-005",
      "title": "Verify viewing complete list of all created shift templates with accurate details",
      "category": "Functional",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "At least 5 different shift templates exist in the system with varying configurations",
        "User navigates to Shift Template Management page at /admin/shift-templates",
        "Database connection is stable and responsive"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Observe the templates list section on the page",
          "expectedResult": "All existing templates are displayed in a table/grid format with columns: Template Name, Start Time, End Time, Breaks, Net Hours, Actions"
        },
        {
          "step": 2,
          "action": "Verify each template row displays accurate information matching database records",
          "expectedResult": "Each template shows correct name, times in 12-hour format, number of breaks, calculated net hours, and action buttons (Edit, Delete)"
        },
        {
          "step": 3,
          "action": "Check the total count indicator at the top of the list",
          "expectedResult": "Count displays 'Showing X templates' where X matches the actual number of rows displayed"
        },
        {
          "step": 4,
          "action": "Scroll through the list if more than 10 templates exist",
          "expectedResult": "List is scrollable or paginated, all templates are accessible, and no templates are missing"
        }
      ],
      "postconditions": [
        "All templates remain unchanged in the database",
        "User remains on the Shift Template Management page",
        "No data is modified during viewing operation",
        "Page performance remains responsive with all templates loaded"
      ]
    },
    {
      "id": "TC-FUNC-006",
      "title": "Verify shift template creation with break time at shift boundaries (start and end)",
      "category": "Functional",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on the Shift Template Management page",
        "System allows breaks to be scheduled at shift start or end times",
        "No template named 'Boundary Break Shift' exists"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens successfully"
        },
        {
          "step": 2,
          "action": "Enter 'Boundary Break Shift' as Template Name, set Start Time to '09:00 AM' and End Time to '05:00 PM'",
          "expectedResult": "All fields accept input and duration shows '8 hours'"
        },
        {
          "step": 3,
          "action": "Click 'Add Break' and set break from '09:00 AM' to '09:15 AM' (at shift start)",
          "expectedResult": "Break is added successfully showing '09:00 AM - 09:15 AM (15 minutes)' and net hours updates to '7 hours 45 minutes'"
        },
        {
          "step": 4,
          "action": "Click 'Add Break' and set another break from '04:45 PM' to '05:00 PM' (at shift end)",
          "expectedResult": "Second break is added showing '04:45 PM - 05:00 PM (15 minutes)' and net hours updates to '7 hours 30 minutes'"
        },
        {
          "step": 5,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template is saved successfully with confirmation message and both boundary breaks are preserved"
        }
      ],
      "postconditions": [
        "Template 'Boundary Break Shift' is created with breaks at shift boundaries",
        "Both breaks are stored correctly in database with accurate timestamps",
        "Net working hours calculation correctly accounts for both breaks",
        "Template is available for use in scheduling"
      ]
    }
  ],
  "negative": [
    {
      "id": "TC-NEGA-001",
      "title": "Verify system prevents template creation when end time is before or equal to start time",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on the Shift Template Management page",
        "Template creation form is accessible",
        "Validation rules are active and enforced"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter 'Invalid Time Shift' in Template Name field",
          "expectedResult": "Template name is accepted"
        },
        {
          "step": 3,
          "action": "Set Start Time to '02:00 PM' and End Time to '10:00 AM' (end before start)",
          "expectedResult": "Red validation error message appears below End Time field stating 'End time must be after start time'"
        },
        {
          "step": 4,
          "action": "Attempt to click 'Save Template' button",
          "expectedResult": "'Save Template' button is disabled or clicking it displays error message 'Please fix validation errors before saving' and form does not submit"
        },
        {
          "step": 5,
          "action": "Change End Time to '02:00 PM' (equal to start time)",
          "expectedResult": "Validation error persists showing 'End time must be after start time' or 'Shift duration must be greater than 0 hours'"
        },
        {
          "step": 6,
          "action": "Verify no API call is made to POST /api/shift-templates",
          "expectedResult": "Network tab shows no POST request to shift-templates endpoint, confirming client-side validation prevented submission"
        }
      ],
      "postconditions": [
        "No template is created in the database",
        "User remains on the template creation form with validation errors displayed",
        "Form fields retain entered values for correction",
        "No success message or confirmation is displayed"
      ]
    },
    {
      "id": "TC-NEGA-002",
      "title": "Verify system prevents template creation with overlapping break times",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "User has opened the template creation form",
        "At least one break has been added to the template",
        "Break overlap validation is implemented and active"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'Overlap Test Shift' as Template Name, set Start Time to '08:00 AM' and End Time to '05:00 PM'",
          "expectedResult": "Basic template fields are populated without errors"
        },
        {
          "step": 2,
          "action": "Click 'Add Break' and add first break from '12:00 PM' to '01:00 PM'",
          "expectedResult": "First break is added successfully to the break list"
        },
        {
          "step": 3,
          "action": "Click 'Add Break' and attempt to add second break from '12:30 PM' to '01:30 PM' (overlaps with first break)",
          "expectedResult": "Red validation error appears stating 'Break times cannot overlap with existing breaks' and break is not added to the list"
        },
        {
          "step": 4,
          "action": "Attempt to add another break from '11:30 AM' to '12:30 PM' (overlaps at end boundary)",
          "expectedResult": "Validation error displays 'Break times cannot overlap with existing breaks' and break is rejected"
        },
        {
          "step": 5,
          "action": "Attempt to click 'Save Template' button with only the valid first break",
          "expectedResult": "If no overlapping breaks exist in the list, template can be saved; if overlap error persists, save is blocked"
        }
      ],
      "postconditions": [
        "Only non-overlapping breaks are saved in the template",
        "Database contains no overlapping break records",
        "User receives clear feedback about which breaks were rejected",
        "Template creation is blocked until all overlaps are resolved"
      ]
    },
    {
      "id": "TC-NEGA-003",
      "title": "Verify system prevents template creation with break times outside shift hours",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "Template creation form is open",
        "Shift start and end times are already defined",
        "Break time validation against shift boundaries is active"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'Invalid Break Shift' as Template Name, set Start Time to '09:00 AM' and End Time to '05:00 PM'",
          "expectedResult": "Template fields are populated and duration shows '8 hours'"
        },
        {
          "step": 2,
          "action": "Click 'Add Break' and attempt to set break from '08:00 AM' to '08:30 AM' (before shift start)",
          "expectedResult": "Red validation error appears stating 'Break time must be within shift hours (09:00 AM - 05:00 PM)' and break is not added"
        },
        {
          "step": 3,
          "action": "Attempt to add break from '05:30 PM' to '06:00 PM' (after shift end)",
          "expectedResult": "Validation error displays 'Break time must be within shift hours (09:00 AM - 05:00 PM)' and break is rejected"
        },
        {
          "step": 4,
          "action": "Attempt to add break from '04:00 PM' to '06:00 PM' (starts within but ends after shift)",
          "expectedResult": "Validation error appears 'Break end time cannot exceed shift end time of 05:00 PM' and break is not added"
        },
        {
          "step": 5,
          "action": "Attempt to save template without any valid breaks",
          "expectedResult": "Template can be saved without breaks, or if breaks are required, error message 'At least one valid break is required' appears"
        }
      ],
      "postconditions": [
        "No breaks outside shift hours are saved in the database",
        "Template is either saved without breaks or creation is blocked",
        "User receives clear validation messages about break time constraints",
        "Form remains open for corrections"
      ]
    },
    {
      "id": "TC-NEGA-004",
      "title": "Verify system prevents unauthorized users without Administrator role from creating templates",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in with 'Employee' or 'Manager' role (not Administrator)",
        "User does not have 'Create Shift Template' permission",
        "Role-based access control is properly configured",
        "User attempts to access /admin/shift-templates URL directly"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to /admin/shift-templates URL by typing it in browser address bar",
          "expectedResult": "System redirects to 403 Forbidden page or displays error message 'You do not have permission to access this page'"
        },
        {
          "step": 2,
          "action": "If page loads, verify 'Create New Template' button is not visible or is disabled",
          "expectedResult": "'Create New Template' button is either hidden or disabled with tooltip 'Administrator access required'"
        },
        {
          "step": 3,
          "action": "Attempt to make direct API call to POST /api/shift-templates using browser console or API tool with valid template data",
          "expectedResult": "API returns 403 Forbidden status code with error message 'Insufficient permissions to create shift templates'"
        },
        {
          "step": 4,
          "action": "Check if any template management actions (Edit, Delete) are accessible",
          "expectedResult": "All template management actions are hidden or disabled for non-Administrator users"
        }
      ],
      "postconditions": [
        "No template is created in the database",
        "Unauthorized access attempt is logged in security audit log",
        "User session remains active but access is denied",
        "User is redirected to appropriate authorized page or dashboard"
      ]
    },
    {
      "id": "TC-NEGA-005",
      "title": "Verify system handles template creation with empty or missing required fields",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "Template creation form is open",
        "Required field validation is implemented",
        "All fields are initially empty"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Leave Template Name field empty and click 'Save Template' button",
          "expectedResult": "Red validation error appears below Template Name field stating 'Template name is required' and form does not submit"
        },
        {
          "step": 2,
          "action": "Enter 'Test' in Template Name but leave Start Time empty, then click 'Save Template'",
          "expectedResult": "Validation error appears below Start Time field stating 'Start time is required' and submission is blocked"
        },
        {
          "step": 3,
          "action": "Fill Template Name and Start Time but leave End Time empty, then click 'Save Template'",
          "expectedResult": "Validation error appears below End Time field stating 'End time is required' and form does not submit"
        },
        {
          "step": 4,
          "action": "Enter only whitespace characters '   ' in Template Name field and attempt to save",
          "expectedResult": "Validation error displays 'Template name cannot be empty or contain only spaces' and submission is prevented"
        },
        {
          "step": 5,
          "action": "Verify all validation errors are displayed simultaneously when multiple fields are empty",
          "expectedResult": "All empty required fields show individual validation error messages at the same time"
        }
      ],
      "postconditions": [
        "No template is created in the database",
        "Form remains open with all validation errors visible",
        "User can correct errors and resubmit",
        "No partial data is saved to database"
      ]
    },
    {
      "id": "TC-NEGA-006",
      "title": "Verify system prevents deletion of shift template currently assigned to active schedules",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "Shift template named 'Active Schedule Template' exists and is assigned to at least one active employee schedule",
        "User is on the Shift Template Management page",
        "Business rule prevents deletion of templates in use"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate 'Active Schedule Template' in the templates list and click the 'Delete' icon button",
          "expectedResult": "Confirmation modal appears with warning message 'This template is currently assigned to X active schedule(s). Are you sure you want to delete it?'"
        },
        {
          "step": 2,
          "action": "Click 'Delete' button in the confirmation modal",
          "expectedResult": "Modal closes and red error banner appears stating 'Cannot delete template: currently in use by active schedules' and template remains in the list"
        },
        {
          "step": 3,
          "action": "Verify template still exists in the list after attempted deletion",
          "expectedResult": "Template 'Active Schedule Template' is still visible in the list with all original details intact"
        },
        {
          "step": 4,
          "action": "Refresh the page and verify template persistence",
          "expectedResult": "Template remains in the database and is displayed in the list after page reload"
        }
      ],
      "postconditions": [
        "Template remains in database with status unchanged",
        "All schedules using this template remain unaffected",
        "Deletion attempt is logged in audit trail",
        "User receives clear explanation why deletion was prevented"
      ]
    }
  ],
  "edgeCases": [
    {
      "id": "TC-EDGE-001",
      "title": "Verify template creation with maximum allowed template name length (255 characters)",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "Template creation form is open",
        "Template name field has maximum length constraint of 255 characters",
        "Character counter is visible on the form"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter exactly 255 characters in Template Name field (e.g., 'A' repeated 255 times or a meaningful long name)",
          "expectedResult": "Field accepts all 255 characters, character counter shows '255/255', and no validation error appears"
        },
        {
          "step": 3,
          "action": "Set Start Time to '09:00 AM' and End Time to '05:00 PM'",
          "expectedResult": "Times are set successfully"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template is created successfully with full 255-character name and success message appears"
        },
        {
          "step": 5,
          "action": "Verify the template appears in the list with full name visible or truncated with ellipsis and tooltip",
          "expectedResult": "Template is listed with name either fully displayed or truncated with '...' and hovering shows full name in tooltip"
        },
        {
          "step": 6,
          "action": "Attempt to enter 256 characters in Template Name field",
          "expectedResult": "Field prevents entry beyond 255 characters or shows validation error 'Template name cannot exceed 255 characters'"
        }
      ],
      "postconditions": [
        "Template is saved in database with complete 255-character name without truncation",
        "Template name is retrievable and displayable in full",
        "No data corruption or encoding issues occur",
        "Template functions normally in all scheduling operations"
      ]
    },
    {
      "id": "TC-EDGE-002",
      "title": "Verify template creation with shift spanning midnight (overnight shift)",
      "category": "Edge Cases",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "Template creation form is open",
        "System supports overnight shifts that cross midnight boundary",
        "Time picker allows selection of times that span to next day"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter 'Night Shift' as Template Name, set Start Time to '11:00 PM' and End Time to '07:00 AM'",
          "expectedResult": "Both times are accepted and duration calculation shows '8 hours' recognizing the overnight span"
        },
        {
          "step": 3,
          "action": "Click 'Add Break' and set break from '03:00 AM' to '03:30 AM'",
          "expectedResult": "Break is added successfully and net hours updates to '7 hours 30 minutes'"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template is created successfully with confirmation message"
        },
        {
          "step": 5,
          "action": "Verify template in list shows correct time range and duration",
          "expectedResult": "Template displays as '11:00 PM - 07:00 AM' with duration '7 hours 30 minutes' and system correctly interprets as overnight shift"
        }
      ],
      "postconditions": [
        "Overnight shift template is stored correctly with proper date/time handling",
        "Template can be used in scheduling without date calculation errors",
        "Break times are correctly associated with the overnight shift period",
        "Duration calculations account for midnight boundary crossing"
      ]
    },
    {
      "id": "TC-EDGE-003",
      "title": "Verify system performance when creating the 100th shift template (performance threshold)",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "Exactly 99 shift templates already exist in the system",
        "System performance requirement states support for up to 100 templates without degradation",
        "Database has adequate storage and indexing"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to Shift Template Management page and observe page load time",
          "expectedResult": "Page loads within 3 seconds displaying all 99 existing templates"
        },
        {
          "step": 2,
          "action": "Click 'Create New Template' button and measure response time",
          "expectedResult": "Form opens within 1 second without lag or delay"
        },
        {
          "step": 3,
          "action": "Enter 'Template 100' as name, set Start Time to '08:00 AM', End Time to '04:00 PM', and add one break",
          "expectedResult": "All inputs are responsive with no noticeable delay"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' and measure time until success confirmation appears",
          "expectedResult": "Template is saved within 2 seconds and success message appears promptly"
        },
        {
          "step": 5,
          "action": "Verify the templates list now shows 100 templates and measure rendering time",
          "expectedResult": "List displays all 100 templates within 3 seconds with no performance degradation, scrolling is smooth"
        },
        {
          "step": 6,
          "action": "Attempt to create the 101st template",
          "expectedResult": "System either allows creation (if limit is soft) or displays message 'Maximum template limit of 100 reached. Please delete unused templates.'"
        }
      ],
      "postconditions": [
        "System maintains performance standards with 100 templates loaded",
        "All template operations remain responsive",
        "Database queries execute within acceptable time limits",
        "User experience remains smooth without lag"
      ]
    },
    {
      "id": "TC-EDGE-004",
      "title": "Verify template creation with minimum valid shift duration (1 minute)",
      "category": "Edge Cases",
      "priority": "Low",
      "preconditions": [
        "User is logged in as Administrator",
        "Template creation form is open",
        "System allows minimum shift duration of 1 minute",
        "No minimum duration validation rule prevents very short shifts"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter 'Minimal Shift' as Template Name, set Start Time to '09:00 AM' and End Time to '09:01 AM'",
          "expectedResult": "Times are accepted and duration shows '1 minute' or '0 hours 1 minute'"
        },
        {
          "step": 3,
          "action": "Click 'Save Template' button without adding any breaks",
          "expectedResult": "Template is created successfully with confirmation message or validation error appears if minimum duration is enforced"
        },
        {
          "step": 4,
          "action": "If saved, verify template appears in list with correct duration",
          "expectedResult": "Template 'Minimal Shift' displays with '09:00 AM - 09:01 AM' and duration '1 minute'"
        }
      ],
      "postconditions": [
        "Template is saved if system allows 1-minute shifts, or appropriate validation error is shown",
        "Duration calculations handle very small time spans correctly",
        "Template can be used in scheduling if saved",
        "No calculation errors or rounding issues occur"
      ]
    },
    {
      "id": "TC-EDGE-005",
      "title": "Verify template creation with special characters and Unicode in template name",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "Template creation form is open",
        "System supports UTF-8 character encoding",
        "Database can store Unicode characters"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter template name with special characters: 'Morning Shift‚Ñ¢ (8-5) @HQ #2024 ‚Ç¨¬£¬•'",
          "expectedResult": "Field accepts all special characters without validation errors"
        },
        {
          "step": 3,
          "action": "Set Start Time to '08:00 AM' and End Time to '05:00 PM'",
          "expectedResult": "Times are set successfully"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template is created successfully and all special characters are preserved"
        },
        {
          "step": 5,
          "action": "Enter another template with Unicode characters: '–°–º–µ–Ω–∞ —É—Ç—Ä–æ Êó©Áè≠ „Ç∑„Éï„Éà üåÖ'",
          "expectedResult": "Unicode characters including emojis are accepted and template is saved successfully"
        },
        {
          "step": 6,
          "action": "Verify both templates appear in list with all characters displayed correctly",
          "expectedResult": "Both templates show in list with special characters and Unicode rendered properly without corruption"
        }
      ],
      "postconditions": [
        "Templates are stored in database with correct character encoding",
        "All special characters and Unicode are retrievable without data loss",
        "Templates display correctly across different browsers and devices",
        "No XSS vulnerabilities are introduced by special characters"
      ]
    },
    {
      "id": "TC-EDGE-006",
      "title": "Verify template creation with maximum number of break periods (stress test)",
      "category": "Edge Cases",
      "priority": "Low",
      "preconditions": [
        "User is logged in as Administrator",
        "Template creation form is open",
        "System has no explicit limit on number of breaks or limit is high (e.g., 20 breaks)",
        "Shift duration is long enough to accommodate multiple breaks"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter 'Multi-Break Shift' as name, set Start Time to '06:00 AM' and End Time to '10:00 PM' (16 hours)",
          "expectedResult": "Times are accepted and duration shows '16 hours'"
        },
        {
          "step": 3,
          "action": "Add 15 breaks of 15 minutes each, spaced throughout the shift (e.g., every hour)",
          "expectedResult": "All 15 breaks are added successfully to the break list without errors"
        },
        {
          "step": 4,
          "action": "Verify net working hours calculation updates correctly",
          "expectedResult": "Net hours shows '12 hours 15 minutes' (16 hours minus 3 hours 45 minutes of breaks)"
        },
        {
          "step": 5,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template is saved successfully with all 15 breaks or system displays message 'Maximum number of breaks exceeded' if limit exists"
        },
        {
          "step": 6,
          "action": "Verify template in list and check if all breaks are stored",
          "expectedResult": "Template displays correctly and clicking Edit shows all 15 breaks preserved"
        }
      ],
      "postconditions": [
        "Template with multiple breaks is stored correctly in database",
        "All break records are associated with the template",
        "System performance remains acceptable with many breaks",
        "Template can be edited and used in scheduling without issues"
      ]
    }
  ],
  "accessibility": [
    {
      "id": "TC-ACCE-001",
      "title": "Verify complete keyboard navigation through shift template creation form using Tab and Enter keys",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on Shift Template Management page",
        "Keyboard is the only input device being used (mouse disconnected or not used)",
        "Screen reader is optionally running for additional verification"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Press Tab key repeatedly from page load until focus reaches 'Create New Template' button",
          "expectedResult": "Focus indicator (visible outline) moves through page elements in logical order and reaches 'Create New Template' button with clear focus ring"
        },
        {
          "step": 2,
          "action": "Press Enter key while 'Create New Template' button has focus",
          "expectedResult": "Template creation form modal opens and focus automatically moves to first form field (Template Name)"
        },
        {
          "step": 3,
          "action": "Type 'Keyboard Test Shift' in Template Name field and press Tab",
          "expectedResult": "Focus moves to Start Time field and field is ready for input"
        },
        {
          "step": 4,
          "action": "Use arrow keys or type to select '09:00 AM' in Start Time picker, then press Tab",
          "expectedResult": "Start Time is set to '09:00 AM' and focus moves to End Time field"
        },
        {
          "step": 5,
          "action": "Select '05:00 PM' in End Time field using keyboard, then press Tab",
          "expectedResult": "End Time is set and focus moves to 'Add Break' button"
        },
        {
          "step": 6,
          "action": "Press Enter on 'Add Break' button, then use Tab and arrow keys to set break times",
          "expectedResult": "Break fields appear, can be filled using keyboard only, and break is added to list"
        },
        {
          "step": 7,
          "action": "Press Tab until focus reaches 'Save Template' button and press Enter",
          "expectedResult": "Template is saved successfully and focus moves to success message or back to templates list"
        },
        {
          "step": 8,
          "action": "Press Escape key while form is open",
          "expectedResult": "Form closes and focus returns to 'Create New Template' button on main page"
        }
      ],
      "postconditions": [
        "All form interactions completed successfully using keyboard only",
        "Focus order was logical and predictable throughout",
        "No keyboard traps occurred (user could navigate away from all elements)",
        "Template was created and saved without using mouse"
      ]
    },
    {
      "id": "TC-ACCE-002",
      "title": "Verify screen reader announces all form labels, errors, and success messages correctly",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "Screen reader is active (NVDA, JAWS, or VoiceOver)",
        "User is on Shift Template Management page",
        "Screen reader is in forms mode or focus mode"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to 'Create New Template' button using screen reader and activate it",
          "expectedResult": "Screen reader announces 'Create New Template, button' and upon activation announces 'Dialog opened, Create Shift Template'"
        },
        {
          "step": 2,
          "action": "Tab to Template Name field",
          "expectedResult": "Screen reader announces 'Template Name, edit text, required' or similar, indicating field label and required status"
        },
        {
          "step": 3,
          "action": "Tab to Start Time field without entering template name",
          "expectedResult": "Screen reader announces 'Start Time, time picker, required'"
        },
        {
          "step": 4,
          "action": "Attempt to save form with empty required fields",
          "expectedResult": "Screen reader announces validation errors: 'Error: Template name is required' and 'Error: Start time is required' and focus moves to first error field"
        },
        {
          "step": 5,
          "action": "Fill all required fields correctly and save template",
          "expectedResult": "Screen reader announces 'Shift template created successfully' or success message is in ARIA live region and announced automatically"
        },
        {
          "step": 6,
          "action": "Navigate to break time fields and add a break",
          "expectedResult": "Screen reader announces 'Break Start Time, time picker' and 'Break End Time, time picker' and confirms 'Break added' when break is saved"
        },
        {
          "step": 7,
          "action": "Navigate through the templates list",
          "expectedResult": "Screen reader announces each template with format 'Template name: Morning Shift, Start time: 08:00 AM, End time: 05:00 PM, Breaks: 1, Net hours: 8 hours'"
        }
      ],
      "postconditions": [
        "All form elements have proper ARIA labels and roles",
        "Error messages are associated with form fields using aria-describedby",
        "Success messages are announced via ARIA live regions",
        "Screen reader users can complete all tasks independently"
      ]
    },
    {
      "id": "TC-ACCE-003",
      "title": "Verify focus management and focus trap within modal dialog during template creation",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on Shift Template Management page",
        "Keyboard navigation is being used",
        "Modal dialog implementation follows ARIA dialog pattern"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Press Tab to navigate to 'Create New Template' button and press Enter",
          "expectedResult": "Modal opens and focus automatically moves to first focusable element inside modal (Template Name field or Close button)"
        },
        {
          "step": 2,
          "action": "Press Tab repeatedly to cycle through all focusable elements in the modal",
          "expectedResult": "Focus moves through: Template Name, Start Time, End Time, Add Break button, Save Template button, Cancel button, Close (X) button"
        },
        {
          "step": 3,
          "action": "Continue pressing Tab after reaching the last focusable element (Close button)",
          "expectedResult": "Focus wraps back to first focusable element in modal (focus trap is active, cannot Tab out to background page)"
        },
        {
          "step": 4,
          "action": "Press Shift+Tab from first focusable element",
          "expectedResult": "Focus moves backward to last focusable element in modal (reverse focus trap works)"
        },
        {
          "step": 5,
          "action": "Press Escape key while modal is open",
          "expectedResult": "Modal closes and focus returns to 'Create New Template' button that originally opened the modal"
        },
        {
          "step": 6,
          "action": "Open modal again, fill form, and click 'Save Template' button",
          "expectedResult": "Modal closes after successful save and focus moves to newly created template in the list or to success message"
        },
        {
          "step": 7,
          "action": "Verify background page content is not accessible while modal is open",
          "expectedResult": "Background content has aria-hidden='true' or inert attribute, preventing focus from reaching background elements"
        }
      ],
      "postconditions": [
        "Focus is properly trapped within modal during interaction",
        "Focus returns to appropriate element when modal closes",
        "Background content is properly hidden from assistive technologies",
        "No focus is lost or moved to unexpected locations"
      ]
    },
    {
      "id": "TC-ACCE-004",
      "title": "Verify sufficient color contrast ratios for all text and interactive elements (WCAG 2.1 AA compliance)",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is on Shift Template Management page",
        "Color contrast analyzer tool is available (browser extension or standalone tool)",
        "Page is displayed at 100% zoom in standard viewing conditions",
        "Both light and dark mode themes are tested if applicable"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Use color contrast analyzer to check 'Create New Template' button text against button background",
          "expectedResult": "Contrast ratio is at least 4.5:1 for normal text or 3:1 for large text (18pt+), meeting WCAG AA standards"
        },
        {
          "step": 2,
          "action": "Check contrast of form field labels (Template Name, Start Time, End Time) against page background",
          "expectedResult": "All labels have contrast ratio of at least 4.5:1 against background"
        },
        {
          "step": 3,
          "action": "Check contrast of placeholder text in input fields",
          "expectedResult": "Placeholder text has contrast ratio of at least 4.5:1 (not relying on 3:1 for disabled text)"
        },
        {
          "step": 4,
          "action": "Check contrast of error messages (red text) against background",
          "expectedResult": "Error message text has contrast ratio of at least 4.5:1 and error is not conveyed by color alone (icon or text indicator present)"
        },
        {
          "step": 5,
          "action": "Check contrast of success messages (green text/banner) against background",
          "expectedResult": "Success message has contrast ratio of at least 4.5:1 and success is not conveyed by color alone"
        },
        {
          "step": 6,
          "action": "Check contrast of focus indicators (outline/border) on interactive elements",
          "expectedResult": "Focus indicators have contrast ratio of at least 3:1 against adjacent colors"
        },
        {
          "step": 7,
          "action": "Check contrast of template list text and data against background",
          "expectedResult": "All text in templates list meets 4.5:1 contrast ratio requirement"
        }
      ],
      "postconditions": [
        "All text meets WCAG 2.1 Level AA contrast requirements (4.5:1 for normal text, 3:1 for large text)",
        "Interactive elements have sufficient contrast for visibility",
        "Information is not conveyed by color alone",
        "Users with low vision or color blindness can read all content"
      ]
    },
    {
      "id": "TC-ACCE-005",
      "title": "Verify page functionality and layout at 200% browser zoom level",
      "category": "Accessibility",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Administrator",
        "User is on Shift Template Management page",
        "Browser zoom is initially set to 100%",
        "Browser window is at standard desktop resolution (1920x1080 or similar)"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Press Ctrl and + (or Cmd and + on Mac) repeatedly to zoom browser to 200%",
          "expectedResult": "Page zooms to 200% and all content remains visible without horizontal scrolling (or minimal horizontal scrolling)"
        },
        {
          "step": 2,
          "action": "Verify 'Create New Template' button is visible and clickable at 200% zoom",
          "expectedResult": "Button is fully visible, text is not truncated, and button remains functional"
        },
        {
          "step": 3,
          "action": "Click 'Create New Template' and verify form modal displays correctly at 200% zoom",
          "expectedResult": "Modal opens, all form fields are visible, labels are not cut off, and form is usable without excessive scrolling"
        },
        {
          "step": 4,
          "action": "Fill out template form fields at 200% zoom",
          "expectedResult": "All fields are accessible, dropdowns/pickers work correctly, and text input is visible"
        },
        {
          "step": 5,
          "action": "Verify templates list displays correctly at 200% zoom",
          "expectedResult": "List items reflow appropriately, text is readable, and no content overlaps or is hidden"
        },
        {
          "step": 6,
          "action": "Test all interactive elements (Edit, Delete buttons) at 200% zoom",
          "expectedResult": "All buttons remain clickable, tooltips display correctly, and functionality is not impaired"
        },
        {
          "step": 7,
          "action": "Verify no content requires horizontal scrolling or is cut off at 200% zoom",
          "expectedResult": "Page uses responsive design to reflow content vertically, avoiding horizontal scroll"
        }
      ],
      "postconditions": [
        "All functionality remains available at 200% zoom",
        "Text is readable and not truncated",
        "Layout adapts responsively without breaking",
        "Users with low vision can use the feature at high zoom levels"
      ]
    },
    {
      "id": "TC-ACCE-006",
      "title": "Verify proper ARIA roles, labels, and live regions for dynamic content updates",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as Administrator",
        "Browser developer tools are open to inspect HTML and ARIA attributes",
        "Screen reader is optionally running for verification",
        "User is on Shift Template Management page"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Inspect 'Create New Template' button in developer tools",
          "expectedResult": "Button has role='button' (implicit or explicit) and accessible name via text content or aria-label"
        },
        {
          "step": 2,
          "action": "Open template creation modal and inspect modal container",
          "expectedResult": "Modal has role='dialog', aria-modal='true', and aria-labelledby pointing to modal title"
        },
        {
          "step": 3,
          "action": "Inspect form fields (Template Name, Start Time, End Time)",
          "expectedResult": "Each field has associated <label> with for attribute or aria-label, and required fields have aria-required='true'"
        },
        {
          "step": 4,
          "action": "Trigger validation error and inspect error message",
          "expectedResult": "Error message has role='alert' or is in aria-live='assertive' region, and field has aria-invalid='true' and aria-describedby pointing to error message"
        },
        {
          "step": 5,
          "action": "Successfully save template and inspect success message",
          "expectedResult": "Success message is in aria-live='polite' region and is announced by screen reader without moving focus"
        },
        {
          "step": 6,
          "action": "Inspect templates list container",
          "expectedResult": "List has appropriate semantic structure (table with proper headers, or list with role='list' and role='listitem')"
        },
        {
          "step": 7,
          "action": "Inspect Edit and Delete buttons in templates list",
          "expectedResult": "Buttons have accessible names that include template name (e.g., 'Edit Morning Shift template' or aria-label='Edit Morning Shift')"
        },
        {
          "step": 8,
          "action": "Add a break and verify dynamic content update",
          "expectedResult": "Break list updates and change is announced via aria-live region or focus moves to newly added break"
        }
      ],
      "postconditions": [
        "All interactive elements have proper ARIA roles and labels",
        "Dynamic content updates are announced to screen readers",
        "Form validation states are properly communicated",
        "Semantic HTML and ARIA create accessible experience for assistive technology users"
      ]
    }
  ],
  "selectedTypes": {
    "functional": true,
    "edge-cases": true,
    "negative": true,
    "accessibility": true
  },
  "userStoryObject": {
    "id": "story-1",
    "title": "As Administrator, I want to perform shift template creation to achieve reusable scheduling.",
    "epicId": "epic-1",
    "persona": "Administrator",
    "priority": "High",
    "subtasks": [
      {
        "category": "Planning",
        "description": "Define the data model for shift templates.",
        "estimatedHours": 4
      },
      {
        "category": "Backend",
        "description": "Implement API endpoint for creating shift templates.",
        "estimatedHours": 6
      },
      {
        "category": "Frontend",
        "description": "Develop the user interface for shift template creation.",
        "estimatedHours": 8
      },
      {
        "category": "Testing",
        "description": "Create unit tests for the shift template creation functionality.",
        "estimatedHours": 4
      },
      {
        "category": "Documentation",
        "description": "Document the API endpoint and usage for shift template creation.",
        "estimatedHours": 3
      }
    ],
    "featureId": "feature-1",
    "testCases": [
      {
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the shift template creation page",
            "result": "Creation form is displayed"
          },
          {
            "step": 2,
            "action": "Enter valid start and end times",
            "result": "No validation errors"
          },
          {
            "step": 3,
            "action": "Submit the form",
            "result": "Template is created successfully with confirmation message"
          }
        ],
        "title": "Validate successful shift template creation"
      },
      {
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the shift template creation page",
            "result": "Creation form is displayed"
          },
          {
            "step": 2,
            "action": "Enter overlapping break times",
            "result": "Validation error is displayed"
          },
          {
            "step": 3,
            "action": "Attempt to submit the form",
            "result": "Submission is blocked with error message"
          }
        ],
        "title": "Ensure validation for overlapping break times"
      }
    ],
    "description": "CONTEXT & BACKGROUND:\nThe ability to create shift templates is essential for streamlining the scheduling process. This feature allows administrators to define shifts that can be reused, reducing the time spent on scheduling.\n\nCURRENT STATE:\nCurrently, scheduling is done manually without templates, leading to inconsistencies and increased workload.\n\nDESIRED STATE:\nAdministrators can create and manage templates, ensuring consistency and efficiency in scheduling.\n\nKEY FUNCTIONALITY:\n‚Ä¢ Create new shift templates with start and end times.\n‚Ä¢ Define break times within templates.\n‚Ä¢ Edit existing templates as needed.\n‚Ä¢ Delete templates that are no longer in use.\n\nUSER INTERACTION FLOW:\n1. Administrator navigates to the shift template management page.\n2. Administrator clicks on 'Create New Template'.\n3. Administrator inputs shift details (start time, end time, breaks).\n4. Administrator saves the template.\n5. System confirms template creation.\n6. Administrator can view the list of created templates.\n\nTECHNICAL CONSIDERATIONS:\n‚Ä¢ Data source: ShiftTemplates table in the database.\n‚Ä¢ Validation rules: Ensure start time is before end time.\n‚Ä¢ API endpoints: POST /api/shift-templates for creation.\n‚Ä¢ Security: Only authorized administrators can create templates.\n‚Ä¢ Performance: System should handle up to 100 templates without performance degradation.\n\nOUT OF SCOPE:\n‚Ä¢ Employee-specific scheduling is not included in this story.\n\nSUCCESS METRICS:\n‚Ä¢ 90% of templates created without errors.",
    "storyPoints": 5,
    "personaSource": "AI Suggested",
    "acceptanceCriteria": [
      "System allows creation of shift templates with valid start and end times.",
      "System validates break times and ensures they do not overlap with shift times.",
      "System displays a confirmation message upon successful template creation.",
      "System lists all created templates for review."
    ]
  }
}