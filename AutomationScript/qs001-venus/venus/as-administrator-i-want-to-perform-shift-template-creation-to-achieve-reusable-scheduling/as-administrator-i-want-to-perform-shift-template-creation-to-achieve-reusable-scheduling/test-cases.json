{
  "storyId": "db-story-story-1",
  "storyTitle": "As Administrator, I want to perform shift template creation to achieve reusable scheduling.",
  "functional": [
    {
      "id": "TC-FUNC-001",
      "title": "Successfully create a new shift template with valid start time, end time, and break times",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator with template creation permissions",
        "User is on the shift template management page at /admin/shift-templates",
        "Database has fewer than 100 existing templates",
        "Browser supports time input fields"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click the 'Create New Template' button in the top-right corner of the page",
          "expectedResult": "Template creation form modal opens with empty fields for Template Name, Start Time, End Time, and Break Times"
        },
        {
          "step": 2,
          "action": "Enter 'Morning Shift' in the Template Name field",
          "expectedResult": "Text 'Morning Shift' appears in the Template Name field"
        },
        {
          "step": 3,
          "action": "Select '08:00 AM' in the Start Time field using the time picker",
          "expectedResult": "Start Time field displays '08:00 AM'"
        },
        {
          "step": 4,
          "action": "Select '05:00 PM' in the End Time field using the time picker",
          "expectedResult": "End Time field displays '05:00 PM'"
        },
        {
          "step": 5,
          "action": "Click 'Add Break' button and enter break time from '12:00 PM' to '01:00 PM'",
          "expectedResult": "Break time entry appears showing '12:00 PM - 01:00 PM' with a delete icon"
        },
        {
          "step": 6,
          "action": "Click the 'Save Template' button at the bottom of the form",
          "expectedResult": "Green success banner appears at top of page with message 'Shift template created successfully' and modal closes"
        },
        {
          "step": 7,
          "action": "Verify the templates list on the main page",
          "expectedResult": "New template 'Morning Shift' appears in the templates list showing Start: 08:00 AM, End: 05:00 PM, Break: 12:00 PM - 01:00 PM"
        }
      ],
      "postconditions": [
        "New shift template 'Morning Shift' is saved in ShiftTemplates database table",
        "Template appears in the list of all templates on the management page",
        "User remains on the shift template management page",
        "Template is available for selection in scheduling workflows"
      ]
    },
    {
      "id": "TC-FUNC-002",
      "title": "Create shift template with multiple break periods and verify all breaks are saved",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "System supports multiple break periods per template"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter 'Extended Shift' in Template Name, '07:00 AM' as Start Time, '11:00 PM' as End Time",
          "expectedResult": "All fields display entered values correctly"
        },
        {
          "step": 3,
          "action": "Click 'Add Break' and enter first break from '10:00 AM' to '10:15 AM'",
          "expectedResult": "First break entry appears: '10:00 AM - 10:15 AM'"
        },
        {
          "step": 4,
          "action": "Click 'Add Break' again and enter second break from '01:00 PM' to '02:00 PM'",
          "expectedResult": "Second break entry appears: '01:00 PM - 02:00 PM'"
        },
        {
          "step": 5,
          "action": "Click 'Add Break' again and enter third break from '06:00 PM' to '06:30 PM'",
          "expectedResult": "Third break entry appears: '06:00 PM - 06:30 PM'"
        },
        {
          "step": 6,
          "action": "Click 'Save Template' button",
          "expectedResult": "Success message 'Shift template created successfully' appears"
        },
        {
          "step": 7,
          "action": "Locate 'Extended Shift' in the templates list and click to view details",
          "expectedResult": "Template details show all three break periods: 10:00 AM - 10:15 AM, 01:00 PM - 02:00 PM, 06:00 PM - 06:30 PM"
        }
      ],
      "postconditions": [
        "Template 'Extended Shift' is saved with all three break periods",
        "All break times are stored correctly in the database",
        "Template is visible in the templates list with break count indicator"
      ]
    },
    {
      "id": "TC-FUNC-003",
      "title": "Edit an existing shift template and verify changes are saved",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "At least one shift template 'Morning Shift' exists with Start: 08:00 AM, End: 05:00 PM",
        "User is on the shift template management page"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate 'Morning Shift' template in the list and click the 'Edit' icon button",
          "expectedResult": "Edit template form opens pre-populated with existing values: Template Name: 'Morning Shift', Start: 08:00 AM, End: 05:00 PM"
        },
        {
          "step": 2,
          "action": "Change the End Time from '05:00 PM' to '06:00 PM'",
          "expectedResult": "End Time field updates to display '06:00 PM'"
        },
        {
          "step": 3,
          "action": "Click 'Add Break' and enter new break from '03:00 PM' to '03:15 PM'",
          "expectedResult": "New break entry appears: '03:00 PM - 03:15 PM'"
        },
        {
          "step": 4,
          "action": "Click 'Save Changes' button",
          "expectedResult": "Green success banner displays 'Shift template updated successfully' and form closes"
        },
        {
          "step": 5,
          "action": "Verify 'Morning Shift' template in the list",
          "expectedResult": "Template shows updated End Time: 06:00 PM and includes the new break period"
        }
      ],
      "postconditions": [
        "Template 'Morning Shift' is updated in the database with new End Time and break",
        "Updated template appears correctly in the templates list",
        "Audit log records the template modification with timestamp and administrator ID"
      ]
    },
    {
      "id": "TC-FUNC-004",
      "title": "Delete an existing shift template and verify it is removed from the system",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "At least one shift template 'Test Template' exists and is not currently assigned to any schedules",
        "User is on the shift template management page"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate 'Test Template' in the templates list and click the 'Delete' icon button",
          "expectedResult": "Confirmation dialog appears with message 'Are you sure you want to delete this template? This action cannot be undone.' with 'Cancel' and 'Delete' buttons"
        },
        {
          "step": 2,
          "action": "Click the 'Delete' button in the confirmation dialog",
          "expectedResult": "Confirmation dialog closes and green success banner appears with message 'Shift template deleted successfully'"
        },
        {
          "step": 3,
          "action": "Verify the templates list",
          "expectedResult": "'Test Template' no longer appears in the templates list"
        },
        {
          "step": 4,
          "action": "Refresh the page by pressing F5",
          "expectedResult": "Page reloads and 'Test Template' is still not present in the list, confirming deletion persisted"
        }
      ],
      "postconditions": [
        "Template 'Test Template' is removed from the ShiftTemplates database table",
        "Template is no longer available for selection in scheduling workflows",
        "Deletion is logged in the audit trail with administrator ID and timestamp"
      ]
    },
    {
      "id": "TC-FUNC-005",
      "title": "View list of all created shift templates with complete details",
      "category": "Functional",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as an Administrator",
        "At least 5 different shift templates exist in the system",
        "User navigates to the shift template management page"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Observe the templates list section on the page",
          "expectedResult": "All 5 templates are displayed in a table/list format with columns: Template Name, Start Time, End Time, Break Times, Actions"
        },
        {
          "step": 2,
          "action": "Verify each template row displays complete information",
          "expectedResult": "Each row shows template name, formatted start time (HH:MM AM/PM), formatted end time (HH:MM AM/PM), number of breaks or break details, and action buttons (Edit, Delete)"
        },
        {
          "step": 3,
          "action": "Click on a template name to expand details",
          "expectedResult": "Template details expand showing full break schedule with start and end times for each break period"
        },
        {
          "step": 4,
          "action": "Verify the templates are sorted by creation date (newest first)",
          "expectedResult": "Most recently created template appears at the top of the list"
        }
      ],
      "postconditions": [
        "All templates remain in their current state",
        "User remains on the shift template management page",
        "No data is modified"
      ]
    },
    {
      "id": "TC-FUNC-006",
      "title": "Create shift template without break times and verify it saves successfully",
      "category": "Functional",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "Break times are optional for template creation"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter 'No Break Shift' in Template Name field",
          "expectedResult": "Template Name field displays 'No Break Shift'"
        },
        {
          "step": 3,
          "action": "Enter '09:00 AM' as Start Time and '12:00 PM' as End Time",
          "expectedResult": "Start Time shows '09:00 AM' and End Time shows '12:00 PM'"
        },
        {
          "step": 4,
          "action": "Do not add any break times, click 'Save Template' button directly",
          "expectedResult": "Success message 'Shift template created successfully' appears and form closes"
        },
        {
          "step": 5,
          "action": "Locate 'No Break Shift' in the templates list",
          "expectedResult": "Template appears with Start: 09:00 AM, End: 12:00 PM, and Break Times column shows 'None' or is empty"
        }
      ],
      "postconditions": [
        "Template 'No Break Shift' is saved in database without break times",
        "Template is available for use in scheduling",
        "Template appears correctly in the list view"
      ]
    },
    {
      "id": "TC-FUNC-007",
      "title": "Verify system handles creation of 100th template without performance degradation",
      "category": "Functional",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as an Administrator",
        "Exactly 99 shift templates already exist in the system",
        "User is on the shift template management page",
        "System performance baseline is established (page load < 2 seconds)"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Note the current page load time and responsiveness",
          "expectedResult": "Page loads within 2 seconds and is responsive"
        },
        {
          "step": 2,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Form opens within 1 second"
        },
        {
          "step": 3,
          "action": "Enter '100th Template' as name, '08:00 AM' as Start Time, '04:00 PM' as End Time",
          "expectedResult": "All fields accept input without delay"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button and measure response time",
          "expectedResult": "Template saves within 2 seconds and success message appears"
        },
        {
          "step": 5,
          "action": "Verify the templates list loads with all 100 templates",
          "expectedResult": "List displays all 100 templates within 3 seconds with pagination or scrolling functionality"
        },
        {
          "step": 6,
          "action": "Attempt to create a 101st template",
          "expectedResult": "System either allows creation (if limit is soft) or displays message 'Maximum template limit reached (100)' and prevents creation"
        }
      ],
      "postconditions": [
        "System maintains performance with 100 templates loaded",
        "All templates remain accessible and functional",
        "No performance degradation is observed in page load or interactions"
      ]
    }
  ],
  "negative": [
    {
      "id": "TC-NEGA-001",
      "title": "Attempt to create shift template with end time before start time",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "Template creation form is open"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter 'Invalid Time Shift' in Template Name field",
          "expectedResult": "Template Name field displays 'Invalid Time Shift'"
        },
        {
          "step": 3,
          "action": "Select '05:00 PM' as Start Time",
          "expectedResult": "Start Time field displays '05:00 PM'"
        },
        {
          "step": 4,
          "action": "Select '08:00 AM' as End Time (earlier than start time)",
          "expectedResult": "End Time field displays '08:00 AM'"
        },
        {
          "step": 5,
          "action": "Click 'Save Template' button",
          "expectedResult": "Red error message appears below End Time field stating 'End time must be after start time' and template is not saved"
        },
        {
          "step": 6,
          "action": "Verify the templates list",
          "expectedResult": "'Invalid Time Shift' does not appear in the templates list"
        }
      ],
      "postconditions": [
        "No new template is created in the database",
        "User remains on the template creation form with error message visible",
        "Form fields retain entered values for correction"
      ]
    },
    {
      "id": "TC-NEGA-002",
      "title": "Attempt to create shift template with empty required fields",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "Template creation form is open"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens with empty fields"
        },
        {
          "step": 2,
          "action": "Leave Template Name field empty",
          "expectedResult": "Template Name field remains empty"
        },
        {
          "step": 3,
          "action": "Leave Start Time field empty",
          "expectedResult": "Start Time field remains empty"
        },
        {
          "step": 4,
          "action": "Leave End Time field empty",
          "expectedResult": "End Time field remains empty"
        },
        {
          "step": 5,
          "action": "Click 'Save Template' button",
          "expectedResult": "Red error messages appear: 'Template Name is required' below name field, 'Start Time is required' below start time field, 'End Time is required' below end time field. Template is not saved"
        },
        {
          "step": 6,
          "action": "Verify no API call is made to POST /api/shift-templates",
          "expectedResult": "Network tab shows no POST request was sent"
        }
      ],
      "postconditions": [
        "No template is created in the database",
        "User remains on the form with validation errors displayed",
        "Save button remains enabled for retry after corrections"
      ]
    },
    {
      "id": "TC-NEGA-003",
      "title": "Attempt to create shift template with break time outside of shift hours",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "Template creation form is open"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter 'Invalid Break Shift' as Template Name, '09:00 AM' as Start Time, '05:00 PM' as End Time",
          "expectedResult": "All fields display entered values"
        },
        {
          "step": 3,
          "action": "Click 'Add Break' and enter break time from '06:00 PM' to '06:30 PM' (after shift end time)",
          "expectedResult": "Break time entry appears showing '06:00 PM - 06:30 PM'"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Red error message appears: 'Break time must be within shift hours (09:00 AM - 05:00 PM)' and template is not saved"
        }
      ],
      "postconditions": [
        "No template is created in the database",
        "User remains on form with error message",
        "Break entry remains visible for correction"
      ]
    },
    {
      "id": "TC-NEGA-004",
      "title": "Attempt to create shift template with overlapping break times",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "Template creation form is open"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter 'Overlapping Breaks' as Template Name, '08:00 AM' as Start Time, '06:00 PM' as End Time",
          "expectedResult": "All fields display entered values"
        },
        {
          "step": 3,
          "action": "Click 'Add Break' and enter first break from '12:00 PM' to '01:00 PM'",
          "expectedResult": "First break entry appears: '12:00 PM - 01:00 PM'"
        },
        {
          "step": 4,
          "action": "Click 'Add Break' and enter second break from '12:30 PM' to '01:30 PM' (overlaps with first break)",
          "expectedResult": "Second break entry appears: '12:30 PM - 01:30 PM'"
        },
        {
          "step": 5,
          "action": "Click 'Save Template' button",
          "expectedResult": "Red error message appears: 'Break times cannot overlap. Please adjust break periods.' and template is not saved"
        }
      ],
      "postconditions": [
        "No template is created in the database",
        "Both break entries remain visible with error indication",
        "User can edit or remove breaks to resolve conflict"
      ]
    },
    {
      "id": "TC-NEGA-005",
      "title": "Attempt to access shift template creation without administrator permissions",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in with 'Employee' role (non-administrator)",
        "User attempts to navigate to /admin/shift-templates URL directly"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter URL '/admin/shift-templates' in browser address bar and press Enter",
          "expectedResult": "System redirects to access denied page or displays error message 'You do not have permission to access this page'"
        },
        {
          "step": 2,
          "action": "Attempt to access the API endpoint directly by sending POST request to /api/shift-templates with valid template data",
          "expectedResult": "API returns 403 Forbidden status code with error message 'Insufficient permissions'"
        },
        {
          "step": 3,
          "action": "Verify no template was created",
          "expectedResult": "Database query confirms no new template was added"
        }
      ],
      "postconditions": [
        "No template is created",
        "User access attempt is logged in security audit trail",
        "User remains on access denied page or is redirected to their authorized home page"
      ]
    },
    {
      "id": "TC-NEGA-006",
      "title": "Attempt to create shift template with SQL injection in template name field",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "Template creation form is open"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter SQL injection string \"'; DROP TABLE ShiftTemplates; --\" in Template Name field",
          "expectedResult": "Template Name field displays the entered string"
        },
        {
          "step": 3,
          "action": "Enter '09:00 AM' as Start Time and '05:00 PM' as End Time",
          "expectedResult": "Time fields display entered values"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Either: (1) Template is saved with the string treated as literal text, or (2) Validation error appears: 'Template name contains invalid characters'"
        },
        {
          "step": 5,
          "action": "Verify ShiftTemplates table still exists and contains all previous data",
          "expectedResult": "Database table is intact, no SQL injection was executed, all existing templates remain"
        }
      ],
      "postconditions": [
        "Database integrity is maintained",
        "No SQL injection attack was successful",
        "Security event is logged if malicious input was detected"
      ]
    },
    {
      "id": "TC-NEGA-007",
      "title": "Attempt to delete a shift template that is currently assigned to active schedules",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "Shift template 'Active Shift' exists and is assigned to at least one active employee schedule",
        "User is on the shift template management page"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Locate 'Active Shift' template in the list and click the 'Delete' icon button",
          "expectedResult": "Confirmation dialog appears"
        },
        {
          "step": 2,
          "action": "Click 'Delete' button in the confirmation dialog",
          "expectedResult": "Red error message appears: 'Cannot delete template. This template is currently assigned to active schedules. Please remove all assignments before deleting.'"
        },
        {
          "step": 3,
          "action": "Verify the template still exists in the list",
          "expectedResult": "'Active Shift' template remains in the templates list unchanged"
        },
        {
          "step": 4,
          "action": "Verify database integrity",
          "expectedResult": "Template still exists in ShiftTemplates table and all schedule assignments remain intact"
        }
      ],
      "postconditions": [
        "Template 'Active Shift' is not deleted",
        "All schedule assignments remain active",
        "Error message guides user on how to proceed"
      ]
    }
  ],
  "edgeCases": [
    {
      "id": "TC-EDGE-001",
      "title": "Create shift template with minimum valid duration (1 minute)",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "System allows minimum shift duration of 1 minute"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter 'Minimum Duration Shift' as Template Name",
          "expectedResult": "Template Name field displays 'Minimum Duration Shift'"
        },
        {
          "step": 3,
          "action": "Enter '09:00 AM' as Start Time and '09:01 AM' as End Time (1 minute duration)",
          "expectedResult": "Start Time shows '09:00 AM' and End Time shows '09:01 AM'"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template saves successfully with message 'Shift template created successfully' or validation error appears if minimum duration requirement exists"
        },
        {
          "step": 5,
          "action": "If saved, verify template appears in list with correct duration",
          "expectedResult": "Template displays with 1-minute duration calculated correctly"
        }
      ],
      "postconditions": [
        "Template is saved if system allows 1-minute shifts, or appropriate validation error is shown",
        "System behavior is consistent with business rules for minimum shift duration"
      ]
    },
    {
      "id": "TC-EDGE-002",
      "title": "Create shift template with maximum valid duration (24 hours)",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "System supports 24-hour shift templates"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter '24 Hour Shift' as Template Name",
          "expectedResult": "Template Name field displays '24 Hour Shift'"
        },
        {
          "step": 3,
          "action": "Enter '12:00 AM' as Start Time and '11:59 PM' as End Time (23 hours 59 minutes)",
          "expectedResult": "Start Time shows '12:00 AM' and End Time shows '11:59 PM'"
        },
        {
          "step": 4,
          "action": "Add break from '12:00 PM' to '01:00 PM'",
          "expectedResult": "Break entry appears: '12:00 PM - 01:00 PM'"
        },
        {
          "step": 5,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template saves successfully with message 'Shift template created successfully'"
        },
        {
          "step": 6,
          "action": "Verify template in list shows correct duration calculation",
          "expectedResult": "Template displays with duration of 23 hours 59 minutes or 'Full Day' indicator"
        }
      ],
      "postconditions": [
        "Template '24 Hour Shift' is saved with maximum duration",
        "Duration calculations are accurate",
        "Template is available for scheduling"
      ]
    },
    {
      "id": "TC-EDGE-003",
      "title": "Create shift template with template name containing special characters and Unicode",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "System supports Unicode characters in template names"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter 'Shiftâ„¢ @#$% æ—©ç­ ðŸŒ… CafÃ©' in Template Name field (contains trademark symbol, special characters, Chinese characters, emoji, accented characters)",
          "expectedResult": "Template Name field displays 'Shiftâ„¢ @#$% æ—©ç­ ðŸŒ… CafÃ©' correctly"
        },
        {
          "step": 3,
          "action": "Enter '08:00 AM' as Start Time and '04:00 PM' as End Time",
          "expectedResult": "Time fields display entered values"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template saves successfully with message 'Shift template created successfully'"
        },
        {
          "step": 5,
          "action": "Verify template appears in list with all special characters and Unicode displayed correctly",
          "expectedResult": "Template name 'Shiftâ„¢ @#$% æ—©ç­ ðŸŒ… CafÃ©' displays correctly without character corruption or encoding issues"
        },
        {
          "step": 6,
          "action": "Click to edit the template and verify name is preserved",
          "expectedResult": "Edit form shows template name exactly as entered with all special characters intact"
        }
      ],
      "postconditions": [
        "Template is saved with Unicode and special characters preserved",
        "Character encoding is handled correctly throughout the system",
        "Template name displays consistently across all views"
      ]
    },
    {
      "id": "TC-EDGE-004",
      "title": "Create shift template with template name at maximum character limit",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "Template name field has a maximum character limit (assume 255 characters)"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter a 255-character string in Template Name field: 'A' repeated 255 times",
          "expectedResult": "Template Name field accepts exactly 255 characters and prevents entry of 256th character, or shows character counter '255/255'"
        },
        {
          "step": 3,
          "action": "Enter '09:00 AM' as Start Time and '05:00 PM' as End Time",
          "expectedResult": "Time fields display entered values"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template saves successfully with message 'Shift template created successfully'"
        },
        {
          "step": 5,
          "action": "Verify template appears in list with full name visible or truncated with ellipsis",
          "expectedResult": "Template appears in list, name is either fully visible with horizontal scroll, or truncated with tooltip showing full name on hover"
        }
      ],
      "postconditions": [
        "Template is saved with maximum length name",
        "Database stores full 255-character name without truncation",
        "UI handles long names gracefully without breaking layout"
      ]
    },
    {
      "id": "TC-EDGE-005",
      "title": "Verify system behavior when exactly 100 templates exist (performance boundary)",
      "category": "Edge Cases",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "Exactly 100 shift templates exist in the system",
        "User is on the shift template management page"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Measure page load time when accessing /admin/shift-templates",
          "expectedResult": "Page loads within 3 seconds with all 100 templates displayed or paginated"
        },
        {
          "step": 2,
          "action": "Scroll through the entire list of templates",
          "expectedResult": "Scrolling is smooth without lag, all templates render correctly"
        },
        {
          "step": 3,
          "action": "Use search/filter functionality if available to find a specific template",
          "expectedResult": "Search returns results within 1 second"
        },
        {
          "step": 4,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Form opens within 1 second, or system displays message 'Maximum template limit (100) reached. Please delete unused templates before creating new ones.'"
        },
        {
          "step": 5,
          "action": "If creation is blocked, attempt to delete one template and then create a new one",
          "expectedResult": "After deletion, creation is allowed and new template saves successfully"
        }
      ],
      "postconditions": [
        "System maintains performance with 100 templates",
        "Template limit enforcement is consistent",
        "User receives clear feedback about system limits"
      ]
    },
    {
      "id": "TC-EDGE-006",
      "title": "Create shift template with break time exactly at shift boundaries",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "System allows breaks at shift start or end times"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Template creation form opens"
        },
        {
          "step": 2,
          "action": "Enter 'Boundary Break Shift' as Template Name, '09:00 AM' as Start Time, '05:00 PM' as End Time",
          "expectedResult": "All fields display entered values"
        },
        {
          "step": 3,
          "action": "Click 'Add Break' and enter break from '09:00 AM' to '09:15 AM' (starts exactly at shift start time)",
          "expectedResult": "Break entry appears: '09:00 AM - 09:15 AM'"
        },
        {
          "step": 4,
          "action": "Click 'Add Break' and enter another break from '04:45 PM' to '05:00 PM' (ends exactly at shift end time)",
          "expectedResult": "Second break entry appears: '04:45 PM - 05:00 PM'"
        },
        {
          "step": 5,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template saves successfully, or validation error appears if breaks cannot be at exact boundaries"
        }
      ],
      "postconditions": [
        "System behavior is consistent with business rules for break placement",
        "If saved, breaks at boundaries are stored correctly",
        "If rejected, clear validation message explains the constraint"
      ]
    },
    {
      "id": "TC-EDGE-007",
      "title": "Rapidly create multiple templates in quick succession to test race conditions",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "Browser developer tools are open to monitor network requests"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click 'Create New Template' button and quickly fill in 'Rapid Test 1', Start: '08:00 AM', End: '04:00 PM'",
          "expectedResult": "Form is filled with values"
        },
        {
          "step": 2,
          "action": "Click 'Save Template' button",
          "expectedResult": "Save request is initiated"
        },
        {
          "step": 3,
          "action": "Immediately click 'Create New Template' again before first save completes and fill in 'Rapid Test 2', Start: '09:00 AM', End: '05:00 PM'",
          "expectedResult": "Second form opens and is filled"
        },
        {
          "step": 4,
          "action": "Click 'Save Template' button for second template",
          "expectedResult": "Second save request is initiated"
        },
        {
          "step": 5,
          "action": "Repeat steps 3-4 for 'Rapid Test 3'",
          "expectedResult": "Third save request is initiated"
        },
        {
          "step": 6,
          "action": "Wait for all requests to complete and verify templates list",
          "expectedResult": "All three templates ('Rapid Test 1', 'Rapid Test 2', 'Rapid Test 3') appear in the list with correct data, no duplicates, no data corruption"
        },
        {
          "step": 7,
          "action": "Verify database contains exactly 3 new templates with unique IDs",
          "expectedResult": "Database shows 3 distinct templates with no duplicate entries or race condition issues"
        }
      ],
      "postconditions": [
        "All templates are saved correctly without data loss",
        "No race conditions caused duplicate or corrupted data",
        "System handles concurrent requests appropriately"
      ]
    }
  ],
  "accessibility": [
    {
      "id": "TC-ACCE-001",
      "title": "Verify complete keyboard navigation through shift template creation workflow",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "No mouse or pointing device is used for this test",
        "Screen reader is not active (pure keyboard test)"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Press Tab key repeatedly to navigate through page elements",
          "expectedResult": "Focus moves sequentially through all interactive elements: navigation menu, 'Create New Template' button, template list items, edit buttons, delete buttons. Focus indicator is clearly visible with 2px solid border or outline"
        },
        {
          "step": 2,
          "action": "Navigate to 'Create New Template' button and press Enter key",
          "expectedResult": "Template creation form modal opens and focus automatically moves to the first field (Template Name)"
        },
        {
          "step": 3,
          "action": "Type 'Keyboard Test Shift' in Template Name field and press Tab",
          "expectedResult": "Text is entered and focus moves to Start Time field"
        },
        {
          "step": 4,
          "action": "In Start Time field, type '0800' or use arrow keys to select '08:00 AM', then press Tab",
          "expectedResult": "Start Time is set to '08:00 AM' and focus moves to End Time field"
        },
        {
          "step": 5,
          "action": "In End Time field, type '1700' or use arrow keys to select '05:00 PM', then press Tab",
          "expectedResult": "End Time is set to '05:00 PM' and focus moves to 'Add Break' button"
        },
        {
          "step": 6,
          "action": "Press Enter on 'Add Break' button, then Tab to break start time, enter '12:00 PM', Tab to break end time, enter '01:00 PM'",
          "expectedResult": "Break fields are populated correctly, focus moves through break time fields"
        },
        {
          "step": 7,
          "action": "Press Tab to navigate to 'Save Template' button and press Enter",
          "expectedResult": "Template is saved, success message appears, and focus returns to 'Create New Template' button or first template in list"
        },
        {
          "step": 8,
          "action": "Press Escape key while form is open",
          "expectedResult": "Form closes without saving and focus returns to 'Create New Template' button"
        }
      ],
      "postconditions": [
        "All functionality is accessible via keyboard only",
        "Focus order is logical and follows visual layout",
        "No keyboard traps exist where user cannot escape",
        "Focus indicators are visible throughout interaction"
      ]
    },
    {
      "id": "TC-ACCE-002",
      "title": "Verify screen reader announces all elements and state changes correctly (NVDA/JAWS)",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "NVDA or JAWS screen reader is active",
        "User is on the shift template management page",
        "Screen reader verbosity is set to default level"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to 'Create New Template' button using screen reader navigation",
          "expectedResult": "Screen reader announces: 'Create New Template, button' with role and accessible name"
        },
        {
          "step": 2,
          "action": "Activate the button and listen to announcement when form opens",
          "expectedResult": "Screen reader announces: 'Dialog opened, Create Shift Template' or 'Modal dialog, Create Shift Template, Template Name, edit, required'"
        },
        {
          "step": 3,
          "action": "Navigate to Template Name field",
          "expectedResult": "Screen reader announces: 'Template Name, edit, required, blank' with field label, role, required state, and current value"
        },
        {
          "step": 4,
          "action": "Navigate to Start Time field",
          "expectedResult": "Screen reader announces: 'Start Time, time picker, required' or 'Start Time, edit, required' with appropriate role"
        },
        {
          "step": 5,
          "action": "Fill in all fields and navigate to 'Save Template' button, then activate it",
          "expectedResult": "Screen reader announces: 'Save Template, button' then after save: 'Shift template created successfully, alert' or live region announcement"
        },
        {
          "step": 6,
          "action": "Navigate to the templates list",
          "expectedResult": "Screen reader announces: 'Shift Templates, list, 5 items' or 'Shift Templates, table, 5 rows' with structure information"
        },
        {
          "step": 7,
          "action": "Navigate to a template item in the list",
          "expectedResult": "Screen reader announces: 'Morning Shift, Start Time: 08:00 AM, End Time: 05:00 PM, Edit button, Delete button' with all relevant information"
        },
        {
          "step": 8,
          "action": "Navigate to Delete button and activate it to trigger confirmation dialog",
          "expectedResult": "Screen reader announces: 'Alert dialog, Are you sure you want to delete this template? This action cannot be undone. Cancel button, Delete button'"
        }
      ],
      "postconditions": [
        "All interactive elements have proper ARIA labels and roles",
        "State changes are announced via ARIA live regions",
        "Form validation errors are announced immediately",
        "Screen reader users can complete all tasks independently"
      ]
    },
    {
      "id": "TC-ACCE-003",
      "title": "Verify focus management and focus trap in modal dialogs",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "Keyboard-only navigation is being used"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Press Tab to navigate to 'Create New Template' button and press Enter",
          "expectedResult": "Modal opens and focus automatically moves to first focusable element (Template Name field)"
        },
        {
          "step": 2,
          "action": "Press Shift+Tab repeatedly to move focus backward",
          "expectedResult": "Focus moves backward through form fields and when reaching the first element, pressing Shift+Tab moves focus to the last focusable element in modal (Save or Cancel button), creating a focus trap within modal"
        },
        {
          "step": 3,
          "action": "Press Tab repeatedly to move focus forward from last element",
          "expectedResult": "Focus wraps around to first element in modal (Template Name field), confirming focus is trapped within modal and cannot escape to background page"
        },
        {
          "step": 4,
          "action": "Press Escape key",
          "expectedResult": "Modal closes and focus returns to 'Create New Template' button that originally opened the modal"
        },
        {
          "step": 5,
          "action": "Open modal again, fill in fields, and click 'Save Template' button",
          "expectedResult": "Modal closes after successful save and focus returns to logical location (either 'Create New Template' button or newly created template in list)"
        },
        {
          "step": 6,
          "action": "Navigate to a template's Delete button and activate it to open confirmation dialog",
          "expectedResult": "Confirmation dialog opens and focus moves to 'Cancel' or 'Delete' button (preferably Cancel as safer default)"
        },
        {
          "step": 7,
          "action": "Press Escape key in confirmation dialog",
          "expectedResult": "Dialog closes without deleting and focus returns to Delete button that triggered the dialog"
        }
      ],
      "postconditions": [
        "Focus is properly trapped within modal dialogs",
        "Focus returns to triggering element when modal closes",
        "Escape key closes modals and returns focus appropriately",
        "No focus is lost or moved to unexpected locations"
      ]
    },
    {
      "id": "TC-ACCE-004",
      "title": "Verify color contrast ratios meet WCAG 2.1 Level AA standards (4.5:1 for normal text)",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is on the shift template management page",
        "Color contrast analyzer tool is available (browser extension or standalone tool)",
        "Page is displayed at 100% zoom"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Use color contrast analyzer to check contrast ratio of page heading 'Shift Template Management' against background",
          "expectedResult": "Contrast ratio is at least 4.5:1 for normal text or 3:1 for large text (18pt+ or 14pt+ bold)"
        },
        {
          "step": 2,
          "action": "Check contrast ratio of 'Create New Template' button text against button background",
          "expectedResult": "Contrast ratio is at least 4.5:1, button is clearly readable"
        },
        {
          "step": 3,
          "action": "Check contrast ratio of form field labels (Template Name, Start Time, End Time) against page background",
          "expectedResult": "Contrast ratio is at least 4.5:1 for all labels"
        },
        {
          "step": 4,
          "action": "Check contrast ratio of placeholder text in input fields against field background",
          "expectedResult": "Contrast ratio is at least 4.5:1 or placeholder text is not relied upon for critical information"
        },
        {
          "step": 5,
          "action": "Check contrast ratio of success message (green) text against background",
          "expectedResult": "Contrast ratio is at least 4.5:1, message is readable without relying on color alone"
        },
        {
          "step": 6,
          "action": "Check contrast ratio of error message (red) text against background",
          "expectedResult": "Contrast ratio is at least 4.5:1, error is indicated by icon or text in addition to color"
        },
        {
          "step": 7,
          "action": "Check contrast ratio of focus indicators (outline/border) against background",
          "expectedResult": "Focus indicator has at least 3:1 contrast ratio against adjacent colors"
        },
        {
          "step": 8,
          "action": "Check contrast of disabled button or field against background",
          "expectedResult": "Disabled state is indicated by more than just reduced contrast (e.g., cursor change, explicit 'disabled' text)"
        }
      ],
      "postconditions": [
        "All text meets WCAG 2.1 Level AA contrast requirements",
        "Information is not conveyed by color alone",
        "Focus indicators are clearly visible",
        "Page is readable for users with low vision or color blindness"
      ]
    },
    {
      "id": "TC-ACCE-005",
      "title": "Verify page functionality at 200% browser zoom level",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as an Administrator",
        "User is on the shift template management page",
        "Browser zoom is set to 100% initially"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Press Ctrl and + (or Cmd and + on Mac) repeatedly to zoom to 200%",
          "expectedResult": "Page zooms to 200% and all content remains visible without horizontal scrolling (or minimal horizontal scrolling)"
        },
        {
          "step": 2,
          "action": "Verify all text is readable and not truncated",
          "expectedResult": "All headings, labels, button text, and body text are fully visible and readable at 200% zoom"
        },
        {
          "step": 3,
          "action": "Click 'Create New Template' button",
          "expectedResult": "Modal opens and is fully visible at 200% zoom, all form fields are accessible without excessive scrolling"
        },
        {
          "step": 4,
          "action": "Fill in all form fields (Template Name, Start Time, End Time, Break Times)",
          "expectedResult": "All fields are accessible and functional, time pickers work correctly at 200% zoom"
        },
        {
          "step": 5,
          "action": "Scroll through the form if necessary",
          "expectedResult": "Scrolling is smooth, no content is hidden or inaccessible, sticky headers/footers (if any) don't obscure content"
        },
        {
          "step": 6,
          "action": "Click 'Save Template' button",
          "expectedResult": "Template saves successfully, success message is fully visible at 200% zoom"
        },
        {
          "step": 7,
          "action": "Verify templates list is readable and functional at 200% zoom",
          "expectedResult": "List items are readable, Edit and Delete buttons are accessible and properly sized, no layout breaks"
        }
      ],
      "postconditions": [
        "All functionality works correctly at 200% zoom",
        "No content is lost or becomes inaccessible",
        "Layout adapts responsively without breaking",
        "Users with low vision can use the feature effectively"
      ]
    },
    {
      "id": "TC-ACCE-006",
      "title": "Verify proper ARIA labels, roles, and landmarks for assistive technology",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is on the shift template management page",
        "Browser developer tools are open to inspect HTML elements",
        "Accessibility tree view is available in developer tools"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Inspect the main page structure in accessibility tree",
          "expectedResult": "Page has proper landmark regions: <header> or role='banner', <main> or role='main', <nav> or role='navigation', <footer> or role='contentinfo'"
        },
        {
          "step": 2,
          "action": "Inspect 'Create New Template' button element",
          "expectedResult": "Button has accessible name (aria-label or visible text), role='button' (implicit or explicit), and no empty or generic labels"
        },
        {
          "step": 3,
          "action": "Open template creation modal and inspect modal container",
          "expectedResult": "Modal has role='dialog' or role='alertdialog', aria-labelledby pointing to modal title, aria-modal='true' to indicate modal state"
        },
        {
          "step": 4,
          "action": "Inspect form fields (Template Name, Start Time, End Time)",
          "expectedResult": "Each field has associated <label> with for attribute matching input id, or aria-label/aria-labelledby, required fields have aria-required='true' or required attribute"
        },
        {
          "step": 5,
          "action": "Inspect time picker components",
          "expectedResult": "Time pickers have appropriate role (combobox, spinbutton, or custom with proper ARIA), aria-label describes purpose, keyboard interaction is documented or intuitive"
        },
        {
          "step": 6,
          "action": "Trigger a validation error and inspect error message",
          "expectedResult": "Error message has role='alert' or is in aria-live='assertive' region, error is associated with field via aria-describedby, field has aria-invalid='true'"
        },
        {
          "step": 7,
          "action": "Inspect success message after saving template",
          "expectedResult": "Success message is in aria-live='polite' or role='status' region so screen readers announce it automatically"
        },
        {
          "step": 8,
          "action": "Inspect templates list structure",
          "expectedResult": "List has role='list' with child role='listitem', or is a proper <table> with <thead>, <tbody>, <th> scope attributes for data table"
        }
      ],
      "postconditions": [
        "All interactive elements have proper ARIA roles and labels",
        "Landmark regions provide clear page structure",
        "Dynamic content changes are announced to screen readers",
        "Form validation is accessible to assistive technology"
      ]
    },
    {
      "id": "TC-ACCE-007",
      "title": "Verify mobile accessibility including touch target sizes and gesture support",
      "category": "Accessibility",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as an Administrator",
        "Page is accessed on mobile device or browser in mobile emulation mode (375x667 viewport)",
        "Touch input is being used (not mouse)"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Measure the size of 'Create New Template' button on mobile viewport",
          "expectedResult": "Button is at least 44x44 CSS pixels (iOS) or 48x48 CSS pixels (Android) to meet touch target size guidelines"
        },
        {
          "step": 2,
          "action": "Tap 'Create New Template' button",
          "expectedResult": "Button responds to tap immediately, modal opens, no accidental activation of nearby elements"
        },
        {
          "step": 3,
          "action": "Verify spacing between interactive elements (Edit and Delete buttons in list)",
          "expectedResult": "Minimum 8px spacing between touch targets to prevent accidental taps"
        },
        {
          "step": 4,
          "action": "Fill in form fields using mobile keyboard",
          "expectedResult": "Appropriate keyboard types appear: text keyboard for Template Name, time picker or numeric keyboard for time fields"
        },
        {
          "step": 5,
          "action": "Test time picker interaction on mobile",
          "expectedResult": "Time picker is touch-friendly, uses native mobile time picker if available, or custom picker has large touch targets"
        },
        {
          "step": 6,
          "action": "Attempt to scroll the templates list on mobile",
          "expectedResult": "List scrolls smoothly with touch gestures, no horizontal scrolling required, content fits viewport width"
        },
        {
          "step": 7,
          "action": "Test swipe gestures if implemented (e.g., swipe to delete)",
          "expectedResult": "Swipe gestures work reliably, have visual feedback, and include alternative methods (buttons) for users who cannot perform gestures"
        },
        {
          "step": 8,
          "action": "Test with mobile screen reader (TalkBack on Android or VoiceOver on iOS)",
          "expectedResult": "All elements are announced correctly, touch exploration works, double-tap to activate functions properly"
        }
      ],
      "postconditions": [
        "All touch targets meet minimum size requirements",
        "Mobile interactions are smooth and reliable",
        "Mobile screen readers can access all functionality",
        "No functionality requires precise touch or complex gestures"
      ]
    }
  ],
  "selectedTypes": {
    "functional": true,
    "negative": true,
    "edgeCases": true,
    "accessibility": true
  },
  "userStoryObject": {
    "id": "db-story-story-1",
    "title": "As Administrator, I want to perform shift template creation to achieve reusable scheduling.",
    "description": "CONTEXT & BACKGROUND:\nThe ability to create shift templates is essential for streamlining the scheduling process. This feature allows administrators to define shifts that can be reused, reducing the time spent on scheduling.\n\nCURRENT STATE:\nCurrently, scheduling is done manually without templates, leading to inconsistencies and increased workload.\n\nDESIRED STATE:\nAdministrators can create and manage templates, ensuring consistency and efficiency in scheduling.\n\nKEY FUNCTIONALITY:\nâ€¢ Create new shift templates with start and end times.\nâ€¢ Define break times within templates.\nâ€¢ Edit existing templates as needed.\nâ€¢ Delete templates that are no longer in use.\n\nUSER INTERACTION FLOW:\n1. Administrator navigates to the shift template management page.\n2. Administrator clicks on 'Create New Template'.\n3. Administrator inputs shift details (start time, end time, breaks).\n4. Administrator saves the template.\n5. System confirms template creation.\n6. Administrator can view the list of created templates.\n\nTECHNICAL CONSIDERATIONS:\nâ€¢ Data source: ShiftTemplates table in the database.\nâ€¢ Validation rules: Ensure start time is before end time.\nâ€¢ API endpoints: POST /api/shift-templates for creation.\nâ€¢ Security: Only authorized administrators can create templates.\nâ€¢ Performance: System should handle up to 100 templates without performance degradation.\n\nOUT OF SCOPE:\nâ€¢ Employee-specific scheduling is not included in this story.\n\nSUCCESS METRICS:\nâ€¢ 90% of templates created without errors.",
    "persona": "Administrator",
    "personaId": "",
    "acceptanceCriteria": [
      "System allows creation of shift templates with valid start and end times.",
      "System validates break times and ensures they do not overlap with shift times.",
      "System displays a confirmation message upon successful template creation.",
      "System lists all created templates for review."
    ],
    "priority": "High",
    "storyPoints": 5,
    "epicId": "",
    "status": "Backlog"
  }
}