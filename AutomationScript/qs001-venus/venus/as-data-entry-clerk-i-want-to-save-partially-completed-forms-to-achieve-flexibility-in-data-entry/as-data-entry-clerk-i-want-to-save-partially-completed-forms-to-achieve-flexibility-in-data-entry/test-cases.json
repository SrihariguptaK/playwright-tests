{
  "storyId": "24289",
  "storyTitle": "As Data Entry Clerk, I want to save partially completed forms to achieve flexibility in data entry.",
  "functional": [],
  "negative": [
    {
      "id": "TC-NEGA-001",
      "title": "Verify error handling when saving form without authentication token",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is on the data entry form page",
        "User has entered partial data in at least 3 form fields",
        "User's authentication token has expired or been removed from session",
        "Network connection is stable"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'John Doe' in the Name field",
          "expectedResult": "Text 'John Doe' appears in the Name field"
        },
        {
          "step": 2,
          "action": "Enter 'john.doe@example.com' in the Email field",
          "expectedResult": "Text 'john.doe@example.com' appears in the Email field"
        },
        {
          "step": 3,
          "action": "Clear the authentication token from browser session storage",
          "expectedResult": "Authentication token is removed from session"
        },
        {
          "step": 4,
          "action": "Click the 'Save' button in the top-right corner of the form",
          "expectedResult": "Error message 'Authentication required. Please log in again.' appears in red banner at top of page"
        },
        {
          "step": 5,
          "action": "Verify that the form data remains visible in the fields",
          "expectedResult": "All entered data is still visible in the form fields without being cleared"
        }
      ],
      "postconditions": [
        "Form data is not saved to the database",
        "User remains on the data entry page with entered data intact",
        "User is prompted to re-authenticate",
        "No partial data is stored in temporary storage"
      ]
    },
    {
      "id": "TC-NEGA-002",
      "title": "Verify error handling when saving form with network timeout",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is authenticated and logged into the system",
        "User is on the data entry form page with partial data entered",
        "Network simulation tool is configured to simulate timeout after 5 seconds",
        "Save operation timeout is set to 2 seconds as per technical requirements"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'Test Company' in the Company Name field",
          "expectedResult": "Text 'Test Company' appears in the Company Name field"
        },
        {
          "step": 2,
          "action": "Enter '123 Main Street' in the Address field",
          "expectedResult": "Text '123 Main Street' appears in the Address field"
        },
        {
          "step": 3,
          "action": "Simulate network delay of 5 seconds using network throttling tool",
          "expectedResult": "Network is throttled to delay responses by 5 seconds"
        },
        {
          "step": 4,
          "action": "Click the 'Save' button",
          "expectedResult": "Loading spinner appears for 2 seconds, then error message 'Save operation timed out. Please try again.' displays in red banner"
        },
        {
          "step": 5,
          "action": "Verify form data is still present in all fields",
          "expectedResult": "All entered data remains visible and editable in the form"
        }
      ],
      "postconditions": [
        "Form data is not saved to temporary storage",
        "User remains on the data entry page",
        "Form fields retain all entered data",
        "User can retry the save operation"
      ]
    },
    {
      "id": "TC-NEGA-003",
      "title": "Verify error handling when saving form with invalid/malicious data injection",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is authenticated as Data Entry Clerk",
        "User is on the data entry form page",
        "Form has text input fields accepting alphanumeric data",
        "SQL injection protection is implemented on backend"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'Robert'; DROP TABLE users;--' in the Name field",
          "expectedResult": "Text is entered into the Name field"
        },
        {
          "step": 2,
          "action": "Enter '<script>alert(\"XSS\")</script>' in the Comments field",
          "expectedResult": "Text is entered into the Comments field"
        },
        {
          "step": 3,
          "action": "Click the 'Save' button",
          "expectedResult": "Error message 'Invalid characters detected. Please remove special characters and try again.' appears in red banner"
        },
        {
          "step": 4,
          "action": "Verify that the malicious data is highlighted in the form",
          "expectedResult": "Name and Comments fields are outlined in red with validation error icons"
        },
        {
          "step": 5,
          "action": "Check that no data was saved to the database",
          "expectedResult": "No new records appear in the saved forms list"
        }
      ],
      "postconditions": [
        "No data is saved to temporary storage or database",
        "Form remains on the page with validation errors displayed",
        "System logs the attempted injection for security monitoring",
        "User can correct the input and retry"
      ]
    },
    {
      "id": "TC-NEGA-004",
      "title": "Verify error handling when attempting to save empty form",
      "category": "Negative",
      "priority": "Medium",
      "preconditions": [
        "User is authenticated as Data Entry Clerk",
        "User is on a new data entry form page",
        "All form fields are empty with no data entered",
        "Form requires at least one field to be filled for saving"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Verify all form fields are empty",
          "expectedResult": "All input fields, dropdowns, and text areas are blank"
        },
        {
          "step": 2,
          "action": "Click the 'Save' button without entering any data",
          "expectedResult": "Error message 'Cannot save empty form. Please enter data in at least one field.' appears in yellow warning banner"
        },
        {
          "step": 3,
          "action": "Verify that no save operation was initiated",
          "expectedResult": "No API call to POST /api/save-form is made (verify in network tab)"
        },
        {
          "step": 4,
          "action": "Check the saved forms list",
          "expectedResult": "No new entry appears in the saved forms list"
        }
      ],
      "postconditions": [
        "No empty form is saved to temporary storage",
        "User remains on the data entry page",
        "Form fields remain empty and editable",
        "No database or storage resources are consumed"
      ]
    },
    {
      "id": "TC-NEGA-005",
      "title": "Verify error handling when server returns 500 Internal Server Error during save",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is authenticated as Data Entry Clerk",
        "User is on the data entry form with partial data entered",
        "Backend server is configured to return 500 error for testing",
        "Network connection is stable"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'Product ABC' in the Product Name field",
          "expectedResult": "Text 'Product ABC' appears in the Product Name field"
        },
        {
          "step": 2,
          "action": "Enter '99.99' in the Price field",
          "expectedResult": "Text '99.99' appears in the Price field"
        },
        {
          "step": 3,
          "action": "Click the 'Save' button",
          "expectedResult": "Loading spinner appears briefly"
        },
        {
          "step": 4,
          "action": "Observe the error response from server",
          "expectedResult": "Error message 'Unable to save form due to server error. Please try again later or contact support.' appears in red banner with error code displayed"
        },
        {
          "step": 5,
          "action": "Verify form data is preserved",
          "expectedResult": "All entered data remains in the form fields"
        },
        {
          "step": 6,
          "action": "Verify a 'Retry' button is available",
          "expectedResult": "'Retry' button appears next to the error message"
        }
      ],
      "postconditions": [
        "Form data is not saved to temporary storage",
        "User remains on the data entry page with data intact",
        "Error is logged to system error logs with timestamp and user ID",
        "User can retry the save operation"
      ]
    },
    {
      "id": "TC-NEGA-006",
      "title": "Verify error handling when attempting to retrieve non-existent saved form",
      "category": "Negative",
      "priority": "Medium",
      "preconditions": [
        "User is authenticated as Data Entry Clerk",
        "User is on the saved forms list page",
        "A saved form ID 'FORM-99999' does not exist in the database",
        "User has permission to access saved forms"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Manually navigate to URL '/data-entry/form/FORM-99999' or click on a broken link",
          "expectedResult": "Page attempts to load the form"
        },
        {
          "step": 2,
          "action": "Observe the system response",
          "expectedResult": "Error message 'Form not found. The form may have been deleted or does not exist.' appears in yellow warning banner"
        },
        {
          "step": 3,
          "action": "Verify user is redirected to the saved forms list page",
          "expectedResult": "After 3 seconds, user is automatically redirected to '/data-entry/saved-forms' page"
        },
        {
          "step": 4,
          "action": "Check that no blank form is displayed",
          "expectedResult": "No empty or corrupted form data is shown to the user"
        }
      ],
      "postconditions": [
        "User is on the saved forms list page",
        "No invalid data is loaded or displayed",
        "Error is logged with the attempted form ID",
        "User can select a different valid saved form"
      ]
    },
    {
      "id": "TC-NEGA-007",
      "title": "Verify error handling when concurrent users attempt to save the same form simultaneously",
      "category": "Negative",
      "priority": "Medium",
      "preconditions": [
        "Two users (User A and User B) are authenticated as Data Entry Clerks",
        "Both users have opened the same saved form ID 'FORM-12345'",
        "Form allows concurrent access but not concurrent saves",
        "Both users have made different edits to the form"
      ],
      "steps": [
        {
          "step": 1,
          "action": "User A enters 'Updated by User A' in the Notes field",
          "expectedResult": "Text appears in User A's form view"
        },
        {
          "step": 2,
          "action": "User B enters 'Updated by User B' in the Notes field",
          "expectedResult": "Text appears in User B's form view"
        },
        {
          "step": 3,
          "action": "User A clicks the 'Save' button",
          "expectedResult": "Success message 'Form saved successfully at [timestamp]' appears for User A"
        },
        {
          "step": 4,
          "action": "User B clicks the 'Save' button immediately after",
          "expectedResult": "Error message 'This form has been modified by another user. Please refresh to see the latest version.' appears in orange warning banner for User B"
        },
        {
          "step": 5,
          "action": "User B clicks the 'Refresh' button provided in the error message",
          "expectedResult": "Form reloads with User A's saved data, User B's unsaved changes are highlighted in a 'Your Changes' panel on the side"
        }
      ],
      "postconditions": [
        "User A's changes are saved to the database",
        "User B's changes are not saved but are preserved in a temporary comparison view",
        "User B can choose to merge changes or discard their edits",
        "Conflict is logged in the system audit trail"
      ]
    }
  ],
  "edgeCases": [],
  "accessibility": [
    {
      "id": "TC-ACCE-001",
      "title": "Verify complete keyboard navigation for saving partially completed forms",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is on the data entry form page",
        "User is not using a mouse, only keyboard",
        "Form contains at least 5 input fields and a Save button",
        "Browser is Chrome, Firefox, or Edge with keyboard navigation enabled"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Press Tab key from the page header",
          "expectedResult": "Focus moves to the first form field with visible blue focus outline (2px solid border)"
        },
        {
          "step": 2,
          "action": "Type 'Test Data' in the focused field and press Tab",
          "expectedResult": "Data is entered and focus moves to the next form field with visible focus indicator"
        },
        {
          "step": 3,
          "action": "Continue pressing Tab through all form fields",
          "expectedResult": "Focus moves sequentially through all fields in logical order (top to bottom, left to right), each field shows clear focus indicator"
        },
        {
          "step": 4,
          "action": "Press Tab until focus reaches the 'Save' button",
          "expectedResult": "'Save' button receives focus with visible outline and background color change to indicate focus state"
        },
        {
          "step": 5,
          "action": "Press Enter key while 'Save' button is focused",
          "expectedResult": "Form save operation is triggered, success message appears and receives focus for screen reader announcement"
        },
        {
          "step": 6,
          "action": "Press Shift+Tab to navigate backwards through the form",
          "expectedResult": "Focus moves in reverse order through all fields back to the first field"
        },
        {
          "step": 7,
          "action": "Press Escape key while in any form field",
          "expectedResult": "If a modal or dropdown is open, it closes; otherwise, no action occurs and focus remains on current field"
        }
      ],
      "postconditions": [
        "All form elements are accessible via keyboard only",
        "Focus order is logical and predictable",
        "No keyboard traps exist in the form",
        "User can complete entire save workflow without mouse"
      ]
    },
    {
      "id": "TC-ACCE-002",
      "title": "Verify screen reader compatibility for save form functionality using NVDA",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "NVDA screen reader version 2021.3 or later is installed and running",
        "User is on the data entry form page",
        "Form has proper ARIA labels and landmarks configured",
        "Browser is Firefox or Chrome with screen reader support"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to the data entry form page with NVDA active",
          "expectedResult": "NVDA announces 'Data Entry Form, main landmark' and reads the page title"
        },
        {
          "step": 2,
          "action": "Press H key to navigate to the form heading",
          "expectedResult": "NVDA announces 'Data Entry Form, heading level 1'"
        },
        {
          "step": 3,
          "action": "Press F key to navigate to the first form field",
          "expectedResult": "NVDA announces 'Name, edit, blank' with field label, field type, and current state"
        },
        {
          "step": 4,
          "action": "Type 'John Smith' in the field",
          "expectedResult": "NVDA echoes each character typed and announces 'John Smith' when complete"
        },
        {
          "step": 5,
          "action": "Press Tab to move to the next field",
          "expectedResult": "NVDA announces the next field label, type, and state (e.g., 'Email, edit, required, blank')"
        },
        {
          "step": 6,
          "action": "Navigate to the 'Save' button using Tab or B key",
          "expectedResult": "NVDA announces 'Save, button' clearly indicating it is an actionable button"
        },
        {
          "step": 7,
          "action": "Press Enter to activate the Save button",
          "expectedResult": "NVDA announces 'Saving form' followed by 'Form saved successfully, alert' when save completes"
        },
        {
          "step": 8,
          "action": "Press Insert+F7 to open NVDA elements list",
          "expectedResult": "All form fields, buttons, and landmarks are listed with proper labels and roles"
        }
      ],
      "postconditions": [
        "All form elements have proper ARIA labels and are announced correctly",
        "Screen reader users can understand form structure and requirements",
        "Success and error messages are announced via ARIA live regions",
        "Form is fully usable with screen reader only"
      ]
    },
    {
      "id": "TC-ACCE-003",
      "title": "Verify focus management and visual focus indicators throughout save workflow",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is on the data entry form page",
        "Form contains multiple input fields, dropdown, and Save button",
        "Browser zoom is set to 100%",
        "High contrast mode is disabled initially"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click in the first form field",
          "expectedResult": "Field receives focus with visible blue outline (minimum 2px, contrast ratio 3:1 against background)"
        },
        {
          "step": 2,
          "action": "Tab through all form fields and observe focus indicators",
          "expectedResult": "Each field shows clear, consistent focus indicator that is at least 2px thick and has sufficient contrast"
        },
        {
          "step": 3,
          "action": "Enable Windows High Contrast Mode",
          "expectedResult": "Focus indicators remain visible and adapt to high contrast colors"
        },
        {
          "step": 4,
          "action": "Click the 'Save' button",
          "expectedResult": "Button shows focus state, then success message appears and automatically receives focus"
        },
        {
          "step": 5,
          "action": "Verify focus is moved to the success message",
          "expectedResult": "Success message container receives focus (visible outline) and is announced to screen readers"
        },
        {
          "step": 6,
          "action": "If an error occurs, trigger a validation error by entering invalid data and clicking Save",
          "expectedResult": "Focus automatically moves to the first field with an error, error message is visible and announced"
        },
        {
          "step": 7,
          "action": "Open a modal dialog (if available, e.g., 'Discard Changes' confirmation)",
          "expectedResult": "Focus is trapped within the modal, Tab cycles through modal elements only, Escape closes modal and returns focus to trigger element"
        }
      ],
      "postconditions": [
        "Focus is never lost or moved to unexpected locations",
        "All interactive elements have visible focus indicators meeting WCAG 2.1 Level AA",
        "Focus management follows logical patterns for modals and alerts",
        "No focus traps exist that prevent keyboard navigation"
      ]
    },
    {
      "id": "TC-ACCE-004",
      "title": "Verify color contrast and text sizing compliance for form elements",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is on the data entry form page",
        "Color contrast analyzer tool is available (e.g., WAVE, axe DevTools)",
        "Browser is set to default zoom level (100%)",
        "Form contains labels, input fields, buttons, and messages"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Use color contrast analyzer to check all text labels against their backgrounds",
          "expectedResult": "All labels have minimum contrast ratio of 4.5:1 for normal text (or 3:1 for large text 18pt+)"
        },
        {
          "step": 2,
          "action": "Check the 'Save' button text color against button background",
          "expectedResult": "Button text has contrast ratio of at least 4.5:1, button border has 3:1 contrast against adjacent colors"
        },
        {
          "step": 3,
          "action": "Check error messages and success messages for color contrast",
          "expectedResult": "Error text (red) has 4.5:1 contrast, success text (green) has 4.5:1 contrast, information is not conveyed by color alone"
        },
        {
          "step": 4,
          "action": "Increase browser zoom to 200% using Ctrl and + keys",
          "expectedResult": "All text scales proportionally, no text is cut off or overlapping, form remains fully functional"
        },
        {
          "step": 5,
          "action": "Verify form layout at 200% zoom",
          "expectedResult": "Form fields reflow appropriately, horizontal scrolling is not required, all buttons remain accessible"
        },
        {
          "step": 6,
          "action": "Check placeholder text contrast in empty fields",
          "expectedResult": "Placeholder text has minimum 4.5:1 contrast ratio or is supplemented with visible labels"
        },
        {
          "step": 7,
          "action": "Verify that required field indicators are not color-only",
          "expectedResult": "Required fields are marked with asterisk (*) or 'required' text in addition to any color coding"
        }
      ],
      "postconditions": [
        "All text meets WCAG 2.1 Level AA contrast requirements (4.5:1 for normal, 3:1 for large)",
        "Form is fully usable at 200% zoom without loss of functionality",
        "Information is not conveyed by color alone",
        "Form meets reflow requirements for responsive design"
      ]
    },
    {
      "id": "TC-ACCE-005",
      "title": "Verify ARIA labels, roles, and live regions for dynamic form updates",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is on the data entry form page",
        "Browser developer tools are open to inspect ARIA attributes",
        "Screen reader is available for testing announcements",
        "Form has dynamic elements that update based on user actions"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Inspect the form element in browser DevTools",
          "expectedResult": "Form has role='form' or is wrapped in <form> element, has aria-label='Data Entry Form' or aria-labelledby pointing to heading"
        },
        {
          "step": 2,
          "action": "Inspect each input field for ARIA attributes",
          "expectedResult": "Each field has associated <label> with for attribute, or aria-label/aria-labelledby, required fields have aria-required='true'"
        },
        {
          "step": 3,
          "action": "Inspect the Save button",
          "expectedResult": "Button has role='button' (implicit for <button>), has accessible name via text content or aria-label"
        },
        {
          "step": 4,
          "action": "Enter data and click Save, then inspect the success message container",
          "expectedResult": "Success message container has role='alert' or aria-live='polite', message is announced automatically by screen reader"
        },
        {
          "step": 5,
          "action": "Trigger a validation error and inspect the error message",
          "expectedResult": "Error message has role='alert' or aria-live='assertive', field with error has aria-invalid='true' and aria-describedby pointing to error message"
        },
        {
          "step": 6,
          "action": "Check for any loading states when Save is clicked",
          "expectedResult": "Save button shows aria-busy='true' during save operation, or loading spinner has role='status' with aria-live='polite' and text 'Saving...'"
        },
        {
          "step": 7,
          "action": "Verify that any dynamic content updates are announced",
          "expectedResult": "All dynamic updates (character count, validation messages, save status) are in ARIA live regions and announced to screen readers"
        }
      ],
      "postconditions": [
        "All form elements have proper ARIA roles and labels",
        "Dynamic content updates are announced via ARIA live regions",
        "Form state changes (loading, success, error) are communicated to assistive technologies",
        "Form passes automated accessibility testing tools (axe, WAVE)"
      ]
    },
    {
      "id": "TC-ACCE-006",
      "title": "Verify mobile accessibility including touch targets and gestures",
      "category": "Accessibility",
      "priority": "Medium",
      "preconditions": [
        "User is accessing the form on a mobile device (iOS or Android) or mobile emulator",
        "Screen size is 375px width (iPhone SE) or similar small mobile viewport",
        "Touch input is the primary interaction method",
        "Mobile screen reader (VoiceOver or TalkBack) is available for testing"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Measure the tap target size of the 'Save' button using browser DevTools",
          "expectedResult": "Save button is at least 44x44 CSS pixels (iOS) or 48x48dp (Android) meeting WCAG 2.1 Level AAA target size"
        },
        {
          "step": 2,
          "action": "Measure spacing between interactive elements (buttons, links, form fields)",
          "expectedResult": "Minimum 8px spacing between touch targets to prevent accidental activation"
        },
        {
          "step": 3,
          "action": "Tap on each form field to activate input",
          "expectedResult": "Each field activates reliably on first tap, mobile keyboard appears with appropriate input type (email, number, text)"
        },
        {
          "step": 4,
          "action": "Enable VoiceOver (iOS) or TalkBack (Android) and navigate through the form",
          "expectedResult": "Screen reader announces each field label, type, and state, swipe gestures move focus logically through form"
        },
        {
          "step": 5,
          "action": "Use double-tap gesture to activate the Save button with screen reader enabled",
          "expectedResult": "Save button activates, success message is announced automatically"
        },
        {
          "step": 6,
          "action": "Test form in landscape orientation",
          "expectedResult": "Form remains fully accessible, all elements are reachable, no content is cut off"
        },
        {
          "step": 7,
          "action": "Test with mobile browser zoom at 200%",
          "expectedResult": "Form scales appropriately, no horizontal scrolling required, all functionality remains accessible"
        }
      ],
      "postconditions": [
        "All touch targets meet minimum size requirements (44x44px or 48x48dp)",
        "Form is fully accessible with mobile screen readers",
        "Form works in both portrait and landscape orientations",
        "Mobile users can complete save workflow without accessibility barriers"
      ]
    },
    {
      "id": "TC-ACCE-007",
      "title": "Verify accessibility of saved forms retrieval and management interface",
      "category": "Accessibility",
      "priority": "Medium",
      "preconditions": [
        "User is authenticated as Data Entry Clerk",
        "User has at least 3 saved forms in the system",
        "User is on the 'Saved Forms' list page",
        "Screen reader and keyboard are available for testing"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to the saved forms list using keyboard only (Tab key)",
          "expectedResult": "Focus moves to the saved forms list container, screen reader announces 'Saved Forms, list, 3 items'"
        },
        {
          "step": 2,
          "action": "Press Arrow Down key to navigate through saved form items",
          "expectedResult": "Focus moves to each list item, screen reader announces form title, save date, and available actions (e.g., 'Customer Form, saved on January 15, 2024, button Continue Editing, button Delete')"
        },
        {
          "step": 3,
          "action": "Verify each saved form item has proper ARIA attributes",
          "expectedResult": "Each item has role='listitem', contains buttons with aria-label describing action and form name (e.g., 'Continue editing Customer Form')"
        },
        {
          "step": 4,
          "action": "Press Tab to focus on 'Continue Editing' button for a saved form",
          "expectedResult": "Button receives focus with visible indicator, screen reader announces 'Continue editing Customer Form, button'"
        },
        {
          "step": 5,
          "action": "Press Enter to activate the button",
          "expectedResult": "Saved form loads in the data entry page, focus is moved to the first empty or editable field"
        },
        {
          "step": 6,
          "action": "Return to saved forms list and test the Delete button with keyboard",
          "expectedResult": "Delete button is accessible via Tab, pressing Enter triggers confirmation dialog, focus is trapped in dialog"
        },
        {
          "step": 7,
          "action": "Verify that the saved forms list updates are announced when a form is deleted",
          "expectedResult": "After deletion, screen reader announces 'Form deleted successfully' and updated list count (e.g., 'Saved Forms, list, 2 items')"
        }
      ],
      "postconditions": [
        "Saved forms list is fully navigable with keyboard only",
        "All actions (continue editing, delete) are accessible to screen reader users",
        "List updates are announced via ARIA live regions",
        "Focus management is logical when navigating between list and form pages"
      ]
    }
  ],
  "selectedTypes": {
    "functional": false,
    "negative": true,
    "edgeCases": false,
    "accessibility": true
  }
}