[
  {
    "storyId": "story-8",
    "storyTitle": "As Workflow Administrator, I want to create approval workflow templates to achieve standardized schedule change approvals",
    "testCases": [
      {
        "id": "tc-001",
        "title": "Validate successful creation of workflow template",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "User is logged in with Workflow Administrator role",
          "User has permissions to access workflow management features",
          "WorkflowTemplates and ApprovalSteps tables are accessible",
          "At least one valid approver role or user exists in the system"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the workflow management page from the main menu or dashboard",
            "expectedResult": "Workflow management UI is displayed showing existing workflow templates list and 'Create New Workflow' button"
          },
          {
            "step": 2,
            "action": "Click on 'Create New Workflow' button",
            "expectedResult": "Workflow template creation form is displayed with fields for workflow name, description, and approval steps section"
          },
          {
            "step": 3,
            "action": "Enter unique workflow name 'Schedule Change Approval - Level 1' in the workflow name field",
            "expectedResult": "Workflow name is accepted and displayed in the input field"
          },
          {
            "step": 4,
            "action": "Enter workflow description 'Standard approval process for schedule changes requiring manager approval'",
            "expectedResult": "Description is accepted and displayed in the description field"
          },
          {
            "step": 5,
            "action": "Click 'Add Approval Step' button to add the first approval step",
            "expectedResult": "First approval step section is displayed with fields for step name, approver assignment, and escalation rules"
          },
          {
            "step": 6,
            "action": "Enter step name 'Manager Approval' and assign approver by selecting 'Manager' role from the dropdown",
            "expectedResult": "Step name and approver role are saved, and the approver assignment is displayed correctly"
          },
          {
            "step": 7,
            "action": "Configure escalation rule by setting escalation time to '24 hours' and escalation approver to 'Senior Manager' role",
            "expectedResult": "Escalation rules are configured and displayed in the approval step"
          },
          {
            "step": 8,
            "action": "Click 'Add Approval Step' button to add a second approval step",
            "expectedResult": "Second approval step section is displayed below the first step"
          },
          {
            "step": 9,
            "action": "Enter step name 'Director Approval' and assign approver by selecting specific user 'John Director' from the user dropdown",
            "expectedResult": "Second step is configured with individual approver assignment displayed correctly"
          },
          {
            "step": 10,
            "action": "Click 'Save and Activate' button at the bottom of the form",
            "expectedResult": "System validates the workflow configuration, saves the workflow template to WorkflowTemplates and ApprovalSteps tables, and displays success confirmation message 'Workflow template created and activated successfully'"
          },
          {
            "step": 11,
            "action": "Verify the workflow appears in the list of templates by scrolling through or searching for 'Schedule Change Approval - Level 1'",
            "expectedResult": "New workflow template 'Schedule Change Approval - Level 1' is listed in the workflow templates table with status 'Active', showing 2 approval steps and correct approver assignments"
          }
        ],
        "postconditions": [
          "New workflow template is saved in the database with status 'Active'",
          "Workflow template appears in the workflow templates list",
          "Workflow is available for assignment to schedule change requests",
          "Audit log records workflow creation with administrator details and timestamp"
        ],
        "estimatedTime": "8 mins"
      },
      {
        "id": "tc-002",
        "title": "Verify validation prevents saving invalid workflow",
        "type": "error-case",
        "priority": "High",
        "preconditions": [
          "User is logged in with Workflow Administrator role",
          "User has permissions to access workflow management features",
          "Workflow management page is accessible",
          "Validation rules are configured for workflow templates"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the workflow management page",
            "expectedResult": "Workflow management UI is displayed with 'Create New Workflow' option"
          },
          {
            "step": 2,
            "action": "Click 'Create New Workflow' button",
            "expectedResult": "Workflow template creation form is displayed"
          },
          {
            "step": 3,
            "action": "Enter workflow name 'Incomplete Workflow Test' in the workflow name field",
            "expectedResult": "Workflow name is accepted and displayed"
          },
          {
            "step": 4,
            "action": "Click 'Add Approval Step' button to add an approval step",
            "expectedResult": "Approval step section is displayed with empty approver assignment field"
          },
          {
            "step": 5,
            "action": "Enter step name 'Manager Review' but leave the approver assignment field empty",
            "expectedResult": "Step name is entered but approver field remains empty"
          },
          {
            "step": 6,
            "action": "Click 'Save and Activate' button without assigning an approver",
            "expectedResult": "System displays validation error message 'Approver assignment is required for all approval steps' and prevents saving. The workflow template is not saved to the database"
          },
          {
            "step": 7,
            "action": "Review the error message and identify the missing approver assignment highlighted in red on the form",
            "expectedResult": "The approval step with missing approver is highlighted with red border and error indicator"
          },
          {
            "step": 8,
            "action": "Correct the approver assignment by selecting 'Manager' role from the approver dropdown for the first approval step",
            "expectedResult": "Approver 'Manager' role is assigned and displayed in the approval step, error highlighting is removed"
          },
          {
            "step": 9,
            "action": "Click 'Save and Activate' button again with valid approver assignment",
            "expectedResult": "System validates successfully, saves the workflow template, and displays confirmation message 'Workflow template created and activated successfully'"
          },
          {
            "step": 10,
            "action": "Verify the workflow 'Incomplete Workflow Test' appears in the workflow templates list",
            "expectedResult": "Workflow template is listed with status 'Active' and correct approver assignment displayed"
          }
        ],
        "postconditions": [
          "Invalid workflow configuration was prevented from being saved",
          "Corrected workflow template is saved successfully in the database",
          "Validation error messages are cleared after successful save",
          "Workflow is available for use with valid configuration"
        ],
        "estimatedTime": "6 mins"
      },
      {
        "id": "tc-003",
        "title": "Ensure editing and deleting workflows works correctly",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "User is logged in with Workflow Administrator role",
          "At least one existing workflow template 'Test Workflow for Edit' exists in the system",
          "User has permissions to edit and delete workflow templates",
          "Workflow management page is accessible",
          "Database supports concurrent edits with locking mechanism"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the workflow management page",
            "expectedResult": "Workflow management UI is displayed showing list of existing workflow templates including 'Test Workflow for Edit'"
          },
          {
            "step": 2,
            "action": "Locate 'Test Workflow for Edit' in the workflow templates list and click the 'Edit' button or icon next to it",
            "expectedResult": "Workflow edit form is displayed with all existing workflow details pre-populated including workflow name, description, and current approval steps with assigned approvers"
          },
          {
            "step": 3,
            "action": "Verify that all existing approval steps are loaded correctly in the edit form",
            "expectedResult": "All approval steps are displayed with correct step names, approver assignments, and escalation rules matching the saved configuration"
          },
          {
            "step": 4,
            "action": "Modify the first approval step by changing the approver from 'Manager' role to 'Senior Manager' role",
            "expectedResult": "Approver assignment is updated to 'Senior Manager' role and displayed in the approval step"
          },
          {
            "step": 5,
            "action": "Click 'Add Approval Step' button to add a new third approval step",
            "expectedResult": "New approval step section is added to the workflow configuration"
          },
          {
            "step": 6,
            "action": "Configure the new approval step with name 'Final Review' and assign approver 'VP Operations' individual user",
            "expectedResult": "Third approval step is configured and displayed with correct details"
          },
          {
            "step": 7,
            "action": "Click 'Save Changes' button to save the modified workflow",
            "expectedResult": "System validates the changes, updates the workflow in WorkflowTemplates and ApprovalSteps tables, and displays confirmation message 'Workflow template updated successfully'"
          },
          {
            "step": 8,
            "action": "Verify the changes are reflected in the workflow list by locating 'Test Workflow for Edit' and checking the approval steps count",
            "expectedResult": "Workflow template shows 3 approval steps and the modified approver assignments are displayed correctly in the list view"
          },
          {
            "step": 9,
            "action": "Locate a workflow template to delete (e.g., 'Obsolete Workflow Template') and click the 'Delete' button or icon",
            "expectedResult": "System displays confirmation dialog with message 'Are you sure you want to delete this workflow template? This action cannot be undone.' with 'Cancel' and 'Confirm Delete' buttons"
          },
          {
            "step": 10,
            "action": "Click 'Cancel' button in the confirmation dialog",
            "expectedResult": "Confirmation dialog closes and the workflow template remains in the list, no deletion occurs"
          },
          {
            "step": 11,
            "action": "Click the 'Delete' button again for the same workflow template",
            "expectedResult": "Confirmation dialog is displayed again"
          },
          {
            "step": 12,
            "action": "Click 'Confirm Delete' button in the confirmation dialog",
            "expectedResult": "System removes the workflow template from the database, displays success message 'Workflow template deleted successfully', and the workflow is removed from the templates list"
          },
          {
            "step": 13,
            "action": "Verify the deleted workflow no longer appears in the workflow templates list",
            "expectedResult": "Deleted workflow template is not visible in the list and the total count of workflows is decreased by one"
          }
        ],
        "postconditions": [
          "Modified workflow template is updated in the database with new approval steps and approver assignments",
          "Deleted workflow template is removed from the database and no longer available for use",
          "Workflow templates list reflects all changes accurately",
          "Audit log records edit and delete operations with administrator details and timestamps",
          "No orphaned approval steps remain in the ApprovalSteps table after deletion"
        ],
        "estimatedTime": "10 mins"
      }
    ]
  }
]