[
  {
    "storyId": "story-4",
    "storyTitle": "As Employee, I want to view the status of my schedule change requests to stay informed about approvals",
    "testCases": [
      {
        "id": "tc-001",
        "title": "Validate employee can view their schedule change request statuses",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "Employee account exists and is active in the system",
          "Employee has valid login credentials",
          "At least one schedule change request has been submitted by the employee",
          "Another employee's schedule change request exists in the system for access control testing",
          "Database tables ScheduleChangeRequests and ApprovalActions are accessible",
          "API endpoint GET /api/schedule-change-requests/status is operational"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the application login page",
            "expectedResult": "Login page is displayed with username and password fields"
          },
          {
            "step": 2,
            "action": "Enter valid employee credentials and click Login button",
            "expectedResult": "Employee is successfully authenticated and redirected to the dashboard"
          },
          {
            "step": 3,
            "action": "Verify the dashboard displays the list of schedule change requests submitted by the logged-in employee",
            "expectedResult": "Dashboard displays a list showing all schedule change requests with columns for request ID, date submitted, requested changes, and current status (pending/approved/rejected)"
          },
          {
            "step": 4,
            "action": "Review the displayed requests to confirm they belong to the logged-in employee only",
            "expectedResult": "All displayed requests are associated with the logged-in employee's ID and no other employee's requests are visible"
          },
          {
            "step": 5,
            "action": "Select a specific schedule change request from the list by clicking on it",
            "expectedResult": "Request details page opens showing comprehensive information about the selected request"
          },
          {
            "step": 6,
            "action": "Verify the detailed approval history is displayed on the request details page",
            "expectedResult": "Detailed approval history is shown including: approval workflow stages, approver names, action taken (approved/rejected/pending), comments from approvers, and timestamps for each status change in chronological order"
          },
          {
            "step": 7,
            "action": "Verify the current status is prominently displayed and matches the latest approval action",
            "expectedResult": "Current status (pending/approved/rejected) is clearly visible and accurately reflects the most recent approval action in the history"
          },
          {
            "step": 8,
            "action": "Manually construct a URL or API call to attempt accessing another employee's schedule change request using a different request ID",
            "expectedResult": "Access is denied with HTTP 403 Forbidden status or appropriate error message stating 'You do not have permission to view this request' or 'Access denied'"
          },
          {
            "step": 9,
            "action": "Verify that no data from the other employee's request is displayed or leaked in the error response",
            "expectedResult": "Error message is generic and does not reveal any information about the other employee's request"
          }
        ],
        "postconditions": [
          "Employee remains logged into the system",
          "No unauthorized data access has occurred",
          "All viewed data matches the employee's own schedule change requests",
          "Audit logs record the employee's access to their own requests only",
          "System security controls have been validated"
        ],
        "estimatedTime": "8 mins"
      },
      {
        "id": "tc-002",
        "title": "Verify filtering and sorting of schedule change requests",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "Employee is logged into the system",
          "Employee has submitted multiple schedule change requests with different statuses (pending, approved, rejected)",
          "Schedule change requests have different submission dates spanning at least 2 weeks",
          "Schedule change requests page is accessible",
          "Filtering and sorting functionality is enabled in the UI"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the 'My Schedule Change Requests' page from the dashboard or main menu",
            "expectedResult": "Schedule change requests page loads successfully displaying the complete list of employee's requests in default order"
          },
          {
            "step": 2,
            "action": "Verify the initial list displays all schedule change requests without any filters applied",
            "expectedResult": "All schedule change requests are visible with columns showing request ID, date submitted, requested changes, and status"
          },
          {
            "step": 3,
            "action": "Locate the filter controls on the page (typically dropdowns or checkboxes for status filtering)",
            "expectedResult": "Filter controls are visible and accessible, showing options for filtering by status: All, Pending, Approved, Rejected"
          },
          {
            "step": 4,
            "action": "Apply a filter to show only 'Pending' status requests by selecting 'Pending' from the status filter dropdown",
            "expectedResult": "List immediately updates to display only schedule change requests with 'Pending' status, hiding all approved and rejected requests"
          },
          {
            "step": 5,
            "action": "Verify the count of displayed requests matches the number of pending requests",
            "expectedResult": "Request count indicator updates to show the correct number of pending requests, and all visible requests show 'Pending' status"
          },
          {
            "step": 6,
            "action": "Change the filter to show only 'Approved' status requests",
            "expectedResult": "List updates to display only approved requests, and all visible requests show 'Approved' status"
          },
          {
            "step": 7,
            "action": "Clear the status filter to show all requests again",
            "expectedResult": "List returns to showing all schedule change requests regardless of status"
          },
          {
            "step": 8,
            "action": "Locate the sorting controls (typically column headers or sort dropdown) and click on the 'Date Submitted' column header or select 'Date' from sort options",
            "expectedResult": "Sorting control is activated and list is sorted by submission date in descending order (newest first)"
          },
          {
            "step": 9,
            "action": "Verify the requests are sorted correctly by date with the most recent submission at the top",
            "expectedResult": "Requests are displayed in descending chronological order with dates decreasing from top to bottom"
          },
          {
            "step": 10,
            "action": "Click the 'Date Submitted' column header again to reverse the sort order",
            "expectedResult": "List is re-sorted in ascending order (oldest first) with the earliest submission date at the top"
          },
          {
            "step": 11,
            "action": "Apply both a status filter ('Pending') and date sorting (descending) simultaneously",
            "expectedResult": "List displays only pending requests sorted by date in descending order, showing the most recent pending request first"
          },
          {
            "step": 12,
            "action": "Verify the combined filter and sort results are accurate by manually checking the displayed data",
            "expectedResult": "All displayed requests have 'Pending' status and are arranged from newest to oldest submission date"
          }
        ],
        "postconditions": [
          "Employee remains on the schedule change requests page",
          "Filter and sort preferences may be saved for the session",
          "All data displayed remains accurate and belongs to the logged-in employee",
          "System performance remains within acceptable limits (page response under 2 seconds)",
          "No errors or warnings are displayed"
        ],
        "estimatedTime": "10 mins"
      }
    ]
  },
  {
    "storyId": "story-5",
    "storyTitle": "As Manager, I want to receive notifications for pending schedule change approvals to ensure timely processing",
    "testCases": [
      {
        "id": "tc-003",
        "title": "Validate notification sent on new pending approval",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "Manager account exists and is active in the system",
          "Manager is configured as an approver in the approval workflow",
          "Manager has a valid email address registered in the system",
          "Email notification service is operational and configured",
          "In-app notification system is enabled",
          "Employee account exists with permission to submit schedule change requests",
          "Notification service API endpoints are accessible",
          "NotificationLogs table is accessible for verification",
          "Manager's notification preferences are set to receive both email and in-app notifications"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Log in as an employee who can submit schedule change requests",
            "expectedResult": "Employee is successfully logged into the system and dashboard is displayed"
          },
          {
            "step": 2,
            "action": "Navigate to the schedule change request submission page",
            "expectedResult": "Schedule change request form is displayed with all required fields"
          },
          {
            "step": 3,
            "action": "Fill in all required fields for a schedule change request (date, shift time, reason) and submit the request",
            "expectedResult": "Request is successfully submitted and confirmation message is displayed with request ID"
          },
          {
            "step": 4,
            "action": "Verify the request enters pending approval status and is assigned to the designated manager",
            "expectedResult": "Request status shows as 'Pending Approval' and the assigned approver is the test manager"
          },
          {
            "step": 5,
            "action": "Wait for up to 1 minute and verify that a notification is triggered by the system",
            "expectedResult": "System generates a notification event for the pending approval within 1 minute of request submission"
          },
          {
            "step": 6,
            "action": "Check the manager's email inbox for the notification email",
            "expectedResult": "Manager receives an email notification with subject line indicating a pending schedule change approval, email contains request ID, employee name, requested changes, submission date, and a direct link to review the request"
          },
          {
            "step": 7,
            "action": "Log in as the manager and check the in-app notification center or notification icon",
            "expectedResult": "Manager sees a new in-app notification badge or indicator showing unread notifications"
          },
          {
            "step": 8,
            "action": "Click on the in-app notification to view its details",
            "expectedResult": "In-app notification displays with accurate content including request ID, employee name, requested schedule changes, submission timestamp, and an actionable link or button to review the request"
          },
          {
            "step": 9,
            "action": "Verify the notification content is accurate by comparing it with the actual submitted request details",
            "expectedResult": "All information in both email and in-app notifications matches the submitted request details exactly (employee name, request ID, dates, changes requested)"
          },
          {
            "step": 10,
            "action": "Click the review link in the notification to verify it is actionable",
            "expectedResult": "Link directs the manager to the specific schedule change request approval page where they can review details and take action"
          },
          {
            "step": 11,
            "action": "Access the NotificationLogs table or notification logs page in the admin/system area",
            "expectedResult": "Notification logs page or database table is accessible and displays recent notification records"
          },
          {
            "step": 12,
            "action": "Search for the notification record corresponding to the submitted request using request ID or manager ID",
            "expectedResult": "Notification log entry is found with details including: notification ID, request ID, recipient (manager), notification type (email and in-app), timestamp, and delivery status"
          },
          {
            "step": 13,
            "action": "Verify the delivery status in the logs shows successful delivery for both email and in-app notifications",
            "expectedResult": "Delivery status is recorded as 'Successful' or 'Delivered' for both notification channels with timestamps showing delivery within 1 minute of request submission"
          }
        ],
        "postconditions": [
          "Manager has received notifications via both email and in-app channels",
          "Notification delivery is logged in NotificationLogs table with successful status",
          "Schedule change request remains in pending approval status",
          "Manager can access the request for approval action",
          "Notification delivery time is within the 1-minute SLA requirement",
          "System is ready for manager to process the approval"
        ],
        "estimatedTime": "12 mins"
      },
      {
        "id": "tc-004",
        "title": "Verify escalation notification after SLA breach",
        "type": "edge-case",
        "priority": "High",
        "preconditions": [
          "Manager account exists and is active as primary approver",
          "Escalation manager or secondary approver account exists in the system",
          "SLA threshold for approval processing is configured in the system (e.g., 24 hours)",
          "A schedule change request exists in pending approval status",
          "Notification service is operational",
          "Escalation workflow is configured and enabled",
          "System has capability to simulate or fast-forward time for testing purposes, OR sufficient time has passed to trigger SLA breach",
          "NotificationLogs table is accessible"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Verify a schedule change request is in pending approval status and note the submission timestamp",
            "expectedResult": "Request is confirmed to be in 'Pending Approval' status with a recorded submission timestamp"
          },
          {
            "step": 2,
            "action": "Identify the configured SLA threshold time for approvals (e.g., 24 hours from submission)",
            "expectedResult": "SLA threshold is confirmed in system configuration (e.g., 24 hours or 1440 minutes)"
          },
          {
            "step": 3,
            "action": "Simulate the passage of time beyond the SLA threshold using system time manipulation, test environment fast-forward, or wait for actual time to pass",
            "expectedResult": "System time advances beyond the SLA threshold while the request remains in pending status without approval action"
          },
          {
            "step": 4,
            "action": "Verify the system detects the SLA breach condition",
            "expectedResult": "System's SLA monitoring process identifies the request as exceeding the approval time threshold"
          },
          {
            "step": 5,
            "action": "Confirm that an escalation notification event is triggered by the system",
            "expectedResult": "Escalation notification is generated and queued for delivery to the escalation manager or secondary approver"
          },
          {
            "step": 6,
            "action": "Wait for up to 1 minute after SLA breach detection for notification delivery",
            "expectedResult": "Escalation notification is sent within 1 minute of SLA breach detection"
          },
          {
            "step": 7,
            "action": "Check the escalation manager's email inbox for the escalation notification",
            "expectedResult": "Escalation manager receives an email with subject indicating 'Escalation' or 'SLA Breach' for schedule change approval, email contains request ID, original submission date, time pending, employee name, and urgency indicator"
          },
          {
            "step": 8,
            "action": "Log in as the escalation manager and check in-app notifications",
            "expectedResult": "Escalation manager sees an in-app notification marked as high priority or urgent regarding the pending approval"
          },
          {
            "step": 9,
            "action": "Verify the escalation notification content includes SLA breach information",
            "expectedResult": "Notification clearly states the request has exceeded the approval SLA, shows how long it has been pending, and emphasizes the need for immediate action"
          },
          {
            "step": 10,
            "action": "Verify the notification is received promptly by checking the timestamp of email receipt and in-app notification",
            "expectedResult": "Both email and in-app notifications are received within 1 minute of the SLA breach trigger, timestamps confirm prompt delivery"
          },
          {
            "step": 11,
            "action": "Access the NotificationLogs to verify escalation notification logging",
            "expectedResult": "Notification log contains an entry for the escalation notification with type 'Escalation', recipient as escalation manager, delivery status as successful, and timestamp within 1 minute of SLA breach"
          },
          {
            "step": 12,
            "action": "Verify that the original manager also receives a reminder or escalation notice",
            "expectedResult": "Original manager receives a notification indicating the request has been escalated due to SLA breach (if configured in escalation workflow)"
          }
        ],
        "postconditions": [
          "Escalation notification has been successfully delivered to the escalation manager",
          "Notification delivery is logged with successful status and appropriate timestamps",
          "Schedule change request remains in pending status awaiting escalated approval",
          "SLA breach is recorded in the system for reporting purposes",
          "Escalation manager can access and act on the request",
          "Notification delivery time meets the 1-minute SLA requirement"
        ],
        "estimatedTime": "15 mins"
      }
    ]
  },
  {
    "storyId": "story-6",
    "storyTitle": "As System Administrator, I want to audit all schedule change approval actions to ensure compliance and traceability",
    "testCases": [
      {
        "id": "tc-001",
        "title": "Validate logging of approval actions",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "User with Manager role is logged into the system",
          "User with Administrator role is logged into the system",
          "At least one pending schedule change request exists in the system",
          "ApprovalAuditLogs table is accessible and functioning",
          "System logging service is operational"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the schedule change approval queue as Manager",
            "expectedResult": "Approval queue displays with pending schedule change requests"
          },
          {
            "step": 2,
            "action": "Select a pending schedule change request from the queue",
            "expectedResult": "Request details are displayed with approval options"
          },
          {
            "step": 3,
            "action": "Enter approval comments in the comments field (e.g., 'Approved due to business requirements')",
            "expectedResult": "Comments are entered successfully in the text field"
          },
          {
            "step": 4,
            "action": "Click the 'Approve' button to approve the schedule change request",
            "expectedResult": "System displays confirmation message that the request has been approved"
          },
          {
            "step": 5,
            "action": "Note the exact timestamp of the approval action",
            "expectedResult": "Current timestamp is recorded for verification"
          },
          {
            "step": 6,
            "action": "Switch to Administrator user account and navigate to the audit logs interface",
            "expectedResult": "Audit logs interface is displayed with search and filter options"
          },
          {
            "step": 7,
            "action": "Search for the recently approved schedule change request in the audit logs",
            "expectedResult": "Audit log entry for the approval action is displayed in the results"
          },
          {
            "step": 8,
            "action": "Verify the audit log entry contains the Manager's username",
            "expectedResult": "Audit log displays the correct Manager username who performed the approval"
          },
          {
            "step": 9,
            "action": "Verify the audit log entry contains the accurate timestamp of the approval action",
            "expectedResult": "Timestamp in audit log matches the noted approval time (within acceptable system delay)"
          },
          {
            "step": 10,
            "action": "Verify the audit log entry contains the approval comments entered by the Manager",
            "expectedResult": "Audit log displays the exact comments: 'Approved due to business requirements'"
          },
          {
            "step": 11,
            "action": "Verify the audit log entry contains the action type as 'Approval'",
            "expectedResult": "Audit log clearly indicates the action type as 'Approval' or equivalent status"
          }
        ],
        "postconditions": [
          "Approval action is permanently logged in ApprovalAuditLogs table",
          "Schedule change request status is updated to 'Approved'",
          "Audit log entry is accessible to authorized administrators",
          "System maintains data integrity of the audit record"
        ],
        "estimatedTime": "8 mins"
      },
      {
        "id": "tc-002",
        "title": "Verify audit report filtering and export",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "User with Administrator role is logged into the system",
          "Multiple approval and rejection actions exist in the audit logs (minimum 10 records)",
          "Audit logs contain records from different users and different date ranges",
          "Audit report UI is accessible to the administrator",
          "System has export functionality enabled for CSV format"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the audit report interface as Administrator",
            "expectedResult": "Audit report UI is displayed with all available audit log records and filter options"
          },
          {
            "step": 2,
            "action": "Identify the total number of unfiltered audit log records displayed",
            "expectedResult": "Total record count is visible and shows all existing audit logs"
          },
          {
            "step": 3,
            "action": "Apply a date range filter to show only records from the last 7 days",
            "expectedResult": "Filter is applied and only records within the last 7 days are displayed"
          },
          {
            "step": 4,
            "action": "Verify the filtered results contain only records within the specified date range",
            "expectedResult": "All displayed records have timestamps within the last 7 days; records outside this range are not shown"
          },
          {
            "step": 5,
            "action": "Apply an additional user filter to show only actions performed by a specific Manager",
            "expectedResult": "Results are further filtered to show only records for the selected Manager within the date range"
          },
          {
            "step": 6,
            "action": "Verify the filtered results display only the selected user's actions",
            "expectedResult": "All displayed records show the selected Manager's username; no other users' actions are visible"
          },
          {
            "step": 7,
            "action": "Apply an action type filter to show only 'Approval' actions",
            "expectedResult": "Results are filtered to display only approval actions, excluding rejection actions"
          },
          {
            "step": 8,
            "action": "Verify the accuracy of the multi-filter results (date + user + action type)",
            "expectedResult": "Displayed records match all three filter criteria: last 7 days, specific Manager, approval actions only"
          },
          {
            "step": 9,
            "action": "Click the 'Export to CSV' button to export the filtered audit report",
            "expectedResult": "System initiates CSV file download with a meaningful filename (e.g., 'audit_report_YYYY-MM-DD.csv')"
          },
          {
            "step": 10,
            "action": "Open the downloaded CSV file in a spreadsheet application",
            "expectedResult": "CSV file opens successfully and displays data in properly formatted columns"
          },
          {
            "step": 11,
            "action": "Verify the CSV file contains all columns: User, Timestamp, Action Type, Request ID, Comments",
            "expectedResult": "All required columns are present with appropriate headers"
          },
          {
            "step": 12,
            "action": "Verify the CSV file contains only the filtered records matching the applied criteria",
            "expectedResult": "Record count in CSV matches the filtered results count in the UI; all records meet filter criteria"
          },
          {
            "step": 13,
            "action": "Verify the data accuracy by comparing a sample record from CSV with the UI display",
            "expectedResult": "Data in CSV exactly matches the corresponding record in the UI (user, timestamp, action, comments)"
          }
        ],
        "postconditions": [
          "Filters remain applied in the audit report UI for further analysis",
          "CSV export file is saved to the administrator's download location",
          "Audit logs remain unchanged and unaffected by filtering and export operations",
          "Export action may be logged in system activity logs"
        ],
        "estimatedTime": "10 mins"
      },
      {
        "id": "tc-003",
        "title": "Ensure audit logs are secure and immutable",
        "type": "error-case",
        "priority": "High",
        "preconditions": [
          "User with Administrator role is logged into the system",
          "At least one audit log record exists in the ApprovalAuditLogs table",
          "Database access tools or API testing tools are available",
          "System security logging is enabled to capture unauthorized access attempts",
          "Test environment allows simulation of unauthorized modification attempts"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the audit logs interface as Administrator and identify a specific audit log record",
            "expectedResult": "Audit log record is displayed with all details (user, timestamp, action, comments)"
          },
          {
            "step": 2,
            "action": "Note the complete details of the selected audit log record for verification",
            "expectedResult": "Record details are documented including ID, user, timestamp, action type, and comments"
          },
          {
            "step": 3,
            "action": "Attempt to access the audit log edit functionality through the UI",
            "expectedResult": "No edit, modify, or delete buttons are available for audit log records in the UI"
          },
          {
            "step": 4,
            "action": "Attempt to directly modify the audit log record using database access (UPDATE SQL command on ApprovalAuditLogs table)",
            "expectedResult": "Database rejects the UPDATE operation with an error message indicating audit logs are immutable"
          },
          {
            "step": 5,
            "action": "Verify the system logs the unauthorized modification attempt",
            "expectedResult": "Security log contains an entry recording the attempted unauthorized modification with timestamp and user details"
          },
          {
            "step": 6,
            "action": "Attempt to delete the audit log record using database access (DELETE SQL command)",
            "expectedResult": "Database rejects the DELETE operation with an error message preventing deletion of audit records"
          },
          {
            "step": 7,
            "action": "Verify the system logs the unauthorized deletion attempt",
            "expectedResult": "Security log contains an entry recording the attempted unauthorized deletion with timestamp and user details"
          },
          {
            "step": 8,
            "action": "Attempt to modify the audit log record using API endpoint (PUT or PATCH request to /api/audit-logs/{id})",
            "expectedResult": "API returns 403 Forbidden or 405 Method Not Allowed error, preventing modification"
          },
          {
            "step": 9,
            "action": "Verify the API logs the unauthorized modification attempt",
            "expectedResult": "API security log contains an entry with the attempted request details, timestamp, and source"
          },
          {
            "step": 10,
            "action": "Return to the audit logs interface and retrieve the same audit log record",
            "expectedResult": "Audit log record is displayed with identical details as originally noted; no changes have occurred"
          },
          {
            "step": 11,
            "action": "Verify all fields of the audit log record remain unchanged (user, timestamp, action, comments)",
            "expectedResult": "All field values exactly match the originally documented values; record integrity is maintained"
          },
          {
            "step": 12,
            "action": "Review the security logs to confirm all unauthorized attempts were properly logged",
            "expectedResult": "Security logs contain complete entries for all attempted unauthorized modifications with appropriate severity levels"
          }
        ],
        "postconditions": [
          "Audit log record remains completely unchanged and intact",
          "All unauthorized modification attempts are logged in security audit trail",
          "System security mechanisms are confirmed to be functioning correctly",
          "Database integrity constraints for audit logs are validated",
          "No data corruption or unauthorized changes exist in the audit log system"
        ],
        "estimatedTime": "12 mins"
      }
    ]
  }
]