json
{
  "success": true,
  "playwrightTests": [
    {
      "storyId": "story-8",
      "storyTitle": "As Schedule Manager, I want to receive notifications about schedule conflicts to take timely corrective actions",
      "testFile": "schedule-conflict-notifications.spec.ts",
      "testCode": "import { test, expect } from '@playwright/test';\n\ntest.describe('Schedule Conflict Notifications', () => {\n  test.beforeEach(async ({ page }) => {\n    // Login as Schedule Manager\n    await page.goto('/login');\n    await page.fill('[data-testid=\"username-input\"]', 'schedule.manager@company.com');\n    await page.fill('[data-testid=\"password-input\"]', 'password123');\n    await page.click('[data-testid=\"login-button\"]');\n    await expect(page).toHaveURL(/.*dashboard/);\n  });\n\n  test('Receive notification for detected schedule conflict', async ({ page }) => {\n    // Step 1: Navigate to the schedule creation page\n    await page.goto('/schedules/create');\n    await expect(page.locator('[data-testid=\"schedule-creation-page\"]')).toBeVisible();\n\n    // Step 2: Create a schedule with a conflict by assigning overlapping shifts\n    await page.selectOption('[data-testid=\"employee-select\"]', { label: 'John Doe' });\n    await page.fill('[data-testid=\"schedule-date-input\"]', '2024-01-15');\n    \n    // Add first shift: 09:00 AM - 05:00 PM\n    await page.click('[data-testid=\"add-shift-button\"]');\n    await page.fill('[data-testid=\"shift-start-time-0\"]', '09:00');\n    await page.fill('[data-testid=\"shift-end-time-0\"]', '17:00');\n    await page.selectOption('[data-testid=\"shift-period-0\"]', 'AM');\n    \n    // Add second overlapping shift: 03:00 PM - 11:00 PM\n    await page.click('[data-testid=\"add-shift-button\"]');\n    await page.fill('[data-testid=\"shift-start-time-1\"]', '15:00');\n    await page.fill('[data-testid=\"shift-end-time-1\"]', '23:00');\n    await page.selectOption('[data-testid=\"shift-period-1\"]', 'PM');\n    \n    // Submit the schedule\n    await page.click('[data-testid=\"submit-schedule-button\"]');\n    \n    // Expected Result: Conflict detected by system\n    await expect(page.locator('[data-testid=\"conflict-detected-message\"]')).toBeVisible({ timeout: 10000 });\n\n    // Step 3: Wait for system to detect conflict (within 1 minute)\n    await page.waitForTimeout(2000);\n\n    // Step 4: Navigate to notifications section\n    await page.click('[data-testid=\"notifications-icon\"]');\n    await expect(page.locator('[data-testid=\"notifications-panel\"]')).toBeVisible();\n\n    // Expected Result: Notification with conflict details displayed\n    const conflictNotification = page.locator('[data-testid=\"notification-item\"]').filter({ hasText: 'Schedule Conflict' }).first();\n    await expect(conflictNotification).toBeVisible();\n    await expect(conflictNotification).toContainText('John Doe');\n    await expect(conflictNotification).toContainText('overlapping shifts');\n\n    // Step 5: Click on notification to view full details\n    await conflictNotification.click();\n    await expect(page.locator('[data-testid=\"notification-details-panel\"]')).toBeVisible();\n    await expect(page.locator('[data-testid=\"notification-conflict-details\"]')).toContainText('09:00');\n    await expect(page.locator('[data-testid=\"notification-conflict-details\"]')).toContainText('15:00');\n\n    // Step 6: Click the 'Acknowledge' button\n    await page.click('[data-testid=\"acknowledge-notification-button\"]');\n\n    // Expected Result: Notification marked as acknowledged\n    await expect(page.locator('[data-testid=\"notification-status\"]')).toContainText('Acknowledged');\n    const acknowledgedNotification = page.locator('[data-testid=\"notification-item\"]').filter({ hasText: 'Schedule Conflict' }).first();\n    await expect(acknowledgedNotification.locator('[data-testid=\"notification-badge\"]')).toContainText('Acknowledged');\n  });\n\n  test('Dismiss notification and verify status', async ({ page }) => {\n    // Step 1: Navigate to the notifications section\n    await page.goto('/dashboard');\n    await page.click('[data-testid=\"notifications-icon\"]');\n    await expect(page.locator('[data-testid=\"notifications-panel\"]')).toBeVisible();\n\n    // Step 2: Locate a specific notification and click to select\n    const notificationToDismiss = page.locator('[data-testid=\"notification-item\"]').first();\n    await expect(notificationToDismiss).toBeVisible();\n    \n    // Store notification ID for later verification\n    const notificationId = await notificationToDismiss.getAttribute('data-notification-id');\n    const notificationText = await notificationToDismiss.textContent();\n    \n    await notificationToDismiss.click();\n\n    // Expected Result: Notification details displayed\n    await expect(page.locator('[data-testid=\"notification-details-panel\"]')).toBeVisible();\n    await expect(page.locator('[data-testid=\"notification-details-content\"]')).toBeVisible();\n\n    // Step 3: Review notification details\n    await expect(page.locator('[data-testid=\"notification-details-title\"]')).toBeVisible();\n    await expect(page.locator('[data-testid=\"notification-details-description\"]')).toBeVisible();\n\n    // Step 4: Click the 'Dismiss' button\n    await page.click('[data-testid=\"dismiss-notification-button\"]');\n\n    // Step 5: Confirm dismissal action\n    await expect(page.locator('[data-testid=\"dismiss-confirmation-dialog\"]')).toBeVisible();\n    await page.click('[data-testid=\"confirm-dismiss-button\"]');\n\n    // Expected Result: Notification removed from active list\n    await page.waitForTimeout(1000);\n    const activeNotifications = page.locator('[data-testid=\"notification-item\"]');\n    const dismissedNotificationInActive = activeNotifications.filter({ has: page.locator(`[data-notification-id=\"${notificationId}\"]`) });\n    await expect(dismissedNotificationInActive).toHaveCount(0);\n\n    // Step 6: Navigate to notification history section\n    await page.click('[data-testid=\"notification-history-tab\"]');\n    await expect(page.locator('[data-testid=\"notification-history-section\"]')).toBeVisible();\n\n    // Alternative: Filter by dismissed status\n    await page.selectOption('[data-testid=\"notification-filter-select\"]', 'Dismissed');\n    await page.click('[data-testid=\"apply-filter-button\"]');\n\n    // Step 7: Search for dismissed notification in history\n    await page.fill('[data-testid=\"notification-search-input\"]', notificationId || '');\n    await page.click('[data-testid=\"search-button\"]');\n\n    // Expected Result: Dismissed notification recorded in history\n    const dismissedNotificationInHistory = page.locator('[data-testid=\"notification-history-item\"]').filter({ hasText: notificationId || '' });\n    await expect(dismissedNotificationInHistory).toBeVisible();\n    await expect(dismissedNotificationInHistory.locator('[data-testid=\"notification-status-badge\"]')).toContainText('Dismissed');\n\n    // Step 8: Verify notification log entry contains complete information\n    await dismissedNotificationInHistory.click();\n    await expect(page.locator('[data-testid=\"notification-log-details\"]')).toBeVisible();\n    await expect(page.locator('[data-testid=\"notification-log-id\"]')).toContainText(notificationId || '');\n    await expect(page.locator('[data-testid=\"notification-log-status\"]')).toContainText('Dismissed');\n    await expect(page.locator('[data-testid=\"notification-log-timestamp\"]')).toBeVisible();\n    await expect(page.locator('[data-testid=\"notification-log-dismissed-by\"]')).toContainText('schedule.manager@company.com');\n  });\n});"
    }
  ]
}