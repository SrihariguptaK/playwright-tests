json
{
  "success": true,
  "playwrightTests": [
    {
      "storyId": "story-5",
      "storyTitle": "As Schedule Manager, I want the system to validate schedules to detect conflicts to ensure compliance and accuracy",
      "testFile": "schedule-validation.spec.ts",
      "testCode": "import { test, expect } from '@playwright/test';\n\ntest.describe('Schedule Validation - Conflict Detection', () => {\n  test.beforeEach(async ({ page }) => {\n    // Navigate to schedule management system\n    await page.goto('/schedule-management');\n    // Assume user is already logged in as Schedule Manager\n  });\n\n  test('Detect overlapping shifts for an employee', async ({ page }) => {\n    // Navigate to the schedule creation page\n    await page.goto('/schedule-management/create');\n    \n    // Select an employee from the employee list\n    await page.click('[data-testid=\"employee-selector\"]');\n    await page.click('[data-testid=\"employee-option-john-doe\"]');\n    \n    // Create a first shift for the selected employee with start time 09:00 AM and end time 05:00 PM on the same day\n    await page.click('[data-testid=\"add-shift-button\"]');\n    await page.fill('[data-testid=\"shift-start-time\"]', '09:00');\n    await page.selectOption('[data-testid=\"shift-start-period\"]', 'AM');\n    await page.fill('[data-testid=\"shift-end-time\"]', '05:00');\n    await page.selectOption('[data-testid=\"shift-end-period\"]', 'PM');\n    await page.fill('[data-testid=\"shift-date\"]', '2024-01-15');\n    await page.click('[data-testid=\"save-shift-button\"]');\n    \n    // Verify schedule saved\n    await expect(page.locator('[data-testid=\"success-message\"]')).toContainText('Schedule saved');\n    \n    // Create a second shift for the same employee with start time 02:00 PM and end time 10:00 PM on the same day (overlapping with first shift)\n    await page.click('[data-testid=\"add-shift-button\"]');\n    await page.fill('[data-testid=\"shift-start-time\"]', '02:00');\n    await page.selectOption('[data-testid=\"shift-start-period\"]', 'PM');\n    await page.fill('[data-testid=\"shift-end-time\"]', '10:00');\n    await page.selectOption('[data-testid=\"shift-end-period\"]', 'PM');\n    await page.fill('[data-testid=\"shift-date\"]', '2024-01-15');\n    await page.click('[data-testid=\"save-shift-button\"]');\n    \n    // Verify schedule saved\n    await expect(page.locator('[data-testid=\"success-message\"]')).toContainText('Schedule saved');\n    \n    // Click the 'Validate Schedule' button or trigger automatic validation\n    await page.click('[data-testid=\"validate-schedule-button\"]');\n    \n    // Wait for validation to complete\n    await page.waitForSelector('[data-testid=\"validation-results\"]', { timeout: 3000 });\n    \n    // Verify system flags overlapping shifts\n    await expect(page.locator('[data-testid=\"validation-results\"]')).toContainText('overlapping shifts');\n    await expect(page.locator('[data-testid=\"conflict-flag\"]')).toBeVisible();\n    \n    // Click on the conflict notification or flagged shifts to view detailed conflict information\n    await page.click('[data-testid=\"conflict-notification\"]');\n    \n    // Verify detailed conflict information is displayed\n    await expect(page.locator('[data-testid=\"conflict-details\"]')).toBeVisible();\n    await expect(page.locator('[data-testid=\"conflict-details\"]')).toContainText('09:00 AM - 05:00 PM');\n    await expect(page.locator('[data-testid=\"conflict-details\"]')).toContainText('02:00 PM - 10:00 PM');\n    \n    // Review the conflict resolution suggestions provided by the system\n    await expect(page.locator('[data-testid=\"conflict-suggestions\"]')).toBeVisible();\n    await expect(page.locator('[data-testid=\"conflict-suggestions\"]')).toContainText('Suggestions displayed for resolution');\n  });\n\n  test('Validate minimum rest period between shifts', async ({ page }) => {\n    // Navigate to the schedule creation page\n    await page.goto('/schedule-management/create');\n    \n    // Select an employee\n    await page.click('[data-testid=\"employee-selector\"]');\n    await page.click('[data-testid=\"employee-option-jane-smith\"]');\n    \n    // Create a first shift for the employee with start time 06:00 PM and end time 02:00 AM (next day)\n    await page.click('[data-testid=\"add-shift-button\"]');\n    await page.fill('[data-testid=\"shift-start-time\"]', '06:00');\n    await page.selectOption('[data-testid=\"shift-start-period\"]', 'PM');\n    await page.fill('[data-testid=\"shift-date\"]', '2024-01-15');\n    await page.fill('[data-testid=\"shift-end-time\"]', '02:00');\n    await page.selectOption('[data-testid=\"shift-end-period\"]', 'AM');\n    await page.fill('[data-testid=\"shift-end-date\"]', '2024-01-16');\n    await page.click('[data-testid=\"save-shift-button\"]');\n    \n    // Verify schedule saved\n    await expect(page.locator('[data-testid=\"success-message\"]')).toContainText('Schedule saved');\n    \n    // Create a second consecutive shift for the same employee with start time 08:00 AM (same day as shift end) and end time 04:00 PM (only 6 hours rest between shifts)\n    await page.click('[data-testid=\"add-shift-button\"]');\n    await page.fill('[data-testid=\"shift-start-time\"]', '08:00');\n    await page.selectOption('[data-testid=\"shift-start-period\"]', 'AM');\n    await page.fill('[data-testid=\"shift-date\"]', '2024-01-16');\n    await page.fill('[data-testid=\"shift-end-time\"]', '04:00');\n    await page.selectOption('[data-testid=\"shift-end-period\"]', 'PM');\n    await page.fill('[data-testid=\"shift-end-date\"]', '2024-01-16');\n    await page.click('[data-testid=\"save-shift-button\"]');\n    \n    // Verify schedule saved\n    await expect(page.locator('[data-testid=\"success-message\"]')).toContainText('Schedule saved');\n    \n    // Click the 'Validate Schedule' button to run validation checks\n    await page.click('[data-testid=\"validate-schedule-button\"]');\n    \n    // Wait for validation to complete\n    await page.waitForSelector('[data-testid=\"validation-results\"]', { timeout: 3000 });\n    \n    // Verify system reports rest period violation\n    await expect(page.locator('[data-testid=\"validation-results\"]')).toContainText('rest period violation');\n    await expect(page.locator('[data-testid=\"rest-period-violation\"]')).toBeVisible();\n    \n    // Note the suggested resolution options provided by the system\n    await expect(page.locator('[data-testid=\"resolution-suggestions\"]')).toBeVisible();\n    await expect(page.locator('[data-testid=\"resolution-suggestions\"]')).toContainText('Adjust shift start time');\n    \n    // Adjust the second shift start time to 02:00 PM (providing 12 hours rest)\n    await page.click('[data-testid=\"edit-shift-2\"]');\n    await page.fill('[data-testid=\"shift-start-time\"]', '02:00');\n    await page.selectOption('[data-testid=\"shift-start-period\"]', 'PM');\n    await page.click('[data-testid=\"save-shift-button\"]');\n    \n    // Verify schedule updated\n    await expect(page.locator('[data-testid=\"success-message\"]')).toContainText('Schedule saved');\n    \n    // Click 'Validate Schedule' button again to revalidate the adjusted schedule\n    await page.click('[data-testid=\"validate-schedule-button\"]');\n    \n    // Wait for validation to complete\n    await page.waitForSelector('[data-testid=\"validation-results\"]', { timeout: 3000 });\n    \n    // Verify no violations found\n    await expect(page.locator('[data-testid=\"validation-results\"]')).toContainText('No violations found');\n    await expect(page.locator('[data-testid=\"validation-success\"]')).toBeVisible();\n    await expect(page.locator('[data-testid=\"rest-period-violation\"]')).not.toBeVisible();\n  });\n});"
    }
  ]
}