json
{
  "success": true,
  "playwrightTests": [
    {
      "storyId": "story-10",
      "storyTitle": "As Scheduling Manager, I want to view reports on schedule utilization to optimize workforce planning",
      "testFile": "schedule-utilization-reports.spec.ts",
      "testCode": "import { test, expect } from '@playwright/test';\n\ntest.describe('Schedule Utilization Reports', () => {\n  test.beforeEach(async ({ page }) => {\n    // Login as Scheduling Manager\n    await page.goto('/login');\n    await page.fill('[data-testid=\"username-input\"]', 'scheduling.manager@company.com');\n    await page.fill('[data-testid=\"password-input\"]', 'password123');\n    await page.click('[data-testid=\"login-button\"]');\n    await expect(page).toHaveURL(/.*dashboard/);\n  });\n\n  test('Generate schedule utilization report with valid parameters', async ({ page }) => {\n    // Step 1: Navigate to reporting section\n    await page.click('[data-testid=\"main-menu\"]');\n    await page.click('text=Reports');\n    await expect(page.locator('[data-testid=\"reporting-ui\"]')).toBeVisible();\n    await expect(page.locator('h1')).toContainText('Reports');\n\n    // Step 2: Select date range and department\n    await page.selectOption('[data-testid=\"report-type-dropdown\"]', 'Schedule Utilization');\n    await expect(page.locator('[data-testid=\"report-type-dropdown\"]')).toHaveValue('Schedule Utilization');\n\n    // Select date range (last 30 days)\n    const today = new Date();\n    const thirtyDaysAgo = new Date(today);\n    thirtyDaysAgo.setDate(today.getDate() - 30);\n    \n    await page.fill('[data-testid=\"date-range-start\"]', thirtyDaysAgo.toISOString().split('T')[0]);\n    await page.fill('[data-testid=\"date-range-end\"]', today.toISOString().split('T')[0]);\n    \n    // Select department\n    await page.selectOption('[data-testid=\"department-dropdown\"]', 'Engineering');\n    await expect(page.locator('[data-testid=\"department-dropdown\"]')).toHaveValue('Engineering');\n\n    // Step 3: Generate report\n    const startTime = Date.now();\n    await page.click('[data-testid=\"generate-report-button\"]');\n    \n    // Wait for report to be displayed\n    await expect(page.locator('[data-testid=\"report-container\"]')).toBeVisible({ timeout: 5000 });\n    const endTime = Date.now();\n    const loadTime = endTime - startTime;\n    \n    // Verify report loads within 5 seconds\n    expect(loadTime).toBeLessThan(5000);\n    \n    // Verify report contains accurate data\n    await expect(page.locator('[data-testid=\"shift-coverage-section\"]')).toBeVisible();\n    await expect(page.locator('[data-testid=\"employee-hours-section\"]')).toBeVisible();\n    \n    // Verify shift coverage statistics are displayed\n    await expect(page.locator('[data-testid=\"shift-coverage-stats\"]')).toBeVisible();\n    await expect(page.locator('[data-testid=\"shift-coverage-stats\"]')).toContainText(/Coverage/);\n    \n    // Verify employee scheduled hours are displayed\n    await expect(page.locator('[data-testid=\"employee-hours-stats\"]')).toBeVisible();\n    await expect(page.locator('[data-testid=\"employee-hours-stats\"]')).toContainText(/Hours/);\n  });\n\n  test('Export schedule utilization report', async ({ page }) => {\n    // Step 1: Generate report\n    await page.click('[data-testid=\"main-menu\"]');\n    await page.click('text=Reports');\n    await page.selectOption('[data-testid=\"report-type-dropdown\"]', 'Schedule Utilization');\n    \n    const today = new Date();\n    const thirtyDaysAgo = new Date(today);\n    thirtyDaysAgo.setDate(today.getDate() - 30);\n    \n    await page.fill('[data-testid=\"date-range-start\"]', thirtyDaysAgo.toISOString().split('T')[0]);\n    await page.fill('[data-testid=\"date-range-end\"]', today.toISOString().split('T')[0]);\n    await page.selectOption('[data-testid=\"department-dropdown\"]', 'Engineering');\n    \n    await page.click('[data-testid=\"generate-report-button\"]');\n    await expect(page.locator('[data-testid=\"report-container\"]')).toBeVisible();\n    \n    // Verify export options are available\n    await expect(page.locator('[data-testid=\"export-options\"]')).toBeVisible();\n    await expect(page.locator('[data-testid=\"export-pdf-button\"]')).toBeVisible();\n    await expect(page.locator('[data-testid=\"export-excel-button\"]')).toBeVisible();\n    \n    // Get report data from screen for comparison\n    const reportTitle = await page.locator('[data-testid=\"report-title\"]').textContent();\n    const shiftCoverageData = await page.locator('[data-testid=\"shift-coverage-stats\"]').textContent();\n    const employeeHoursData = await page.locator('[data-testid=\"employee-hours-stats\"]').textContent();\n    \n    // Step 2: Export report as PDF\n    const [pdfDownload] = await Promise.all([\n      page.waitForEvent('download'),\n      page.click('[data-testid=\"export-pdf-button\"]')\n    ]);\n    \n    // Verify PDF download\n    expect(pdfDownload.suggestedFilename()).toMatch(/schedule.*utilization.*\\.pdf/i);\n    const pdfPath = await pdfDownload.path();\n    expect(pdfPath).toBeTruthy();\n    \n    // Wait for download to complete\n    await page.waitForTimeout(1000);\n    \n    // Verify PDF download success message or indicator\n    await expect(page.locator('[data-testid=\"export-success-message\"]')).toBeVisible({ timeout: 3000 });\n    \n    // Step 3: Export report as Excel\n    const [excelDownload] = await Promise.all([\n      page.waitForEvent('download'),\n      page.click('[data-testid=\"export-excel-button\"]')\n    ]);\n    \n    // Verify Excel download\n    expect(excelDownload.suggestedFilename()).toMatch(/schedule.*utilization.*\\.(xlsx|xls)/i);\n    const excelPath = await excelDownload.path();\n    expect(excelPath).toBeTruthy();\n    \n    // Wait for download to complete\n    await page.waitForTimeout(1000);\n    \n    // Verify Excel download success message or indicator\n    await expect(page.locator('[data-testid=\"export-success-message\"]')).toBeVisible({ timeout: 3000 });\n  });\n});"
    }
  ]
}