json
{
  "success": true,
  "playwrightTests": [
    {
      "storyId": "story-13",
      "storyTitle": "As Scheduler, I want to view all active scheduling conflicts in a single interface to manage resolutions efficiently",
      "testFile": "conflict-management.spec.ts",
      "testCode": "import { test, expect } from '@playwright/test';\n\ntest.describe('Conflict Management Interface - Story 13', () => {\n  test.beforeEach(async ({ page }) => {\n    // Login as scheduler\n    await page.goto('/login');\n    await page.fill('[data-testid=\"username-input\"]', 'scheduler@example.com');\n    await page.fill('[data-testid=\"password-input\"]', 'password123');\n    await page.click('[data-testid=\"login-button\"]');\n    await expect(page).toHaveURL(/.*dashboard/);\n  });\n\n  test('Verify display of active conflicts with details', async ({ page }) => {\n    // Navigate to conflict management interface from the main dashboard menu\n    await page.click('[data-testid=\"conflict-management-menu\"]');\n    await expect(page).toHaveURL(/.*conflicts/);\n    \n    // Expected Result: List of active conflicts displayed\n    await expect(page.locator('[data-testid=\"conflicts-list\"]')).toBeVisible();\n    const conflictItems = page.locator('[data-testid=\"conflict-item\"]');\n    await expect(conflictItems).toHaveCount(await conflictItems.count());\n    await expect(conflictItems.first()).toBeVisible();\n    \n    // Select a specific conflict from the displayed list by clicking on it\n    const firstConflict = conflictItems.first();\n    const conflictId = await firstConflict.getAttribute('data-conflict-id');\n    await firstConflict.click();\n    \n    // Expected Result: Detailed conflict information shown\n    await expect(page.locator('[data-testid=\"conflict-details-panel\"]')).toBeVisible();\n    await expect(page.locator('[data-testid=\"conflict-id\"]')).toContainText(conflictId || '');\n    \n    // Verify conflict details displayed in the interface against backend data\n    const response = await page.request.get(`/api/conflicts/${conflictId}`);\n    expect(response.ok()).toBeTruthy();\n    const backendData = await response.json();\n    \n    // Expected Result: Details are accurate and complete\n    await expect(page.locator('[data-testid=\"conflict-resource\"]')).toContainText(backendData.resource);\n    await expect(page.locator('[data-testid=\"conflict-severity\"]')).toContainText(backendData.severity);\n    await expect(page.locator('[data-testid=\"conflict-date\"]')).toContainText(backendData.date);\n    await expect(page.locator('[data-testid=\"conflict-status\"]')).toContainText(backendData.status);\n  });\n\n  test('Test filtering and sorting of conflicts', async ({ page }) => {\n    // Navigate to conflict management interface and locate the filter section\n    await page.click('[data-testid=\"conflict-management-menu\"]');\n    await expect(page).toHaveURL(/.*conflicts/);\n    await expect(page.locator('[data-testid=\"filter-section\"]')).toBeVisible();\n    \n    // Apply filter by selecting a specific resource from the resource dropdown filter\n    await page.click('[data-testid=\"resource-filter-dropdown\"]');\n    await page.click('[data-testid=\"resource-option-conference-room-a\"]');\n    \n    // Expected Result: Only conflicts related to selected resource displayed\n    await page.waitForTimeout(500); // Wait for filter to apply\n    const filteredConflicts = page.locator('[data-testid=\"conflict-item\"]');\n    const conflictCount = await filteredConflicts.count();\n    \n    for (let i = 0; i < conflictCount; i++) {\n      const resourceText = await filteredConflicts.nth(i).locator('[data-testid=\"conflict-resource-name\"]').textContent();\n      expect(resourceText).toContain('Conference Room A');\n    }\n    \n    // Click on the priority column header or select 'Sort by Priority' option\n    await page.click('[data-testid=\"priority-column-header\"]');\n    \n    // Expected Result: Conflicts ordered from highest to lowest priority\n    await page.waitForTimeout(500); // Wait for sorting to apply\n    const sortedConflicts = page.locator('[data-testid=\"conflict-item\"]');\n    const firstPriority = await sortedConflicts.first().locator('[data-testid=\"conflict-priority\"]').textContent();\n    const lastPriority = await sortedConflicts.last().locator('[data-testid=\"conflict-priority\"]').textContent();\n    \n    const priorityMap: { [key: string]: number } = { 'High': 3, 'Medium': 2, 'Low': 1 };\n    const firstPriorityValue = priorityMap[firstPriority?.trim() || 'Low'];\n    const lastPriorityValue = priorityMap[lastPriority?.trim() || 'Low'];\n    expect(firstPriorityValue).toBeGreaterThanOrEqual(lastPriorityValue);\n    \n    // Click 'Clear filters' button or reset icon to remove all applied filters and sorting\n    await page.click('[data-testid=\"clear-filters-button\"]');\n    \n    // Expected Result: Full conflict list restored\n    await page.waitForTimeout(500); // Wait for filters to clear\n    const allConflicts = page.locator('[data-testid=\"conflict-item\"]');\n    const restoredCount = await allConflicts.count();\n    expect(restoredCount).toBeGreaterThan(conflictCount);\n    \n    // Verify resource filter is cleared\n    const filterDropdown = page.locator('[data-testid=\"resource-filter-dropdown\"]');\n    await expect(filterDropdown).toContainText('All Resources');\n  });\n\n  test('Ensure conflict status updates in real-time', async ({ page }) => {\n    // Navigate to conflict management interface\n    await page.click('[data-testid=\"conflict-management-menu\"]');\n    await expect(page).toHaveURL(/.*conflicts/);\n    await expect(page.locator('[data-testid=\"conflicts-list\"]')).toBeVisible();\n    \n    // Select an active conflict from the list\n    const activeConflict = page.locator('[data-testid=\"conflict-item\"]').first();\n    const conflictId = await activeConflict.getAttribute('data-conflict-id');\n    await activeConflict.click();\n    \n    // Verify initial status is active\n    await expect(page.locator('[data-testid=\"conflict-status\"]')).toContainText('Active');\n    \n    // Click 'Mark as Resolved' button or change status to 'Resolved'\n    await page.click('[data-testid=\"mark-resolved-button\"]');\n    \n    // Expected Result: Conflict status updates immediately in interface\n    await expect(page.locator('[data-testid=\"conflict-status\"]')).toContainText('Resolved', { timeout: 5000 });\n    await expect(page.locator('[data-testid=\"success-message\"]')).toBeVisible();\n    await expect(page.locator('[data-testid=\"success-message\"]')).toContainText('Conflict marked as resolved');\n    \n    // Click the refresh button or reload the conflict management interface page\n    await page.click('[data-testid=\"refresh-button\"]');\n    await page.waitForLoadState('networkidle');\n    \n    // Expected Result: Resolved conflict is no longer listed as active\n    const activeConflictsList = page.locator('[data-testid=\"conflict-item\"]');\n    const conflictIds = await activeConflictsList.evaluateAll((elements) => \n      elements.map(el => el.getAttribute('data-conflict-id'))\n    );\n    expect(conflictIds).not.toContain(conflictId);\n    \n    // Navigate to conflict history or resolved conflicts section if available\n    await page.click('[data-testid=\"resolved-conflicts-tab\"]');\n    await expect(page.locator('[data-testid=\"resolved-conflicts-list\"]')).toBeVisible();\n    \n    // Verify the resolved conflict appears in the resolved list\n    const resolvedConflict = page.locator(`[data-testid=\"conflict-item\"][data-conflict-id=\"${conflictId}\"]`);\n    await expect(resolvedConflict).toBeVisible();\n    await expect(resolvedConflict.locator('[data-testid=\"conflict-status\"]')).toContainText('Resolved');\n  });\n});"
    }
  ]
}