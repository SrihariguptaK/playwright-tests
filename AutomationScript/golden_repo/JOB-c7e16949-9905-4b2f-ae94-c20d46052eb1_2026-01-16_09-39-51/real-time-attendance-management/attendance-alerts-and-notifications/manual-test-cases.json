[
  {
    "storyId": "story-6",
    "storyTitle": "As Manager, I want to receive alerts for attendance anomalies to achieve timely response to workforce issues",
    "testCases": [
      {
        "id": "tc-001",
        "title": "Validate alert generation for attendance anomalies",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "Manager is logged into the system with appropriate permissions",
          "Alert configuration module is accessible at /api/alerts",
          "Email, SMS, and in-app notification channels are configured and operational",
          "Real-time attendance monitoring system is active",
          "Test employee account exists in the system"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to Alert Configuration section in the dashboard",
            "expectedResult": "Alert Configuration page loads successfully displaying existing rules and option to create new rules"
          },
          {
            "step": 2,
            "action": "Click on 'Create New Alert Rule' button",
            "expectedResult": "Alert rule creation form is displayed with fields for rule type, threshold, and notification channels"
          },
          {
            "step": 3,
            "action": "Select 'Late Arrival' as the alert type from dropdown",
            "expectedResult": "Late Arrival option is selected and relevant configuration fields appear"
          },
          {
            "step": 4,
            "action": "Set threshold to '15 minutes after scheduled start time'",
            "expectedResult": "Threshold value is accepted and displayed in the configuration form"
          },
          {
            "step": 5,
            "action": "Enable all notification channels: Email, SMS, and In-app notifications",
            "expectedResult": "All three notification channels are checked and highlighted as active"
          },
          {
            "step": 6,
            "action": "Click 'Save Configuration' button",
            "expectedResult": "System displays success message 'Alert configuration saved successfully' and rule appears in the active rules list"
          },
          {
            "step": 7,
            "action": "Verify the saved configuration by checking the alert rules list",
            "expectedResult": "New late arrival rule is visible with correct threshold and enabled notification channels"
          },
          {
            "step": 8,
            "action": "Simulate a late arrival event by marking test employee as checked-in 20 minutes after scheduled start time",
            "expectedResult": "Attendance system records the late arrival with timestamp"
          },
          {
            "step": 9,
            "action": "Wait and monitor alert generation for up to 5 minutes",
            "expectedResult": "System detects the anomaly and generates an alert within 5 minutes of the late arrival event"
          },
          {
            "step": 10,
            "action": "Check in-app notification panel on the dashboard",
            "expectedResult": "Alert notification appears in the dashboard showing employee name, late arrival time, and delay duration"
          },
          {
            "step": 11,
            "action": "Check the configured email inbox for alert notification",
            "expectedResult": "Email alert is received containing employee details, late arrival information, and timestamp within 5 minutes"
          },
          {
            "step": 12,
            "action": "Check the configured mobile device for SMS notification",
            "expectedResult": "SMS alert is received with concise message about late arrival including employee name and delay duration"
          },
          {
            "step": 13,
            "action": "Verify alert details match across all three channels",
            "expectedResult": "All notifications contain consistent information about the same late arrival event with matching timestamps"
          }
        ],
        "postconditions": [
          "Alert rule for late arrivals remains active in the system",
          "Alert is logged in the system with delivery status for all channels",
          "Manager has received notifications on all configured channels",
          "Test employee's late arrival is recorded in attendance history"
        ],
        "estimatedTime": "12 mins"
      },
      {
        "id": "tc-002",
        "title": "Test alert acknowledgment and dismissal",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "Manager is logged into the system with manager role permissions",
          "At least one active alert exists in the system",
          "Alert is visible on the manager's dashboard",
          "Alert has not been previously acknowledged or dismissed"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the Alerts Dashboard section",
            "expectedResult": "Alerts Dashboard loads displaying list of active alerts with details"
          },
          {
            "step": 2,
            "action": "Locate the test alert in the active alerts list",
            "expectedResult": "Alert is visible showing employee name, anomaly type, timestamp, and status as 'Unacknowledged'"
          },
          {
            "step": 3,
            "action": "Click on the alert to view full details",
            "expectedResult": "Alert details panel expands showing complete information including acknowledgment and dismissal action buttons"
          },
          {
            "step": 4,
            "action": "Verify acknowledgment options are available",
            "expectedResult": "'Acknowledge' and 'Dismiss' buttons are visible and enabled in the alert detail view"
          },
          {
            "step": 5,
            "action": "Click the 'Acknowledge' button",
            "expectedResult": "System displays confirmation message 'Alert acknowledged successfully'"
          },
          {
            "step": 6,
            "action": "Verify alert status update after acknowledgment",
            "expectedResult": "Alert status changes from 'Unacknowledged' to 'Acknowledged' with timestamp of acknowledgment and manager's name"
          },
          {
            "step": 7,
            "action": "Check that acknowledged alert remains in the alerts list",
            "expectedResult": "Alert is still visible in the dashboard but marked with 'Acknowledged' status and different visual indicator"
          },
          {
            "step": 8,
            "action": "Navigate to a different unacknowledged alert or create a new test alert",
            "expectedResult": "New alert is visible in the active alerts list with 'Unacknowledged' status"
          },
          {
            "step": 9,
            "action": "Click on the new alert to view details",
            "expectedResult": "Alert details panel opens with full information and action buttons"
          },
          {
            "step": 10,
            "action": "Click the 'Dismiss' button",
            "expectedResult": "System prompts for confirmation with message 'Are you sure you want to dismiss this alert?'"
          },
          {
            "step": 11,
            "action": "Confirm dismissal by clicking 'Yes' or 'Confirm'",
            "expectedResult": "System displays success message 'Alert dismissed successfully'"
          },
          {
            "step": 12,
            "action": "Verify alert is removed from active alerts list",
            "expectedResult": "Dismissed alert is no longer visible in the active alerts dashboard"
          },
          {
            "step": 13,
            "action": "Check alert history or logs to verify dismissed alert is recorded",
            "expectedResult": "Dismissed alert appears in alert history with status 'Dismissed', timestamp, and manager who dismissed it"
          }
        ],
        "postconditions": [
          "Acknowledged alert remains in system with updated status",
          "Dismissed alert is removed from active alerts but retained in history",
          "All alert status changes are logged with timestamps and manager information",
          "Alert counters on dashboard reflect updated numbers"
        ],
        "estimatedTime": "10 mins"
      },
      {
        "id": "tc-003",
        "title": "Verify alert delivery failure handling",
        "type": "error-case",
        "priority": "High",
        "preconditions": [
          "Manager is logged into the system with appropriate permissions",
          "Alert generation system is operational",
          "SMS delivery service is accessible for testing failure scenarios",
          "Alert logging system is active and accessible",
          "Test alert rule is configured with SMS notification enabled",
          "Access to system logs and alert delivery logs is available"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Configure test environment to simulate SMS delivery failure by disabling SMS gateway or using invalid phone number",
            "expectedResult": "SMS delivery service is set to fail for testing purposes while other channels remain operational"
          },
          {
            "step": 2,
            "action": "Trigger an attendance anomaly event that should generate an alert",
            "expectedResult": "System detects the anomaly and initiates alert generation process"
          },
          {
            "step": 3,
            "action": "Monitor alert delivery attempts in real-time",
            "expectedResult": "System attempts to deliver alert via all configured channels including SMS"
          },
          {
            "step": 4,
            "action": "Verify SMS delivery failure occurs",
            "expectedResult": "SMS delivery fails with appropriate error response from SMS gateway"
          },
          {
            "step": 5,
            "action": "Observe system retry mechanism for SMS delivery",
            "expectedResult": "System automatically retries SMS delivery according to configured retry policy (e.g., 3 retry attempts with intervals)"
          },
          {
            "step": 6,
            "action": "Wait for all retry attempts to complete",
            "expectedResult": "System exhausts all retry attempts and marks SMS delivery as failed"
          },
          {
            "step": 7,
            "action": "Verify other notification channels (email and in-app) are delivered successfully",
            "expectedResult": "Email and in-app notifications are delivered successfully despite SMS failure"
          },
          {
            "step": 8,
            "action": "Navigate to Alert Logs section in the system",
            "expectedResult": "Alert Logs page loads displaying list of recent alerts with delivery status"
          },
          {
            "step": 9,
            "action": "Locate the test alert in the logs",
            "expectedResult": "Test alert is visible in the logs with detailed delivery status for each channel"
          },
          {
            "step": 10,
            "action": "Click on the alert entry to view detailed delivery information",
            "expectedResult": "Detailed log view opens showing delivery status breakdown by channel"
          },
          {
            "step": 11,
            "action": "Verify SMS delivery failure is recorded with timestamp",
            "expectedResult": "SMS channel shows 'Failed' status with timestamp of initial attempt and all retry attempts"
          },
          {
            "step": 12,
            "action": "Check error details for SMS delivery failure",
            "expectedResult": "Error details are logged including error code, error message (e.g., 'SMS gateway timeout', 'Invalid recipient'), and number of retry attempts"
          },
          {
            "step": 13,
            "action": "Verify successful delivery channels are also logged",
            "expectedResult": "Email and in-app channels show 'Delivered' status with successful delivery timestamps"
          },
          {
            "step": 14,
            "action": "Check if system generated any internal alerts or notifications about the delivery failure",
            "expectedResult": "System logs the failure appropriately and may generate admin notification about SMS delivery issues if configured"
          }
        ],
        "postconditions": [
          "SMS delivery failure is fully documented in alert logs",
          "All retry attempts are recorded with timestamps and error details",
          "Successful delivery channels are confirmed and logged",
          "Alert remains in the system with partial delivery status",
          "System is ready for subsequent alert deliveries",
          "Test SMS gateway configuration can be restored to normal operation"
        ],
        "estimatedTime": "15 mins"
      }
    ]
  }
]