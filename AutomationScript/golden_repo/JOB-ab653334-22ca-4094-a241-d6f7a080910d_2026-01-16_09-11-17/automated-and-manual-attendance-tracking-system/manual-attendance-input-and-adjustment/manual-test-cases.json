[
  {
    "storyId": "story-24",
    "storyTitle": "As HR Officer, I want to input manual attendance entries to achieve complete attendance records",
    "testCases": [
      {
        "id": "tc-001",
        "title": "Validate manual attendance creation with valid data",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "User is logged in as an authorized HR officer",
          "Manual attendance entry page is accessible",
          "At least one employee exists in the system",
          "No existing attendance record exists for the selected employee and date"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to manual attendance entry page",
            "expectedResult": "Form is displayed with required fields including employee selector, date picker, time in, time out, and attendance status fields"
          },
          {
            "step": 2,
            "action": "Select an employee from the employee dropdown list",
            "expectedResult": "Employee is selected and displayed in the form"
          },
          {
            "step": 3,
            "action": "Select a valid date using the date picker",
            "expectedResult": "Date is populated in the date field without errors"
          },
          {
            "step": 4,
            "action": "Enter valid time in (e.g., 09:00 AM) and time out (e.g., 05:00 PM)",
            "expectedResult": "Time fields accept the input and display the entered values"
          },
          {
            "step": 5,
            "action": "Select attendance status (e.g., Present, Half-day)",
            "expectedResult": "Status is selected and displayed in the form"
          },
          {
            "step": 6,
            "action": "Click the Submit button",
            "expectedResult": "Form is submitted, entry is saved to the database, and a success confirmation message is displayed with the entry details"
          },
          {
            "step": 7,
            "action": "Verify the response time of the submission",
            "expectedResult": "Submission completes within 3 seconds"
          }
        ],
        "postconditions": [
          "Manual attendance entry is saved in the database",
          "Audit log contains the creation record with HR officer username and timestamp",
          "Confirmation message is displayed to the user",
          "Form is cleared or reset for next entry"
        ],
        "estimatedTime": "5 mins"
      },
      {
        "id": "tc-002",
        "title": "Verify validation prevents overlapping attendance records",
        "type": "error-case",
        "priority": "High",
        "preconditions": [
          "User is logged in as an authorized HR officer",
          "Manual attendance entry page is accessible",
          "An existing attendance record exists for employee 'John Doe' on date '2024-01-15' with time 09:00 AM to 05:00 PM"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to manual attendance entry page",
            "expectedResult": "Manual attendance form is displayed"
          },
          {
            "step": 2,
            "action": "Select employee 'John Doe' from the dropdown",
            "expectedResult": "Employee 'John Doe' is selected"
          },
          {
            "step": 3,
            "action": "Select date '2024-01-15' which already has an attendance record",
            "expectedResult": "Date is populated in the date field"
          },
          {
            "step": 4,
            "action": "Enter overlapping time period (e.g., 10:00 AM to 06:00 PM)",
            "expectedResult": "Time values are entered in the form"
          },
          {
            "step": 5,
            "action": "Click the Submit button",
            "expectedResult": "System displays validation error message indicating overlapping attendance record exists and blocks submission. Error message clearly states the conflict with existing record details"
          },
          {
            "step": 6,
            "action": "Change the date to '2024-01-16' which has no existing record",
            "expectedResult": "Date field is updated to '2024-01-16'"
          },
          {
            "step": 7,
            "action": "Keep the same time values (10:00 AM to 06:00 PM) and click Submit",
            "expectedResult": "Form is submitted successfully, entry is saved, and confirmation message is displayed"
          }
        ],
        "postconditions": [
          "No overlapping attendance record is created",
          "Valid non-overlapping record is saved in the database",
          "Audit log records the successful creation with timestamp",
          "User receives appropriate feedback for both validation error and successful submission"
        ],
        "estimatedTime": "7 mins"
      },
      {
        "id": "tc-003",
        "title": "Ensure audit trail logs manual attendance changes",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "User is logged in as an authorized HR officer with username 'hr.officer@company.com'",
          "Manual attendance entry page is accessible",
          "Audit logging system is enabled and functioning",
          "Database has audit trail table configured"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to manual attendance entry page and create a new attendance entry for employee 'Jane Smith' on '2024-01-20' with time 08:00 AM to 04:00 PM",
            "expectedResult": "Manual attendance entry is created successfully with confirmation message"
          },
          {
            "step": 2,
            "action": "Access the audit log table or audit trail interface and search for the latest entry",
            "expectedResult": "Audit log displays a CREATE record with employee name 'Jane Smith', date '2024-01-20', user 'hr.officer@company.com', timestamp of creation, and action type 'CREATE'"
          },
          {
            "step": 3,
            "action": "Navigate to the attendance records list and select the newly created entry for 'Jane Smith'",
            "expectedResult": "Attendance record details are displayed with edit option"
          },
          {
            "step": 4,
            "action": "Click Edit button and modify the time out from 04:00 PM to 05:00 PM, then save the changes",
            "expectedResult": "Attendance record is updated successfully with confirmation message"
          },
          {
            "step": 5,
            "action": "Access the audit log and search for modification records for this entry",
            "expectedResult": "Audit log displays an UPDATE record showing the change from '04:00 PM' to '05:00 PM', user 'hr.officer@company.com', timestamp of modification, action type 'UPDATE', and both old and new values"
          },
          {
            "step": 6,
            "action": "Navigate back to the attendance records list and select the same entry for 'Jane Smith'",
            "expectedResult": "Updated attendance record is displayed"
          },
          {
            "step": 7,
            "action": "Click Delete button and confirm the deletion",
            "expectedResult": "Attendance record is deleted successfully with confirmation message"
          },
          {
            "step": 8,
            "action": "Access the audit log and search for deletion records",
            "expectedResult": "Audit log displays a DELETE record with employee name 'Jane Smith', date '2024-01-20', user 'hr.officer@company.com', timestamp of deletion, action type 'DELETE', and the deleted record details"
          },
          {
            "step": 9,
            "action": "Verify all three audit entries (CREATE, UPDATE, DELETE) are present and contain complete information",
            "expectedResult": "All audit trail entries are complete with 100% data integrity including user, timestamp, action type, and affected data"
          }
        ],
        "postconditions": [
          "Audit log contains three entries for the same attendance record: CREATE, UPDATE, and DELETE",
          "Each audit entry includes user identification, timestamp, action type, and relevant data changes",
          "Audit trail completeness is 100% for all operations",
          "Deleted attendance record is no longer visible in active records but preserved in audit log"
        ],
        "estimatedTime": "10 mins"
      }
    ]
  },
  {
    "storyId": "story-26",
    "storyTitle": "As HR Officer, I want to bulk upload manual attendance records to achieve efficient data entry",
    "testCases": [
      {
        "id": "tc-004",
        "title": "Validate successful bulk upload with valid CSV",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "User is logged in as an authorized HR officer",
          "Bulk upload page is accessible",
          "Valid CSV file is prepared with correct schema (columns: employee_id, date, time_in, time_out, status)",
          "CSV file contains 50 valid attendance records",
          "All employees referenced in CSV exist in the system",
          "No overlapping attendance records exist for the dates in CSV"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the bulk upload page from the main attendance menu",
            "expectedResult": "Bulk upload page is displayed with file upload form, CSV template download link, and instructions for file format"
          },
          {
            "step": 2,
            "action": "Click on 'Download CSV Template' link to verify template format",
            "expectedResult": "CSV template file is downloaded with correct column headers: employee_id, date, time_in, time_out, status"
          },
          {
            "step": 3,
            "action": "Click 'Choose File' button and select the prepared valid CSV file containing 50 records",
            "expectedResult": "File name is displayed in the upload form showing the selected file"
          },
          {
            "step": 4,
            "action": "Click 'Upload' or 'Submit' button to initiate the bulk upload process",
            "expectedResult": "System displays a processing indicator and begins validating and processing the file"
          },
          {
            "step": 5,
            "action": "Wait for the upload process to complete and observe the processing time",
            "expectedResult": "Upload completes within 2 minutes and displays a success summary showing: Total records: 50, Successful: 50, Failed: 0"
          },
          {
            "step": 6,
            "action": "Review the detailed upload summary report",
            "expectedResult": "Summary report displays success count, failure count, processing time, and a list of successfully uploaded records with employee names and dates"
          },
          {
            "step": 7,
            "action": "Navigate to the manual attendance records list and filter by the upload date",
            "expectedResult": "All 50 uploaded attendance records are visible in the system with correct data matching the CSV file"
          },
          {
            "step": 8,
            "action": "Select a few random records from the uploaded batch and verify their details",
            "expectedResult": "Record details match exactly with the corresponding entries in the uploaded CSV file (employee, date, time in, time out, status)"
          }
        ],
        "postconditions": [
          "All 50 valid records from CSV are persisted in the database",
          "Upload summary report is available for review",
          "Audit log contains bulk upload event with timestamp and user details",
          "Upload success rate is 100% for valid data",
          "System performance meets the 2-minute processing requirement"
        ],
        "estimatedTime": "8 mins"
      },
      {
        "id": "tc-005",
        "title": "Verify error reporting for invalid CSV records",
        "type": "error-case",
        "priority": "High",
        "preconditions": [
          "User is logged in as an authorized HR officer",
          "Bulk upload page is accessible",
          "CSV file is prepared with mixed valid and invalid records (20 total: 15 valid, 5 invalid)",
          "Invalid records include: missing employee_id, invalid date format, time_out before time_in, non-existent employee, and overlapping attendance"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the bulk upload page",
            "expectedResult": "Bulk upload form is displayed with file selection option"
          },
          {
            "step": 2,
            "action": "Select the CSV file containing 20 records (15 valid, 5 invalid) and click Upload",
            "expectedResult": "System begins processing the file and displays processing indicator"
          },
          {
            "step": 3,
            "action": "Wait for the validation and upload process to complete",
            "expectedResult": "System completes processing and displays upload summary with Total: 20, Successful: 15, Failed: 5"
          },
          {
            "step": 4,
            "action": "Review the error report section of the upload summary",
            "expectedResult": "Detailed error messages are displayed for each of the 5 failed records including: row number, field name, error type, and specific error description (e.g., 'Row 3: employee_id is required', 'Row 7: Invalid date format, expected YYYY-MM-DD', 'Row 12: time_out cannot be before time_in', 'Row 15: Employee ID EMP999 does not exist', 'Row 18: Overlapping attendance record exists for this employee and date')"
          },
          {
            "step": 5,
            "action": "Download or copy the error report",
            "expectedResult": "Error report is available for download in CSV or text format with all error details"
          },
          {
            "step": 6,
            "action": "Verify that valid records were saved by navigating to attendance records list",
            "expectedResult": "15 valid records from the CSV are successfully saved and visible in the system"
          },
          {
            "step": 7,
            "action": "Correct the 5 invalid records in the CSV file based on the error messages",
            "expectedResult": "CSV file is updated with corrected data for the 5 previously failed records"
          },
          {
            "step": 8,
            "action": "Navigate back to bulk upload page and upload the corrected CSV file containing only the 5 corrected records",
            "expectedResult": "File is selected and ready for upload"
          },
          {
            "step": 9,
            "action": "Click Upload button to submit the corrected file",
            "expectedResult": "System processes the file and displays success summary showing Total: 5, Successful: 5, Failed: 0"
          },
          {
            "step": 10,
            "action": "Verify all corrected records are now saved in the system",
            "expectedResult": "All 5 corrected records are visible in the attendance records list with accurate data"
          }
        ],
        "postconditions": [
          "15 valid records from initial upload are persisted in database",
          "5 invalid records from initial upload are rejected with detailed error messages",
          "5 corrected records from second upload are persisted in database",
          "Total of 20 attendance records are successfully saved after correction",
          "Error report provides actionable information for data correction",
          "Audit log contains both upload attempts with success/failure details"
        ],
        "estimatedTime": "12 mins"
      },
      {
        "id": "tc-006",
        "title": "Ensure access control for bulk upload functionality",
        "type": "error-case",
        "priority": "High",
        "preconditions": [
          "Two user accounts are available: one unauthorized user (role: Employee) and one authorized HR officer (role: HR Officer)",
          "Bulk upload functionality is restricted to HR Officer role only",
          "Both users have valid login credentials",
          "Application implements role-based access control (RBAC)"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Open the application login page in a browser",
            "expectedResult": "Login page is displayed with username and password fields"
          },
          {
            "step": 2,
            "action": "Enter credentials for unauthorized user (Employee role) and click Login",
            "expectedResult": "User is successfully logged in and redirected to the employee dashboard"
          },
          {
            "step": 3,
            "action": "Attempt to navigate to the bulk upload page by entering the URL directly (e.g., /attendance/bulk-upload)",
            "expectedResult": "Access is denied with error message 'Access Forbidden: You do not have permission to access this page' or user is redirected to unauthorized access page with HTTP 403 status"
          },
          {
            "step": 4,
            "action": "Check the main navigation menu for bulk upload option",
            "expectedResult": "Bulk upload menu item is not visible or not accessible to the unauthorized user"
          },
          {
            "step": 5,
            "action": "Log out from the unauthorized user account",
            "expectedResult": "User is logged out successfully and redirected to login page"
          },
          {
            "step": 6,
            "action": "Enter credentials for authorized HR officer and click Login",
            "expectedResult": "HR officer is successfully logged in and redirected to the HR dashboard"
          },
          {
            "step": 7,
            "action": "Check the main navigation menu for bulk upload option",
            "expectedResult": "Bulk upload menu item is visible and accessible in the attendance or HR management section"
          },
          {
            "step": 8,
            "action": "Click on the bulk upload menu item or navigate to /attendance/bulk-upload",
            "expectedResult": "Bulk upload page is displayed successfully with file upload form and all functionality accessible"
          },
          {
            "step": 9,
            "action": "Verify all bulk upload features are functional (file selection, upload button, template download)",
            "expectedResult": "All bulk upload features are available and functional for the authorized HR officer"
          }
        ],
        "postconditions": [
          "Unauthorized user (Employee role) cannot access bulk upload functionality",
          "Authorized HR officer has full access to bulk upload page and features",
          "Access control is enforced at both UI and API levels",
          "Security audit log records unauthorized access attempt",
          "Role-based access control is functioning correctly"
        ],
        "estimatedTime": "6 mins"
      }
    ]
  },
  {
    "storyId": "story-28",
    "storyTitle": "As HR Officer, I want to audit manual attendance changes to achieve compliance and traceability",
    "testCases": [
      {
        "id": "tc-001",
        "title": "Verify audit log creation for manual attendance changes",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "User is logged in as HR Officer with audit log access permissions",
          "Manual attendance module is accessible and functional",
          "Audit log database is operational and configured",
          "At least one employee record exists in the system",
          "Test data for manual attendance entries is prepared"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the manual attendance entry module",
            "expectedResult": "Manual attendance entry page loads successfully"
          },
          {
            "step": 2,
            "action": "Create a new manual attendance entry for an employee with date, time-in, and time-out details",
            "expectedResult": "Manual attendance entry is created successfully and confirmation message is displayed"
          },
          {
            "step": 3,
            "action": "Navigate to the audit log module via the menu or dashboard",
            "expectedResult": "Audit log interface loads successfully showing the list of audit records"
          },
          {
            "step": 4,
            "action": "Search for the recently created manual attendance entry in the audit log by filtering with current date and 'CREATE' action type",
            "expectedResult": "Audit log displays the CREATE action with correct user identity, timestamp, employee details, and attendance data"
          },
          {
            "step": 5,
            "action": "Return to manual attendance module and update the previously created attendance entry by modifying the time-out value",
            "expectedResult": "Manual attendance entry is updated successfully and confirmation message is displayed"
          },
          {
            "step": 6,
            "action": "Navigate back to the audit log module and filter by current date and 'UPDATE' action type",
            "expectedResult": "Audit log displays the UPDATE action with user identity, timestamp, old values, and new values for the modified fields"
          },
          {
            "step": 7,
            "action": "Return to manual attendance module and delete the previously created attendance entry",
            "expectedResult": "Manual attendance entry is deleted successfully and confirmation message is displayed"
          },
          {
            "step": 8,
            "action": "Navigate back to the audit log module and filter by current date and 'DELETE' action type",
            "expectedResult": "Audit log displays the DELETE action with user identity, timestamp, and details of the deleted attendance record"
          },
          {
            "step": 9,
            "action": "Apply multiple filters in the audit log: select specific user, date range covering today, and all action types (CREATE, UPDATE, DELETE)",
            "expectedResult": "System returns all three audit records (CREATE, UPDATE, DELETE) matching the filter criteria with accurate details and within 5 seconds response time"
          },
          {
            "step": 10,
            "action": "Click on the 'Export' button in the audit log interface and select CSV format",
            "expectedResult": "CSV file download initiates successfully"
          },
          {
            "step": 11,
            "action": "Open the downloaded CSV file and verify its contents",
            "expectedResult": "CSV file contains all three audit records with columns for action type, user identity, timestamp, employee details, and change details matching the data displayed in the audit log interface"
          }
        ],
        "postconditions": [
          "All manual attendance changes are logged in the audit database",
          "Audit logs contain complete and accurate information for CREATE, UPDATE, and DELETE actions",
          "CSV export file is downloaded and contains correct audit data",
          "Test attendance entry is deleted from the system",
          "Audit logs remain immutable and intact"
        ],
        "estimatedTime": "15 mins"
      },
      {
        "id": "tc-002",
        "title": "Ensure audit log access control",
        "type": "error-case",
        "priority": "High",
        "preconditions": [
          "System has role-based access control configured",
          "Test user accounts exist: one unauthorized user (e.g., regular employee) and one authorized HR officer",
          "Audit log module is operational",
          "Manual attendance audit logs contain data",
          "Login functionality is working correctly"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Open the application login page",
            "expectedResult": "Login page loads successfully with username and password fields"
          },
          {
            "step": 2,
            "action": "Enter credentials for an unauthorized user (regular employee without HR or auditor role) and click login",
            "expectedResult": "User is logged in successfully and redirected to their dashboard"
          },
          {
            "step": 3,
            "action": "Attempt to navigate to the audit log module by entering the URL directly or searching for it in the menu",
            "expectedResult": "Access is denied with an appropriate error message such as 'Access Denied: Insufficient Permissions' or the audit log option is not visible in the menu"
          },
          {
            "step": 4,
            "action": "Attempt to access the audit log API endpoint directly (GET /api/manual-attendance/audit-logs) using browser or API testing tool",
            "expectedResult": "API returns 403 Forbidden status code with error message indicating insufficient permissions"
          },
          {
            "step": 5,
            "action": "Logout from the unauthorized user account",
            "expectedResult": "User is logged out successfully and redirected to the login page"
          },
          {
            "step": 6,
            "action": "Enter credentials for an authorized HR officer with audit log access permissions and click login",
            "expectedResult": "HR officer is logged in successfully and redirected to their dashboard"
          },
          {
            "step": 7,
            "action": "Navigate to the audit log module via the menu or dashboard",
            "expectedResult": "Audit log module is accessible and loads successfully displaying the audit log interface"
          },
          {
            "step": 8,
            "action": "Verify that audit log records are visible and can be filtered and searched",
            "expectedResult": "Audit log records are displayed correctly with all filtering and search functionalities working as expected"
          },
          {
            "step": 9,
            "action": "Access the audit log API endpoint directly (GET /api/manual-attendance/audit-logs) using the authorized session",
            "expectedResult": "API returns 200 OK status code with audit log data in the response"
          }
        ],
        "postconditions": [
          "Unauthorized users cannot access audit logs through UI or API",
          "Authorized HR officers have full access to audit log functionality",
          "Access control is enforced at both UI and API levels",
          "Security logs may record unauthorized access attempts",
          "All users are logged out after testing"
        ],
        "estimatedTime": "10 mins"
      }
    ]
  }
]