[
  {
    "storyId": "story-4",
    "storyTitle": "As Scheduling Manager, I want to assign shift templates to employees to create employee schedules",
    "testCases": [
      {
        "id": "tc-001",
        "title": "Assign shift template to employee successfully",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "User is logged in as Scheduling Manager with appropriate permissions",
          "At least one employee exists in the system",
          "At least one shift template is configured and available",
          "No existing shifts assigned to the selected employee for the target date range",
          "Schedule creation page is accessible"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to schedule creation page",
            "expectedResult": "Schedule creation UI is displayed with options to select employees, shift templates, and date ranges"
          },
          {
            "step": 2,
            "action": "Select an employee from the employee dropdown or list",
            "expectedResult": "Selected employee is highlighted and displayed in the assignment form"
          },
          {
            "step": 3,
            "action": "Select a shift template from the available templates dropdown",
            "expectedResult": "Shift template details (start time, end time, duration) are displayed"
          },
          {
            "step": 4,
            "action": "Select a date range for the shift assignment using the date picker",
            "expectedResult": "Date range is accepted and displayed in the form without validation errors"
          },
          {
            "step": 5,
            "action": "Click the Submit or Save button to create the assignment",
            "expectedResult": "System processes the request, schedule is saved to the database, and a success confirmation message is displayed (e.g., 'Schedule assigned successfully')"
          },
          {
            "step": 6,
            "action": "Verify the assigned schedule appears in the schedule list or calendar view",
            "expectedResult": "The newly assigned shift is visible with correct employee name, shift template, and date range"
          }
        ],
        "postconditions": [
          "Employee schedule is saved in the EmployeeSchedules table",
          "Schedule is visible in calendar and list views",
          "No scheduling conflicts exist",
          "System remains on schedule management page or displays success confirmation"
        ],
        "estimatedTime": "5 mins"
      },
      {
        "id": "tc-002",
        "title": "Prevent overlapping shift assignment",
        "type": "error-case",
        "priority": "High",
        "preconditions": [
          "User is logged in as Scheduling Manager with appropriate permissions",
          "An employee exists in the system with at least one shift already assigned",
          "The existing shift has a specific date and time range (e.g., 9:00 AM - 5:00 PM on a specific date)",
          "A shift template exists that would overlap with the existing shift",
          "Schedule creation page is accessible"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to schedule creation page",
            "expectedResult": "Schedule creation UI is displayed"
          },
          {
            "step": 2,
            "action": "Select the employee who already has an assigned shift",
            "expectedResult": "Employee is selected and their existing schedules are loaded in the background"
          },
          {
            "step": 3,
            "action": "Select a shift template that overlaps with the employee's existing shift time",
            "expectedResult": "Shift template is selected and details are displayed"
          },
          {
            "step": 4,
            "action": "Select a date range that includes the date of the existing shift",
            "expectedResult": "Date range is entered in the form"
          },
          {
            "step": 5,
            "action": "Click Submit or Save button to attempt the assignment",
            "expectedResult": "System validates the assignment and displays a validation error message indicating overlapping shifts (e.g., 'Error: This shift overlaps with an existing shift for this employee on [date]')"
          },
          {
            "step": 6,
            "action": "Verify that the Save button remains disabled or the form prevents submission",
            "expectedResult": "Assignment is not saved, and the user cannot proceed until the conflict is resolved"
          },
          {
            "step": 7,
            "action": "Attempt to modify the date range or shift template to resolve the conflict",
            "expectedResult": "Form allows modifications and validation error clears when conflict is resolved"
          }
        ],
        "postconditions": [
          "No overlapping shift is saved to the database",
          "Original employee schedule remains unchanged",
          "User remains on schedule creation page with error message visible",
          "System maintains data integrity"
        ],
        "estimatedTime": "7 mins"
      },
      {
        "id": "tc-003",
        "title": "Enforce maximum working hours per employee",
        "type": "error-case",
        "priority": "High",
        "preconditions": [
          "User is logged in as Scheduling Manager with appropriate permissions",
          "Maximum working hours per day and per week are configured in the system (e.g., 12 hours/day, 40 hours/week)",
          "An employee exists in the system",
          "Employee may have existing shifts that contribute to their total hours",
          "Shift templates exist that would cause the employee to exceed maximum hours",
          "Schedule creation page is accessible"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to schedule creation page",
            "expectedResult": "Schedule creation UI is displayed"
          },
          {
            "step": 2,
            "action": "Select an employee from the employee list",
            "expectedResult": "Employee is selected and current hours summary may be displayed"
          },
          {
            "step": 3,
            "action": "Select shift templates and date ranges that would result in exceeding maximum hours per day (e.g., assigning 14 hours in a single day when max is 12)",
            "expectedResult": "Shift assignments are entered in the form"
          },
          {
            "step": 4,
            "action": "Click Submit or Save button",
            "expectedResult": "System validates total working hours and displays a warning or error message (e.g., 'Error: Assignment exceeds maximum working hours per day (12 hours). Current total: 14 hours')"
          },
          {
            "step": 5,
            "action": "Verify that the assignment is blocked from being saved",
            "expectedResult": "Save operation is prevented and user cannot proceed until hours are within limits"
          },
          {
            "step": 6,
            "action": "Alternatively, assign shifts that would exceed maximum hours per week (e.g., 45 hours when max is 40)",
            "expectedResult": "System displays appropriate error message for weekly hour limit violation (e.g., 'Error: Assignment exceeds maximum working hours per week (40 hours). Current total: 45 hours')"
          },
          {
            "step": 7,
            "action": "Attempt to save the schedule with hours exceeding weekly limit",
            "expectedResult": "Save is blocked and error message remains visible until hours are adjusted to be within limits"
          },
          {
            "step": 8,
            "action": "Modify the shift assignments to bring hours within acceptable limits",
            "expectedResult": "Error message clears and Save button becomes enabled when hours are compliant"
          }
        ],
        "postconditions": [
          "No schedule exceeding maximum hours is saved to the database",
          "Employee working hours remain within configured limits",
          "User remains on schedule creation page with validation feedback",
          "System enforces business rules for employee working hours"
        ],
        "estimatedTime": "8 mins"
      }
    ]
  },
  {
    "storyId": "story-5",
    "storyTitle": "As Scheduling Manager, I want to view employee schedules in a calendar to monitor shift assignments",
    "testCases": [
      {
        "id": "tc-004",
        "title": "View schedules in calendar with filters",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "User is logged in as Scheduling Manager with appropriate permissions",
          "Multiple employees exist in the system with assigned schedules",
          "Schedules include various shift types and departments",
          "At least one scheduling conflict exists in the data for testing conflict highlighting",
          "At least one unassigned shift or gap exists in the schedule",
          "Schedule calendar page is accessible"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the schedule calendar page from the main menu or dashboard",
            "expectedResult": "Calendar page loads within 3 seconds displaying the default view (e.g., current week) with all employee schedules visible"
          },
          {
            "step": 2,
            "action": "Verify that the calendar displays schedules with employee names, shift times, and shift types",
            "expectedResult": "All scheduled shifts are visible in the calendar with complete information displayed clearly"
          },
          {
            "step": 3,
            "action": "Locate and click on the employee filter dropdown",
            "expectedResult": "Employee filter dropdown opens showing a list of all employees"
          },
          {
            "step": 4,
            "action": "Select a specific employee from the filter dropdown",
            "expectedResult": "Calendar updates to display only the schedules for the selected employee, other employees' schedules are hidden"
          },
          {
            "step": 5,
            "action": "Locate and click on the shift type filter dropdown",
            "expectedResult": "Shift type filter dropdown opens showing available shift types (e.g., Morning, Evening, Night)"
          },
          {
            "step": 6,
            "action": "Select a specific shift type from the filter dropdown",
            "expectedResult": "Calendar further filters to show only shifts matching both the selected employee and shift type"
          },
          {
            "step": 7,
            "action": "Verify that scheduling conflicts are visually highlighted (e.g., with red color, warning icon, or border)",
            "expectedResult": "Any overlapping shifts or scheduling conflicts are clearly marked with visual indicators that distinguish them from normal shifts"
          },
          {
            "step": 8,
            "action": "Verify that unassigned shifts or gaps in coverage are visually indicated (e.g., with different color, empty slots, or warning markers)",
            "expectedResult": "Unassigned shifts and coverage gaps are clearly visible with distinct visual styling that makes them easy to identify"
          },
          {
            "step": 9,
            "action": "Clear all filters or select 'All' options to return to full calendar view",
            "expectedResult": "Calendar resets to show all employees and all shift types with all schedules visible"
          }
        ],
        "postconditions": [
          "Calendar remains in the last selected view state",
          "All filters are functional and can be reapplied",
          "No data is modified during viewing",
          "System performance remains within 3-second load time SLA"
        ],
        "estimatedTime": "6 mins"
      },
      {
        "id": "tc-005",
        "title": "Edit shift from calendar view",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "User is logged in as Scheduling Manager with edit permissions",
          "Calendar page is loaded and displaying employee schedules",
          "At least one shift is visible in the calendar view",
          "The shift to be edited does not have any restrictions preventing modification",
          "System allows direct editing from calendar interface"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Locate a specific shift in the calendar view",
            "expectedResult": "Shift is visible with employee name, time, and shift details displayed"
          },
          {
            "step": 2,
            "action": "Click on the shift block in the calendar",
            "expectedResult": "Edit form or modal dialog opens displaying the current shift details including employee, shift template, start time, end time, and date"
          },
          {
            "step": 3,
            "action": "Verify that all shift fields are editable and populated with current values",
            "expectedResult": "Form displays all editable fields with existing data pre-filled"
          },
          {
            "step": 4,
            "action": "Modify one or more shift details (e.g., change shift time, change shift template, or adjust date)",
            "expectedResult": "Modified values are accepted in the form fields without errors"
          },
          {
            "step": 5,
            "action": "Click the Save or Update button in the edit form",
            "expectedResult": "System validates the changes, saves the updated shift to the database, and displays a success confirmation message (e.g., 'Shift updated successfully')"
          },
          {
            "step": 6,
            "action": "Verify that the edit form closes automatically after successful save",
            "expectedResult": "Edit form or modal closes and returns user to the calendar view"
          },
          {
            "step": 7,
            "action": "Verify that the calendar automatically refreshes to display the updated shift information",
            "expectedResult": "Calendar shows the modified shift with updated details in the correct position, reflecting all changes made"
          },
          {
            "step": 8,
            "action": "Optionally, click on the same shift again to verify changes were persisted",
            "expectedResult": "Edit form opens showing the updated values, confirming that changes were saved correctly"
          }
        ],
        "postconditions": [
          "Shift is updated in the EmployeeSchedules table with new values",
          "Calendar view reflects the updated shift information",
          "No scheduling conflicts are introduced by the edit",
          "User remains on the calendar page with updated view",
          "Audit trail is created for the shift modification (if applicable)"
        ],
        "estimatedTime": "5 mins"
      }
    ]
  },
  {
    "storyId": "story-6",
    "storyTitle": "As Scheduling Manager, I want to validate schedules to prevent overlapping shifts for employees",
    "testCases": [
      {
        "id": "tc-001",
        "title": "Detect overlapping shifts during schedule creation",
        "type": "error-case",
        "priority": "High",
        "preconditions": [
          "User is logged in as Scheduling Manager with schedule creation permissions",
          "Employee database is accessible and contains active employees",
          "At least one employee has an existing shift scheduled (e.g., Employee ID: EMP001 has shift from 9:00 AM to 5:00 PM on 2024-01-15)",
          "Schedule creation interface is loaded and functional"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the schedule creation page",
            "expectedResult": "Schedule creation page loads successfully with employee selection and shift assignment options visible"
          },
          {
            "step": 2,
            "action": "Select an employee who already has an existing shift (e.g., EMP001 with shift 9:00 AM - 5:00 PM on 2024-01-15)",
            "expectedResult": "Employee is selected and their existing schedule information is displayed or accessible"
          },
          {
            "step": 3,
            "action": "Assign a new shift that overlaps with the existing shift (e.g., 3:00 PM - 11:00 PM on 2024-01-15)",
            "expectedResult": "Validation error is displayed immediately in real-time stating 'Shift overlap detected: Employee EMP001 already has a shift from 9:00 AM to 5:00 PM on 2024-01-15' or similar detailed conflict message"
          },
          {
            "step": 4,
            "action": "Attempt to save the schedule by clicking the Save button",
            "expectedResult": "Save operation is blocked, error message persists or is reinforced, and schedule is not saved to the database. User remains on the schedule creation page with the conflict highlighted"
          }
        ],
        "postconditions": [
          "Schedule with overlapping shifts is not saved to the database",
          "Validation error is logged in the system audit log with timestamp, user ID, and conflict details",
          "Employee's original shift remains unchanged",
          "User remains on schedule creation page to resolve the conflict"
        ],
        "estimatedTime": "5 mins"
      },
      {
        "id": "tc-002",
        "title": "Resolve overlapping shift and save successfully",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "User is logged in as Scheduling Manager with schedule creation permissions",
          "An overlapping shift conflict exists for an employee (e.g., EMP001 has existing shift 9:00 AM - 5:00 PM and attempted new shift 3:00 PM - 11:00 PM on 2024-01-15)",
          "Validation error is currently displayed on the schedule creation page",
          "Schedule has not been saved due to the conflict"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Review the validation error message displaying the shift overlap details",
            "expectedResult": "Error message clearly shows the conflicting shift times and employee information"
          },
          {
            "step": 2,
            "action": "Modify the new shift times to remove the overlap (e.g., change shift from 3:00 PM - 11:00 PM to 6:00 PM - 11:00 PM on 2024-01-15)",
            "expectedResult": "Validation error is cleared immediately in real-time, no conflict message is displayed, and the interface indicates the schedule is valid"
          },
          {
            "step": 3,
            "action": "Click the Save button to save the schedule",
            "expectedResult": "Schedule is saved successfully to the database, success confirmation message is displayed (e.g., 'Schedule saved successfully'), and the new shift appears in the employee's schedule"
          },
          {
            "step": 4,
            "action": "Verify the saved schedule by navigating to the employee's schedule view",
            "expectedResult": "Both shifts are visible for the employee with no overlaps: original shift (9:00 AM - 5:00 PM) and new shift (6:00 PM - 11:00 PM) on 2024-01-15"
          }
        ],
        "postconditions": [
          "Schedule is successfully saved in the database without conflicts",
          "Employee EMP001 has both shifts assigned with no overlaps",
          "Successful save operation is logged in the system audit log",
          "No validation errors are present",
          "User can proceed with additional schedule management tasks"
        ],
        "estimatedTime": "6 mins"
      }
    ]
  },
  {
    "storyId": "story-7",
    "storyTitle": "As Scheduling Manager, I want to enforce maximum working hours per employee to comply with labor regulations",
    "type": "happy-path",
    "testCases": [
      {
        "id": "tc-003",
        "title": "Block schedule saving when max hours exceeded",
        "type": "error-case",
        "priority": "High",
        "preconditions": [
          "User is logged in as Scheduling Manager with schedule management permissions",
          "Maximum working hours limits are configured in the system (e.g., 8 hours per day, 40 hours per week)",
          "Employee database is accessible with active employees",
          "Selected employee (e.g., EMP002) has existing shifts totaling near the maximum limit (e.g., 35 hours for the week)",
          "Schedule creation/editing interface is loaded and functional"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the schedule assignment page",
            "expectedResult": "Schedule assignment page loads successfully with employee selection and shift assignment options visible"
          },
          {
            "step": 2,
            "action": "Select an employee (e.g., EMP002) who has existing shifts for the current week",
            "expectedResult": "Employee is selected and current assigned hours summary is displayed (e.g., 35 hours assigned for the week)"
          },
          {
            "step": 3,
            "action": "Assign a new shift that would exceed the maximum daily hours (e.g., assign a 10-hour shift when max is 8 hours per day)",
            "expectedResult": "Validation error is displayed immediately stating 'Maximum daily hours exceeded: Assigned 10 hours exceeds the limit of 8 hours per day' or similar clear message"
          },
          {
            "step": 4,
            "action": "Alternatively, assign shifts that would exceed maximum weekly hours (e.g., add 8 more hours when employee already has 35 hours and max is 40 hours per week)",
            "expectedResult": "Validation error is displayed stating 'Maximum weekly hours exceeded: Total of 43 hours exceeds the limit of 40 hours per week' with breakdown of hours"
          },
          {
            "step": 5,
            "action": "Attempt to save the schedule by clicking the Save button",
            "expectedResult": "Save operation is blocked, error message persists indicating hours must be reduced, and schedule is not saved to the database"
          }
        ],
        "postconditions": [
          "Schedule exceeding maximum hours is not saved to the database",
          "Validation error is logged in the system audit log with details of the violation",
          "Employee's existing shifts remain unchanged",
          "User remains on the schedule page to adjust the hours",
          "System maintains compliance with labor regulations"
        ],
        "estimatedTime": "7 mins"
      },
      {
        "id": "tc-004",
        "title": "Save schedule within max hours successfully",
        "type": "happy-path",
        "priority": "High",
        "preconditions": [
          "User is logged in as Scheduling Manager with schedule management permissions",
          "Maximum working hours limits are configured in the system (e.g., 8 hours per day, 40 hours per week)",
          "Employee database is accessible with active employees",
          "Selected employee (e.g., EMP003) has existing shifts within acceptable limits (e.g., 32 hours for the week)",
          "Schedule creation interface is loaded and functional"
        ],
        "steps": [
          {
            "step": 1,
            "action": "Navigate to the schedule assignment page",
            "expectedResult": "Schedule assignment page loads successfully with all necessary controls and information visible"
          },
          {
            "step": 2,
            "action": "Select an employee (e.g., EMP003) to assign shifts",
            "expectedResult": "Employee is selected and current hours summary is displayed showing 32 hours assigned for the week and remaining available hours (8 hours remaining)"
          },
          {
            "step": 3,
            "action": "Assign shifts that are within the allowed daily and weekly limits (e.g., assign a 7-hour shift on a day with no existing shifts)",
            "expectedResult": "No validation errors are displayed, hours summary updates to show 39 total hours for the week (within 40-hour limit), and the interface indicates the schedule is valid"
          },
          {
            "step": 4,
            "action": "Review the hours summary display to confirm compliance",
            "expectedResult": "Summary clearly shows total daily hours (7 hours) and total weekly hours (39 hours) are within the maximum limits, with visual indicators showing compliance (e.g., green status)"
          },
          {
            "step": 5,
            "action": "Click the Save button to save the schedule",
            "expectedResult": "Schedule is saved successfully to the database, success confirmation message is displayed (e.g., 'Schedule saved successfully - all hours within compliance limits'), and the new shift appears in the employee's schedule"
          },
          {
            "step": 6,
            "action": "Verify the saved schedule by navigating to the employee's schedule view or hours summary report",
            "expectedResult": "All assigned shifts are visible, total hours are accurately calculated and displayed (39 hours for the week), and no compliance warnings are present"
          }
        ],
        "postconditions": [
          "Schedule is successfully saved in the database with all shifts within maximum hours limits",
          "Employee EMP003 has total of 39 hours assigned for the week (within 40-hour limit)",
          "Successful save operation is logged in the system audit log",
          "No validation errors or warnings are present",
          "System maintains full compliance with labor regulations",
          "Hours summary is accurately updated and available for reporting"
        ],
        "estimatedTime": "8 mins"
      }
    ]
  }
]