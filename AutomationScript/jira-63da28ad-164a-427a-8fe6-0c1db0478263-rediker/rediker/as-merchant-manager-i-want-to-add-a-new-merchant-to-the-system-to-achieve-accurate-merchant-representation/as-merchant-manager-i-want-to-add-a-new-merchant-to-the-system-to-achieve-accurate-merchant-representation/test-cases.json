{
  "storyId": "story-1",
  "storyTitle": "As Merchant Manager, I want to add a new merchant to the system to achieve accurate merchant representation",
  "functional": [
    {
      "id": "TC-FUNC-001",
      "title": "Successfully add a new merchant with all mandatory fields filled correctly",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as Merchant Manager with valid credentials",
        "User is on the 'Add Merchant' page (/merchants/add)",
        "Database connection is active and merchants table is accessible",
        "No merchant with the same name exists in the system"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'ABC Electronics Store' in the 'Merchant Name' field",
          "expectedResult": "Text appears in the field without errors"
        },
        {
          "step": 2,
          "action": "Enter '123 Main Street, Suite 100, New York, NY 10001' in the 'Address' field",
          "expectedResult": "Address is displayed correctly in the field"
        },
        {
          "step": 3,
          "action": "Enter 'contact@abcelectronics.com' in the 'Email' field",
          "expectedResult": "Email format is accepted and displayed"
        },
        {
          "step": 4,
          "action": "Enter '+1-555-123-4567' in the 'Phone Number' field",
          "expectedResult": "Phone number is formatted and displayed correctly"
        },
        {
          "step": 5,
          "action": "Select 'Electronics' from the 'Category' dropdown menu",
          "expectedResult": "Category 'Electronics' is selected and displayed in the dropdown"
        },
        {
          "step": 6,
          "action": "Click the 'Submit' button at the bottom of the form",
          "expectedResult": "Form is submitted, loading indicator appears briefly, and green confirmation message 'Merchant added successfully' appears at the top of the page within 3 seconds"
        }
      ],
      "postconditions": [
        "New merchant 'ABC Electronics Store' is saved in the merchants database table",
        "User remains on the 'Add Merchant' page with the form cleared for next entry",
        "Success confirmation message is visible for 5 seconds before auto-dismissing",
        "Merchant appears in the merchant list when navigating to 'View Merchants' page"
      ]
    },
    {
      "id": "TC-FUNC-002",
      "title": "Successfully add a new merchant with optional supporting documents uploaded",
      "category": "Functional",
      "priority": "High",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "User is on the 'Add Merchant' page",
        "Test document file 'merchant_license.pdf' (2MB, valid PDF format) is available on local system",
        "File upload functionality is enabled in the system"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Fill all mandatory fields: Name='Tech Solutions Inc', Address='456 Tech Blvd', Email='info@techsolutions.com', Phone='+1-555-987-6543', Category='Technology'",
          "expectedResult": "All fields are populated correctly without validation errors"
        },
        {
          "step": 2,
          "action": "Click the 'Upload Documents' button in the supporting documents section",
          "expectedResult": "File browser dialog opens"
        },
        {
          "step": 3,
          "action": "Select 'merchant_license.pdf' from the file browser and click 'Open'",
          "expectedResult": "File upload progress bar appears and shows upload progress"
        },
        {
          "step": 4,
          "action": "Wait for upload completion",
          "expectedResult": "Green checkmark icon appears next to filename 'merchant_license.pdf' with message 'Document uploaded successfully'"
        },
        {
          "step": 5,
          "action": "Click the 'Submit' button to save the merchant",
          "expectedResult": "Form submits successfully with confirmation message 'Merchant and documents added successfully' displayed in green banner"
        }
      ],
      "postconditions": [
        "Merchant 'Tech Solutions Inc' is saved in database with document reference",
        "Document 'merchant_license.pdf' is stored in the file storage system with correct merchant association",
        "Document metadata (filename, size, upload date) is recorded in the database",
        "User can view the uploaded document when editing the merchant record"
      ]
    },
    {
      "id": "TC-FUNC-003",
      "title": "Verify inline validation provides real-time feedback for email format",
      "category": "Functional",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "User is on the 'Add Merchant' page with empty form",
        "Client-side validation is enabled"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click into the 'Email' field",
          "expectedResult": "Field receives focus with blue border highlight"
        },
        {
          "step": 2,
          "action": "Type 'invalidemail' (without @ symbol) in the Email field",
          "expectedResult": "No immediate error appears while typing"
        },
        {
          "step": 3,
          "action": "Click outside the Email field (blur event)",
          "expectedResult": "Red error message 'Please enter a valid email address' appears below the Email field, and field border turns red"
        },
        {
          "step": 4,
          "action": "Clear the field and enter 'valid@email.com'",
          "expectedResult": "Error message disappears, field border turns green, and green checkmark icon appears"
        }
      ],
      "postconditions": [
        "Email field shows valid state with green indicator",
        "Form can be submitted with valid email",
        "No error messages are displayed"
      ]
    },
    {
      "id": "TC-FUNC-004",
      "title": "Verify form submission with all fields including optional fields populated",
      "category": "Functional",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "User is on the 'Add Merchant' page",
        "All form fields are visible and enabled"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'Global Retail Partners' in Merchant Name field",
          "expectedResult": "Name is displayed in the field"
        },
        {
          "step": 2,
          "action": "Enter '789 Commerce Ave, Floor 5, Los Angeles, CA 90001' in Address field",
          "expectedResult": "Full address is displayed"
        },
        {
          "step": 3,
          "action": "Enter 'partners@globalretail.com' in Email field",
          "expectedResult": "Email is validated and accepted"
        },
        {
          "step": 4,
          "action": "Enter '+1-555-246-8135' in Phone Number field",
          "expectedResult": "Phone number is formatted correctly"
        },
        {
          "step": 5,
          "action": "Select 'Retail' from Category dropdown",
          "expectedResult": "Category is selected"
        },
        {
          "step": 6,
          "action": "Enter 'Primary retail partner for West Coast operations' in optional Notes/Description field",
          "expectedResult": "Notes text is displayed in the field"
        },
        {
          "step": 7,
          "action": "Click 'Submit' button",
          "expectedResult": "Success message 'Merchant added successfully' appears, response time is under 3 seconds"
        }
      ],
      "postconditions": [
        "Merchant is saved with all fields including optional notes",
        "All data is retrievable when viewing merchant details",
        "Form is reset to empty state for next entry"
      ]
    },
    {
      "id": "TC-FUNC-005",
      "title": "Verify user can navigate away from form and return without data loss using browser back button",
      "category": "Functional",
      "priority": "Low",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "User is on the 'Add Merchant' page",
        "Browser session storage or form state management is enabled"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'Test Merchant Name' in the Merchant Name field",
          "expectedResult": "Text is entered and displayed"
        },
        {
          "step": 2,
          "action": "Enter 'test@merchant.com' in the Email field",
          "expectedResult": "Email is entered and displayed"
        },
        {
          "step": 3,
          "action": "Click browser back button or navigate to 'Dashboard' page",
          "expectedResult": "Warning dialog appears: 'You have unsaved changes. Are you sure you want to leave?' with 'Stay' and 'Leave' buttons"
        },
        {
          "step": 4,
          "action": "Click 'Stay' button in the warning dialog",
          "expectedResult": "Dialog closes and user remains on 'Add Merchant' page with all entered data intact"
        }
      ],
      "postconditions": [
        "All previously entered form data is preserved",
        "User remains on the Add Merchant page",
        "Form is still in editable state"
      ]
    },
    {
      "id": "TC-FUNC-006",
      "title": "Verify successful merchant addition updates the merchant count in the system dashboard",
      "category": "Functional",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "Current merchant count is visible on dashboard (e.g., 50 merchants)",
        "User navigates to 'Add Merchant' page",
        "System dashboard displays real-time merchant statistics"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Note the current merchant count displayed on dashboard before adding",
          "expectedResult": "Dashboard shows current count (e.g., '50 Total Merchants')"
        },
        {
          "step": 2,
          "action": "Fill all mandatory fields: Name='New Merchant Co', Address='100 New St', Email='new@merchant.com', Phone='+1-555-111-2222', Category='Services'",
          "expectedResult": "All fields are filled correctly"
        },
        {
          "step": 3,
          "action": "Click 'Submit' button",
          "expectedResult": "Success message 'Merchant added successfully' appears"
        },
        {
          "step": 4,
          "action": "Navigate to Dashboard page",
          "expectedResult": "Dashboard loads and merchant count is updated to 51 Total Merchants"
        }
      ],
      "postconditions": [
        "Merchant count on dashboard reflects the new addition",
        "New merchant is included in the total count",
        "Dashboard statistics are synchronized with database"
      ]
    },
    {
      "id": "TC-FUNC-007",
      "title": "Verify form field character counters display remaining characters for fields with limits",
      "category": "Functional",
      "priority": "Low",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "User is on the 'Add Merchant' page",
        "Character limit is set to 100 characters for Merchant Name field",
        "Character counter is visible below the field"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Click into the 'Merchant Name' field",
          "expectedResult": "Field receives focus and character counter shows '0/100 characters'"
        },
        {
          "step": 2,
          "action": "Type 'ABC Corporation' (16 characters)",
          "expectedResult": "Character counter updates in real-time to show '16/100 characters'"
        },
        {
          "step": 3,
          "action": "Continue typing until 95 characters are entered",
          "expectedResult": "Character counter shows '95/100 characters' in orange/warning color"
        },
        {
          "step": 4,
          "action": "Type 5 more characters to reach exactly 100 characters",
          "expectedResult": "Character counter shows '100/100 characters' in red color, and further typing is prevented"
        }
      ],
      "postconditions": [
        "Field contains exactly 100 characters",
        "No additional characters can be entered",
        "Character counter accurately reflects the limit"
      ]
    }
  ],
  "negative": [
    {
      "id": "TC-NEGA-001",
      "title": "Verify system prevents merchant addition when mandatory Merchant Name field is empty",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "User is on the 'Add Merchant' page",
        "Form validation is enabled for mandatory fields"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Leave the 'Merchant Name' field empty",
          "expectedResult": "Field remains empty with no content"
        },
        {
          "step": 2,
          "action": "Fill other mandatory fields: Address='123 Test St', Email='test@test.com', Phone='+1-555-000-0000', Category='Retail'",
          "expectedResult": "Other fields are populated correctly"
        },
        {
          "step": 3,
          "action": "Click the 'Submit' button",
          "expectedResult": "Form submission is blocked, red error message 'Merchant Name is required' appears below the Merchant Name field, field border turns red, and focus moves to the empty field"
        },
        {
          "step": 4,
          "action": "Verify no API call is made to POST /api/merchants",
          "expectedResult": "Network tab shows no POST request was sent, form remains on the same page"
        }
      ],
      "postconditions": [
        "No merchant record is created in the database",
        "User remains on the 'Add Merchant' page with error message displayed",
        "Form data in other fields is preserved",
        "Submit button remains enabled for retry"
      ]
    },
    {
      "id": "TC-NEGA-002",
      "title": "Verify system rejects invalid email format and displays appropriate error message",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "User is on the 'Add Merchant' page",
        "Email validation regex is configured to standard RFC 5322 format"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'Valid Merchant Name' in Merchant Name field",
          "expectedResult": "Name is accepted"
        },
        {
          "step": 2,
          "action": "Enter 'notanemail' (missing @ and domain) in Email field",
          "expectedResult": "Text is entered in the field"
        },
        {
          "step": 3,
          "action": "Fill remaining mandatory fields: Address='456 Test Ave', Phone='+1-555-111-1111', Category='Services'",
          "expectedResult": "Fields are populated"
        },
        {
          "step": 4,
          "action": "Click 'Submit' button",
          "expectedResult": "Form submission is prevented, red error message 'Please enter a valid email address (e.g., user@example.com)' appears below Email field, field border turns red"
        },
        {
          "step": 5,
          "action": "Change email to 'test@' (missing domain)",
          "expectedResult": "Same error message persists"
        },
        {
          "step": 6,
          "action": "Change email to '@domain.com' (missing local part)",
          "expectedResult": "Same error message persists"
        }
      ],
      "postconditions": [
        "No merchant is added to the database",
        "Error message remains visible until valid email is entered",
        "Form remains in editable state",
        "All other field data is preserved"
      ]
    },
    {
      "id": "TC-NEGA-003",
      "title": "Verify system handles file upload failure gracefully when unsupported file type is uploaded",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "User is on the 'Add Merchant' page",
        "Test file 'malicious_script.exe' (executable file) is available on local system",
        "Allowed file types are: PDF, JPG, PNG, DOCX (max 5MB)"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Fill all mandatory merchant fields with valid data",
          "expectedResult": "All fields are populated correctly"
        },
        {
          "step": 2,
          "action": "Click 'Upload Documents' button",
          "expectedResult": "File browser dialog opens"
        },
        {
          "step": 3,
          "action": "Select 'malicious_script.exe' file and click 'Open'",
          "expectedResult": "Upload is rejected immediately, red error message 'File type not supported. Please upload PDF, JPG, PNG, or DOCX files only' appears below upload button"
        },
        {
          "step": 4,
          "action": "Verify file is not uploaded to server",
          "expectedResult": "No file appears in the uploaded documents list, no upload progress bar is shown"
        },
        {
          "step": 5,
          "action": "Click 'Submit' button to save merchant without document",
          "expectedResult": "Merchant is saved successfully without the rejected document, confirmation message appears"
        }
      ],
      "postconditions": [
        "Merchant is saved without any document attachment",
        "No executable file is stored on the server",
        "Error message is cleared after successful submission",
        "System security is maintained by rejecting potentially harmful files"
      ]
    },
    {
      "id": "TC-NEGA-004",
      "title": "Verify system prevents duplicate merchant addition when merchant with same name already exists",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "Merchant named 'Existing Merchant Corp' already exists in the database",
        "User is on the 'Add Merchant' page",
        "Duplicate detection is enabled based on merchant name (case-insensitive)"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'Existing Merchant Corp' in Merchant Name field (exact match)",
          "expectedResult": "Text is entered in the field"
        },
        {
          "step": 2,
          "action": "Fill other mandatory fields: Address='789 New Address', Email='different@email.com', Phone='+1-555-999-9999', Category='Technology'",
          "expectedResult": "All fields are populated"
        },
        {
          "step": 3,
          "action": "Click 'Submit' button",
          "expectedResult": "Form submission is blocked, error message 'A merchant with this name already exists. Please use a different name or update the existing merchant.' appears in red banner at top of form"
        },
        {
          "step": 4,
          "action": "Change name to 'EXISTING MERCHANT CORP' (different case)",
          "expectedResult": "Text is entered"
        },
        {
          "step": 5,
          "action": "Click 'Submit' button again",
          "expectedResult": "Same duplicate error message appears, confirming case-insensitive duplicate detection"
        }
      ],
      "postconditions": [
        "No duplicate merchant record is created",
        "Original merchant 'Existing Merchant Corp' remains unchanged in database",
        "User is prompted to modify the merchant name",
        "Form data is preserved for correction"
      ]
    },
    {
      "id": "TC-NEGA-005",
      "title": "Verify system handles network timeout gracefully when API response exceeds 3 seconds",
      "category": "Negative",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "User is on the 'Add Merchant' page",
        "Network simulation tool is configured to delay API response by 5 seconds",
        "Timeout threshold is set to 3 seconds"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Fill all mandatory fields with valid data: Name='Timeout Test Merchant', Address='123 Timeout St', Email='timeout@test.com', Phone='+1-555-888-8888', Category='Retail'",
          "expectedResult": "All fields are populated correctly"
        },
        {
          "step": 2,
          "action": "Click 'Submit' button",
          "expectedResult": "Loading spinner appears, submit button is disabled and shows 'Submitting...'"
        },
        {
          "step": 3,
          "action": "Wait for 3 seconds (timeout threshold)",
          "expectedResult": "After 3 seconds, loading spinner disappears, error message 'Request timed out. Please check your connection and try again.' appears in red banner at top"
        },
        {
          "step": 4,
          "action": "Verify submit button is re-enabled",
          "expectedResult": "Submit button returns to enabled state with text 'Submit', allowing user to retry"
        }
      ],
      "postconditions": [
        "No merchant record is created due to timeout",
        "Form data is preserved for retry",
        "User can attempt resubmission",
        "Error message provides clear guidance for next steps"
      ]
    },
    {
      "id": "TC-NEGA-006",
      "title": "Verify system prevents unauthorized access when user session expires during form completion",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "User is on the 'Add Merchant' page",
        "Session timeout is set to 30 minutes",
        "User session is manually expired or 30 minutes have passed"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Fill all mandatory fields with valid data",
          "expectedResult": "All fields are populated"
        },
        {
          "step": 2,
          "action": "Wait for session to expire or manually clear session token from browser storage",
          "expectedResult": "Session expires in background"
        },
        {
          "step": 3,
          "action": "Click 'Submit' button",
          "expectedResult": "API returns 401 Unauthorized error, error message 'Your session has expired. Please log in again.' appears in red banner"
        },
        {
          "step": 4,
          "action": "Verify automatic redirect to login page after 3 seconds",
          "expectedResult": "User is redirected to login page with message 'Session expired. Please log in to continue.'"
        }
      ],
      "postconditions": [
        "No merchant is added to the database",
        "User is logged out and redirected to login page",
        "Form data is lost (security measure)",
        "User must re-authenticate to access the system"
      ]
    },
    {
      "id": "TC-NEGA-007",
      "title": "Verify system rejects SQL injection attempts in merchant name field",
      "category": "Negative",
      "priority": "High",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "User is on the 'Add Merchant' page",
        "Input sanitization and parameterized queries are implemented",
        "SQL injection protection is active"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter SQL injection string \"'; DROP TABLE merchants; --\" in Merchant Name field",
          "expectedResult": "Text is entered in the field"
        },
        {
          "step": 2,
          "action": "Fill other mandatory fields: Address='123 Test St', Email='test@sql.com', Phone='+1-555-777-7777', Category='Technology'",
          "expectedResult": "Fields are populated"
        },
        {
          "step": 3,
          "action": "Click 'Submit' button",
          "expectedResult": "Either: (A) Input is sanitized and merchant is created with escaped string as literal name, OR (B) Validation error 'Invalid characters detected in Merchant Name' appears"
        },
        {
          "step": 4,
          "action": "Verify merchants table still exists and is not dropped",
          "expectedResult": "Database merchants table remains intact, no SQL injection was executed, all existing merchants are still present"
        }
      ],
      "postconditions": [
        "Database integrity is maintained",
        "No SQL commands from user input are executed",
        "Either merchant is created with sanitized name or creation is blocked",
        "Security logs record the attempted injection for audit"
      ]
    }
  ],
  "edgeCases": [
    {
      "id": "TC-EDGE-001",
      "title": "Verify system handles merchant name at maximum character limit (100 characters)",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "User is on the 'Add Merchant' page",
        "Maximum character limit for Merchant Name is 100 characters",
        "Character counter is visible"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter exactly 100 characters in Merchant Name field: 'A' repeated 100 times or 'This is a very long merchant name that contains exactly one hundred characters for testing purposes ok'",
          "expectedResult": "All 100 characters are accepted, character counter shows '100/100', field border remains green"
        },
        {
          "step": 2,
          "action": "Attempt to type one more character",
          "expectedResult": "Additional character is not entered, field prevents further input, character counter remains at '100/100'"
        },
        {
          "step": 3,
          "action": "Fill other mandatory fields with valid data: Address='123 Edge St', Email='edge@test.com', Phone='+1-555-100-1000', Category='Retail'",
          "expectedResult": "All fields are populated correctly"
        },
        {
          "step": 4,
          "action": "Click 'Submit' button",
          "expectedResult": "Merchant is successfully created, confirmation message 'Merchant added successfully' appears, full 100-character name is saved"
        },
        {
          "step": 5,
          "action": "Navigate to merchant list and verify the merchant name is displayed correctly",
          "expectedResult": "Full 100-character merchant name is displayed without truncation in the database, UI may show ellipsis with tooltip on hover"
        }
      ],
      "postconditions": [
        "Merchant with 100-character name is saved in database",
        "Full name is retrievable and displayed correctly",
        "No data truncation occurred",
        "Character limit enforcement worked correctly"
      ]
    },
    {
      "id": "TC-EDGE-002",
      "title": "Verify system handles special characters and Unicode in merchant name and address fields",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "User is on the 'Add Merchant' page",
        "System supports UTF-8 character encoding",
        "Database collation supports Unicode characters"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter merchant name with special characters: 'Caf√© & Restaurant √ëo√±o‚Ñ¢ Âåó‰∫¨ÂïÜÂ∫ó üè™' in Merchant Name field",
          "expectedResult": "All special characters, accented letters, Chinese characters, and emoji are accepted and displayed correctly"
        },
        {
          "step": 2,
          "action": "Enter address with Unicode: '123 Rue de la Paix, Montr√©al, Qu√©bec, Êó•Êú¨Êù±‰∫¨ÈÉΩ' in Address field",
          "expectedResult": "All international characters are accepted and displayed properly"
        },
        {
          "step": 3,
          "action": "Fill remaining mandatory fields: Email='unicode@test.com', Phone='+1-555-200-2000', Category='Food & Beverage'",
          "expectedResult": "Fields are populated correctly"
        },
        {
          "step": 4,
          "action": "Click 'Submit' button",
          "expectedResult": "Merchant is created successfully with confirmation message, all Unicode characters are preserved"
        },
        {
          "step": 5,
          "action": "Retrieve merchant details from database or view in merchant list",
          "expectedResult": "All special characters, accents, Chinese characters, and emoji are stored and displayed correctly without corruption"
        }
      ],
      "postconditions": [
        "Merchant with Unicode characters is saved correctly in database",
        "Character encoding is preserved throughout the system",
        "All special characters display correctly in UI",
        "Search and filter functions work with Unicode characters"
      ]
    },
    {
      "id": "TC-EDGE-003",
      "title": "Verify system handles minimum valid data entry (only mandatory fields with shortest acceptable values)",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "User is on the 'Add Merchant' page",
        "Minimum character requirements: Name=2 chars, Address=5 chars, Email=valid format, Phone=10 digits"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'AB' (2 characters) in Merchant Name field",
          "expectedResult": "Name is accepted as it meets minimum requirement"
        },
        {
          "step": 2,
          "action": "Enter '12 St' (5 characters) in Address field",
          "expectedResult": "Address is accepted as it meets minimum requirement"
        },
        {
          "step": 3,
          "action": "Enter 'a@b.c' (shortest valid email format) in Email field",
          "expectedResult": "Email is validated and accepted"
        },
        {
          "step": 4,
          "action": "Enter '+1-555-0000' (minimum valid phone) in Phone Number field",
          "expectedResult": "Phone number is accepted"
        },
        {
          "step": 5,
          "action": "Select 'Other' from Category dropdown",
          "expectedResult": "Category is selected"
        },
        {
          "step": 6,
          "action": "Click 'Submit' button",
          "expectedResult": "Merchant is created successfully with confirmation message, all minimum values are saved"
        }
      ],
      "postconditions": [
        "Merchant with minimum valid data is saved in database",
        "All fields contain the minimum acceptable values",
        "No validation errors occurred",
        "Merchant is retrievable and functional in the system"
      ]
    },
    {
      "id": "TC-EDGE-004",
      "title": "Verify system handles rapid consecutive form submissions (double-click prevention)",
      "category": "Edge Cases",
      "priority": "High",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "User is on the 'Add Merchant' page",
        "Submit button debouncing or disabling mechanism is implemented",
        "Network latency is simulated at 1 second"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Fill all mandatory fields with valid data: Name='Rapid Submit Test', Address='123 Rapid St', Email='rapid@test.com', Phone='+1-555-300-3000', Category='Services'",
          "expectedResult": "All fields are populated correctly"
        },
        {
          "step": 2,
          "action": "Quickly double-click the 'Submit' button (two clicks within 200ms)",
          "expectedResult": "Submit button is disabled after first click, shows 'Submitting...' text, loading spinner appears"
        },
        {
          "step": 3,
          "action": "Observe network requests in browser developer tools",
          "expectedResult": "Only ONE POST request to /api/merchants is sent, second click is ignored"
        },
        {
          "step": 4,
          "action": "Wait for response",
          "expectedResult": "Single confirmation message 'Merchant added successfully' appears, button re-enables after response"
        },
        {
          "step": 5,
          "action": "Check database for duplicate entries",
          "expectedResult": "Only ONE merchant record with name 'Rapid Submit Test' exists in database, no duplicates created"
        }
      ],
      "postconditions": [
        "Exactly one merchant record is created",
        "No duplicate submissions occurred",
        "Submit button protection mechanism worked correctly",
        "User experience is smooth without errors"
      ]
    },
    {
      "id": "TC-EDGE-005",
      "title": "Verify system handles file upload at maximum allowed size (5MB boundary)",
      "category": "Edge Cases",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "User is on the 'Add Merchant' page",
        "Test file 'large_document.pdf' of exactly 5MB (5,242,880 bytes) is available",
        "Maximum file size limit is set to 5MB"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Fill all mandatory merchant fields with valid data",
          "expectedResult": "All fields are populated"
        },
        {
          "step": 2,
          "action": "Click 'Upload Documents' button and select 'large_document.pdf' (exactly 5MB)",
          "expectedResult": "File upload begins, progress bar shows upload progress from 0% to 100%"
        },
        {
          "step": 3,
          "action": "Wait for upload completion",
          "expectedResult": "Upload completes successfully, green checkmark appears, message 'Document uploaded successfully (5.0 MB)' is displayed"
        },
        {
          "step": 4,
          "action": "Attempt to upload another file 'oversized.pdf' of 5.1MB (5,349,376 bytes)",
          "expectedResult": "Upload is rejected immediately with error message 'File size exceeds maximum limit of 5MB. Please upload a smaller file.'"
        },
        {
          "step": 5,
          "action": "Click 'Submit' button with the 5MB file attached",
          "expectedResult": "Merchant and document are saved successfully, confirmation message appears"
        }
      ],
      "postconditions": [
        "Merchant is saved with 5MB document attached",
        "File size validation correctly enforces 5MB limit",
        "Oversized file (5.1MB) was rejected",
        "Document is accessible and downloadable at full 5MB size"
      ]
    },
    {
      "id": "TC-EDGE-006",
      "title": "Verify system handles concurrent merchant additions by multiple users without data corruption",
      "category": "Edge Cases",
      "priority": "High",
      "preconditions": [
        "Two users (User A and User B) are logged in as Merchant Managers in different browser sessions",
        "Both users are on the 'Add Merchant' page simultaneously",
        "Database supports concurrent transactions with proper locking",
        "System performance target is maintained under concurrent load"
      ],
      "steps": [
        {
          "step": 1,
          "action": "User A fills form with: Name='Concurrent Merchant A', Address='123 A Street', Email='userA@test.com', Phone='+1-555-400-4000', Category='Retail'",
          "expectedResult": "User A's form is populated"
        },
        {
          "step": 2,
          "action": "User B fills form with: Name='Concurrent Merchant B', Address='456 B Avenue', Email='userB@test.com', Phone='+1-555-500-5000', Category='Technology'",
          "expectedResult": "User B's form is populated"
        },
        {
          "step": 3,
          "action": "User A and User B click 'Submit' button simultaneously (within 100ms of each other)",
          "expectedResult": "Both submissions are processed, both users see loading indicators"
        },
        {
          "step": 4,
          "action": "Wait for both responses (should be under 3 seconds each)",
          "expectedResult": "User A sees 'Merchant added successfully' for Merchant A, User B sees 'Merchant added successfully' for Merchant B"
        },
        {
          "step": 5,
          "action": "Verify database contains both merchants with correct data and no data mixing",
          "expectedResult": "Database contains two distinct merchant records: 'Concurrent Merchant A' with User A's data and 'Concurrent Merchant B' with User B's data, no data corruption or mixing occurred"
        }
      ],
      "postconditions": [
        "Two separate merchant records exist in database",
        "Each merchant has correct associated data with no cross-contamination",
        "System performance remained under 3 seconds for both users",
        "No database locking errors or transaction conflicts occurred"
      ]
    },
    {
      "id": "TC-EDGE-007",
      "title": "Verify system handles phone number formats from different countries and international dialing codes",
      "category": "Edge Cases",
      "priority": "Low",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "User is on the 'Add Merchant' page",
        "Phone number validation supports international formats",
        "System accepts various phone number formats and country codes"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter merchant with US format phone: Name='US Merchant', Phone='+1-555-123-4567', and other required fields",
          "expectedResult": "Phone number is accepted and formatted correctly"
        },
        {
          "step": 2,
          "action": "Click Submit and verify success",
          "expectedResult": "Merchant is created successfully"
        },
        {
          "step": 3,
          "action": "Add another merchant with UK format: Name='UK Merchant', Phone='+44 20 7123 4567', and other required fields",
          "expectedResult": "UK phone format is accepted"
        },
        {
          "step": 4,
          "action": "Add merchant with Japan format: Name='Japan Merchant', Phone='+81-3-1234-5678', and other required fields",
          "expectedResult": "Japan phone format is accepted"
        },
        {
          "step": 5,
          "action": "Add merchant with no country code: Name='Local Merchant', Phone='555-1234', and other required fields",
          "expectedResult": "Either: (A) Phone is accepted if local format is allowed, OR (B) Validation error 'Please include country code (e.g., +1)' appears"
        },
        {
          "step": 6,
          "action": "Verify all accepted phone numbers are stored correctly in database",
          "expectedResult": "All international phone formats are stored and retrievable correctly"
        }
      ],
      "postconditions": [
        "Multiple merchants with different international phone formats are saved",
        "Phone number validation accommodates international formats",
        "All phone numbers are stored in consistent format in database",
        "Phone numbers display correctly in merchant list"
      ]
    }
  ],
  "accessibility": [
    {
      "id": "TC-ACCE-001",
      "title": "Verify complete keyboard navigation through entire Add Merchant form using Tab and Shift+Tab",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "User is on the 'Add Merchant' page",
        "Keyboard is the only input device being used (mouse disconnected or not used)",
        "Browser is set to show focus indicators"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Press Tab key from page load",
          "expectedResult": "Focus moves to first interactive element (likely 'Merchant Name' field) with visible blue focus ring/outline of at least 2px thickness"
        },
        {
          "step": 2,
          "action": "Continue pressing Tab key through all form fields",
          "expectedResult": "Focus moves sequentially through: Merchant Name ‚Üí Address ‚Üí Email ‚Üí Phone ‚Üí Category dropdown ‚Üí Upload Documents button ‚Üí Submit button ‚Üí Cancel button, each showing clear focus indicator"
        },
        {
          "step": 3,
          "action": "Press Shift+Tab to navigate backwards",
          "expectedResult": "Focus moves in reverse order through all interactive elements with visible focus indicators"
        },
        {
          "step": 4,
          "action": "Navigate to Category dropdown and press Enter or Space",
          "expectedResult": "Dropdown opens, focus moves to first option, arrow keys navigate through options"
        },
        {
          "step": 5,
          "action": "Press Enter to select an option",
          "expectedResult": "Option is selected, dropdown closes, focus returns to dropdown trigger"
        },
        {
          "step": 6,
          "action": "Fill all fields using keyboard only and press Enter on Submit button",
          "expectedResult": "Form submits successfully, confirmation message receives focus and is announced"
        }
      ],
      "postconditions": [
        "All form elements are accessible via keyboard",
        "Focus order is logical and follows visual layout",
        "No keyboard traps exist (user can navigate away from all elements)",
        "Form can be completed and submitted entirely with keyboard"
      ]
    },
    {
      "id": "TC-ACCE-002",
      "title": "Verify screen reader announces all form labels, errors, and success messages correctly (NVDA/JAWS)",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "NVDA or JAWS screen reader is active and running",
        "User is on the 'Add Merchant' page",
        "Screen reader is set to verbose mode for testing"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Navigate to 'Merchant Name' field using Tab key",
          "expectedResult": "Screen reader announces: 'Merchant Name, required, edit text' or similar, indicating field label, required status, and field type"
        },
        {
          "step": 2,
          "action": "Navigate through all form fields",
          "expectedResult": "Each field is announced with: label text, required/optional status, field type (edit, combobox, button), and any help text or descriptions"
        },
        {
          "step": 3,
          "action": "Leave 'Merchant Name' field empty and Tab away",
          "expectedResult": "Screen reader announces error: 'Merchant Name, required, invalid entry, Merchant Name is required' or similar, clearly indicating the error"
        },
        {
          "step": 4,
          "action": "Enter valid data in Merchant Name field",
          "expectedResult": "Screen reader announces: 'Merchant Name, valid' or error message is cleared and not announced"
        },
        {
          "step": 5,
          "action": "Fill all fields and submit form successfully",
          "expectedResult": "Screen reader announces: 'Merchant added successfully' from ARIA live region with assertive politeness, interrupting other announcements"
        },
        {
          "step": 6,
          "action": "Navigate to uploaded document",
          "expectedResult": "Screen reader announces: 'merchant_license.pdf, 2 megabytes, uploaded successfully, button remove' providing file details and available actions"
        }
      ],
      "postconditions": [
        "All form elements have proper ARIA labels and roles",
        "Error messages are associated with fields via aria-describedby",
        "Success messages are announced via aria-live regions",
        "Screen reader users can complete form independently"
      ]
    },
    {
      "id": "TC-ACCE-003",
      "title": "Verify focus management and focus trap in modal dialogs (unsaved changes warning)",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "User is on the 'Add Merchant' page",
        "Some form data has been entered but not saved",
        "Keyboard is being used for navigation"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Enter 'Test Merchant' in Merchant Name field",
          "expectedResult": "Data is entered"
        },
        {
          "step": 2,
          "action": "Press browser back button or attempt to navigate away",
          "expectedResult": "Warning modal appears: 'You have unsaved changes. Are you sure you want to leave?', focus automatically moves to first button in modal (likely 'Stay' button)"
        },
        {
          "step": 3,
          "action": "Press Tab key repeatedly",
          "expectedResult": "Focus cycles only within modal between: 'Stay' button ‚Üí 'Leave' button ‚Üí Close (X) button ‚Üí back to 'Stay' button, focus is trapped within modal"
        },
        {
          "step": 4,
          "action": "Press Shift+Tab from first element",
          "expectedResult": "Focus moves to last element in modal (Close button), confirming bidirectional focus trap"
        },
        {
          "step": 5,
          "action": "Press Escape key",
          "expectedResult": "Modal closes, focus returns to the element that triggered the modal (back button or navigation link)"
        },
        {
          "step": 6,
          "action": "Trigger modal again and press Enter on 'Stay' button",
          "expectedResult": "Modal closes, focus returns to form, user remains on Add Merchant page"
        }
      ],
      "postconditions": [
        "Focus is properly trapped within modal when open",
        "Focus returns to triggering element when modal closes",
        "Escape key closes modal as expected",
        "No focus is lost or moved to unexpected elements"
      ]
    },
    {
      "id": "TC-ACCE-004",
      "title": "Verify color contrast ratios meet WCAG 2.1 AA standards (4.5:1 for normal text, 3:1 for large text)",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is on the 'Add Merchant' page",
        "Color contrast analyzer tool is available (e.g., browser extension or online tool)",
        "Page is displayed in default theme/colors"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Use color contrast analyzer to check form field labels (normal text) against background",
          "expectedResult": "Contrast ratio is at least 4.5:1, labels are clearly readable"
        },
        {
          "step": 2,
          "action": "Check error messages (red text) against background",
          "expectedResult": "Contrast ratio is at least 4.5:1, error text is clearly readable without relying solely on color"
        },
        {
          "step": 3,
          "action": "Check success message (green text/background) against its background",
          "expectedResult": "Contrast ratio is at least 4.5:1, success message is clearly readable"
        },
        {
          "step": 4,
          "action": "Check Submit button text against button background color",
          "expectedResult": "Contrast ratio is at least 4.5:1 for normal text or 3:1 if text is large (18pt+ or 14pt+ bold)"
        },
        {
          "step": 5,
          "action": "Check focus indicators (outline/border) against background",
          "expectedResult": "Contrast ratio is at least 3:1, focus indicators are clearly visible"
        },
        {
          "step": 6,
          "action": "Check placeholder text in empty fields",
          "expectedResult": "Contrast ratio is at least 4.5:1 or placeholder is supplemented with visible label"
        }
      ],
      "postconditions": [
        "All text meets WCAG 2.1 AA contrast requirements",
        "Users with low vision can read all content",
        "Color is not the only means of conveying information",
        "Focus indicators are visible to all users"
      ]
    },
    {
      "id": "TC-ACCE-005",
      "title": "Verify form remains functional and readable at 200% browser zoom level",
      "category": "Accessibility",
      "priority": "Medium",
      "preconditions": [
        "User is logged in as Merchant Manager",
        "User is on the 'Add Merchant' page",
        "Browser zoom is set to 100% initially",
        "Browser window is at standard desktop size (1920x1080)"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Press Ctrl and + (or Cmd and + on Mac) repeatedly to zoom to 200%",
          "expectedResult": "Page zooms to 200%, all content scales proportionally"
        },
        {
          "step": 2,
          "action": "Verify all form fields are visible without horizontal scrolling",
          "expectedResult": "Form layout adjusts responsively, fields stack vertically if needed, no content is cut off, no horizontal scrollbar appears"
        },
        {
          "step": 3,
          "action": "Verify all text is readable and not truncated",
          "expectedResult": "Labels, help text, error messages, and button text are fully visible and readable at larger size"
        },
        {
          "step": 4,
          "action": "Fill out form fields at 200% zoom",
          "expectedResult": "All fields are accessible and functional, typing works normally, dropdowns open correctly"
        },
        {
          "step": 5,
          "action": "Submit form at 200% zoom",
          "expectedResult": "Form submits successfully, confirmation message is visible and readable at 200% zoom"
        },
        {
          "step": 6,
          "action": "Verify focus indicators are visible at 200% zoom",
          "expectedResult": "Focus outlines scale appropriately and remain clearly visible"
        }
      ],
      "postconditions": [
        "Form is fully functional at 200% zoom",
        "No content is hidden or requires horizontal scrolling",
        "Text remains readable and properly sized",
        "Layout adapts responsively to larger text size"
      ]
    },
    {
      "id": "TC-ACCE-006",
      "title": "Verify proper ARIA roles, labels, and live regions are implemented throughout the form",
      "category": "Accessibility",
      "priority": "High",
      "preconditions": [
        "User is on the 'Add Merchant' page",
        "Browser developer tools are open to inspect HTML",
        "ARIA validator or accessibility testing tool is available"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Inspect form element in developer tools",
          "expectedResult": "Form has role='form' or is a semantic <form> element, has aria-label='Add Merchant Form' or aria-labelledby pointing to form heading"
        },
        {
          "step": 2,
          "action": "Inspect required field indicators (asterisks)",
          "expectedResult": "Required fields have aria-required='true' attribute, asterisk is not the only indicator (label includes 'required' text or aria-label)"
        },
        {
          "step": 3,
          "action": "Inspect error messages",
          "expectedResult": "Error messages have role='alert' or are in container with aria-live='assertive', errors are associated with fields via aria-describedby"
        },
        {
          "step": 4,
          "action": "Inspect success confirmation message area",
          "expectedResult": "Success message container has aria-live='polite' or 'assertive' and role='status' or 'alert', ensuring screen reader announcement"
        },
        {
          "step": 5,
          "action": "Inspect Category dropdown",
          "expectedResult": "Dropdown has role='combobox' or is semantic <select>, has aria-label or associated <label>, aria-expanded state changes when opened/closed"
        },
        {
          "step": 6,
          "action": "Inspect Upload Documents button and file list",
          "expectedResult": "Button has descriptive aria-label='Upload supporting documents', uploaded file list has role='list' with items having role='listitem'"
        }
      ],
      "postconditions": [
        "All interactive elements have appropriate ARIA roles",
        "All form fields have accessible labels",
        "Dynamic content changes are announced via ARIA live regions",
        "Form passes automated ARIA validation tools"
      ]
    },
    {
      "id": "TC-ACCE-007",
      "title": "Verify mobile accessibility with touch targets meeting minimum size requirements (44x44px)",
      "category": "Accessibility",
      "priority": "Medium",
      "preconditions": [
        "User is accessing the 'Add Merchant' page on mobile device or mobile emulator",
        "Screen size is set to typical mobile dimensions (375x667px - iPhone SE)",
        "User is logged in as Merchant Manager",
        "Touch is the primary input method"
      ],
      "steps": [
        {
          "step": 1,
          "action": "Inspect Submit button touch target size using developer tools",
          "expectedResult": "Button is at least 44x44 pixels (iOS) or 48x48 pixels (Android), easily tappable with thumb"
        },
        {
          "step": 2,
          "action": "Inspect all form field touch targets",
          "expectedResult": "All input fields have touch target height of at least 44px, adequate spacing between fields (at least 8px) to prevent mis-taps"
        },
        {
          "step": 3,
          "action": "Tap on Category dropdown",
          "expectedResult": "Dropdown opens easily on first tap, options are large enough to tap accurately (44px minimum height)"
        },
        {
          "step": 4,
          "action": "Tap on Upload Documents button",
          "expectedResult": "Button is easily tappable, file picker opens, button is at least 44x44px"
        },
        {
          "step": 5,
          "action": "Attempt to tap close icon (X) on uploaded file",
          "expectedResult": "Close icon has touch target of at least 44x44px (may have invisible padding), taps register accurately"
        },
        {
          "step": 6,
          "action": "Fill and submit form using only touch input",
          "expectedResult": "All interactions work smoothly with touch, no precision tapping required, form submits successfully"
        }
      ],
      "postconditions": [
        "All interactive elements meet minimum touch target size",
        "Form is fully usable on mobile devices",
        "No accidental taps occur due to small or close targets",
        "Mobile users can complete form efficiently"
      ]
    }
  ],
  "selectedTypes": {
    "functional": true,
    "negative": true,
    "edgeCases": true,
    "accessibility": true
  },
  "userStoryObject": {
    "id": "story-1",
    "title": "As Merchant Manager, I want to add a new merchant to the system to achieve accurate merchant representation",
    "epicId": "epic-1",
    "persona": "Merchant Manager",
    "priority": "Medium",
    "subtasks": [
      {
        "category": "Planning",
        "description": "Define data model and validation rules for merchant addition",
        "estimatedHours": 4
      },
      {
        "category": "Backend",
        "description": "Implement API endpoint POST /api/merchants for adding merchants",
        "estimatedHours": 6
      },
      {
        "category": "Frontend",
        "description": "Develop 'Add Merchant' form with real-time validation",
        "estimatedHours": 8
      },
      {
        "category": "Frontend",
        "description": "Implement user feedback notifications for successful addition",
        "estimatedHours": 4
      },
      {
        "category": "Testing",
        "description": "Create unit tests for the merchant addition endpoint",
        "estimatedHours": 6
      },
      {
        "category": "Testing",
        "description": "Perform integration testing for the complete process",
        "estimatedHours": 6
      },
      {
        "category": "Documentation",
        "description": "Document API endpoint specifications and validation rules",
        "estimatedHours": 4
      }
    ],
    "featureId": "feature-1",
    "testCases": [],
    "description": "CONTEXT & BACKGROUND:\nThe ability to add new merchants is crucial for maintaining an up-to-date merchant list that reflects current business relationships.\n\nCURRENT STATE:\nCurrently, there is no structured system for adding new merchants, leading to inconsistent data management.\n\nDESIRED STATE:\nAn intuitive interface where merchant managers can easily add new merchants with all necessary information captured accurately.\n\nKEY FUNCTIONALITY:\n‚Ä¢ Input fields for merchant name, address, contact details, and category.\n‚Ä¢ Validation rules for mandatory fields and data formats.\n‚Ä¢ Ability to upload supporting documents.\n‚Ä¢ User feedback on successful addition of merchants.\n\nUSER INTERACTION FLOW:\n1. User navigates to the 'Add Merchant' page.\n2. User fills out the merchant information form.\n3. System validates the input data.\n4. User submits the form.\n5. System processes the addition.\n6. Confirmation message is displayed to the user.\n\nTECHNICAL CONSIDERATIONS:\n‚Ä¢ Data source: Merchants table in the database.\n‚Ä¢ Validation rules: Ensure required fields are filled and formats are correct.\n‚Ä¢ API endpoints: POST /api/merchants for adding merchants.\n‚Ä¢ Security: User authentication required for access.\n‚Ä¢ Performance: Response time under 3 seconds for submissions.\n\nOUT OF SCOPE:\n‚Ä¢ Bulk upload of merchants will be addressed in future stories.\n\nSUCCESS METRICS:\n‚Ä¢ 90% of users successfully add merchants without errors on the first attempt.",
    "storyPoints": 5,
    "personaSource": "AI Suggested",
    "acceptanceCriteria": [
      "System validates all mandatory fields and adds the merchant successfully when valid data is submitted, displaying a confirmation message.",
      "System prevents addition of merchants and displays inline error messages when required fields are missing or incorrect.",
      "System allows uploading of supporting documents and confirms successful upload.",
      "System handles concurrent additions of merchants without performance degradation."
    ]
  }
}